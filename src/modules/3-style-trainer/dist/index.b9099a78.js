function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequire4b33;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequire4b33=i),i.register("5bFr4",(function(e,t){i("27Lyk").register(JSON.parse('{"adU6T":"index.b9099a78.js","gW5g5":"puzzle-geometry.898d008f.js","hPxUV":"puzzle-geometry.0190f2b3.js","iak3L":"2x2x2.kpuzzle.json-RUB44MJV.e7103f97.js","3tHIy":"2x2x2.kpuzzle.svg-CQF2FTV7.d5ab3729.js","lfz5Q":"3x3x3.kpuzzle.svg-ERSSH66P.82ea6213.js","4UNjE":"3x3x3-ll.kpuzzle.svg-53CBPG5O.f5b1df4a.js","91rD7":"clock.kpuzzle.json-BQKNKV3G.2800adbf.js","lMvhS":"clock.kpuzzle.svg-B7TMN3SY.46e945ea.js","dRtyN":"pyraminx.kpuzzle.svg-QBBMZVDY.0739ed16.js","kziDj":"sq1-hyperorbit.kpuzzle.json-4XS5YACO.a9e96e56.js","1uf7V":"sq1-hyperorbit.kpuzzle.svg-ID57EER7.9830c057.js","aGyuS":"kilominx.kpuzzle.svg-7XJBOKFU.5d33195d.js","2tl92":"redi_cube.kpuzzle.json-EPBKWOMV.d2a51100.js","gyTEh":"redi_cube.kpuzzle.svg-BSHCMC2Z.db9de252.js"}'))})),i.register("27Lyk",(function(t,n){var r,i;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>i),(e=>i=e));var a={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)a[t[n]]=e[t[n]]},i=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("71WRK",(function(t,n){e(t.exports,"customPGPuzzleLoader",(()=>u)),e(t.exports,"getFaceletAppearance",(()=>c)),e(t.exports,"cubeAppearance",(()=>L)),e(t.exports,"cube2x2x2",(()=>F)),e(t.exports,"cube3x3x3",(()=>q)),e(t.exports,"puzzles",(()=>Z));var r=i("dKxIg"),a=i("cks0r");async function o(e){return(await i("eSgSO")).getPuzzleGeometryByDesc(e,{allMoves:!0,orientCenters:!0,addRotations:!0})}var s=1;function u(e,t){const n=s++;let a=null;const u={id:`custom-${n}`,fullName:t?.fullName??`Custom Puzzle (instance #${n})`,kpuzzle:async()=>a??(a=async function(e){const t=await o(e),n=t.getKPuzzleDefinition(!0);n.name=`description: ${e}`;const a=new((await i("eSgSO")).ExperimentalPGNotation)(t,t.getOrbitsDef(!0));return new r.KPuzzle(n,{experimentalPGNotation:a})}(e)),svg:async()=>(await o(e)).generatesvg(),pg:async()=>o(e)};return t?.inventedBy&&(u.inventedBy=t.inventedBy),t?.inventionYear&&(u.inventionYear=t.inventionYear),u}var p={333:{puzzleID:"3x3x3",eventName:"3x3x3 Cube"},222:{puzzleID:"2x2x2",eventName:"2x2x2 Cube"},444:{puzzleID:"4x4x4",eventName:"4x4x4 Cube"},555:{puzzleID:"5x5x5",eventName:"5x5x5 Cube"},666:{puzzleID:"6x6x6",eventName:"6x6x6 Cube"},777:{puzzleID:"7x7x7",eventName:"7x7x7 Cube"},"333bf":{puzzleID:"3x3x3",eventName:"3x3x3 Blindfolded"},"333fm":{puzzleID:"3x3x3",eventName:"3x3x3 Fewest Moves"},"333oh":{puzzleID:"3x3x3",eventName:"3x3x3 One-Handed"},clock:{puzzleID:"clock",eventName:"Clock"},minx:{puzzleID:"megaminx",eventName:"Megaminx"},pyram:{puzzleID:"pyraminx",eventName:"Pyraminx"},skewb:{puzzleID:"skewb",eventName:"Skewb"},sq1:{puzzleID:"square1",eventName:"Square-1"},"444bf":{puzzleID:"4x4x4",eventName:"4x4x4 Blindfolded"},"555bf":{puzzleID:"5x5x5",eventName:"5x5x5 Blindfolded"},"333mb":{puzzleID:"3x3x3",eventName:"3x3x3 Multi-Blind"}};var l,m;function c(e,t,n,r,i){const a=e.orbits[t].pieces[n];if(null===a)return d;const o=a.facelets[r];return null===o?d:"string"==typeof o?o:i?o.hintAppearance??o.appearance:o.appearance}(m=l||(l={})).Regular="Regular",m.Dim="Dim",m.Ignored="Ignored",m.OrientationStickers="OrientationStickers",m.Invisible="Invisible",m.Ignoriented="Ignoriented",m.IgnoreNonPrimary="IgnoreNonPrimary",m.PermuteNonPrimary="PermuteNonPrimary",m.OrientationWithoutPermutation="OrientationWithoutPermutation";var h=class{constructor(e,t){this.stickerings=new Map;for(const[n,r]of Object.entries(e.definition.orbits))this.stickerings.set(n,new Array(r.numPieces).fill(t))}},d="regular",f="ignored",v="oriented",_="invisible",w="dim",g={facelets:[d,d,d,d,d]},x={facelets:[f,f,f,f,f]},y={facelets:[v,v,v,v,v]},S={facelets:[_,_,_,_]},E={facelets:[d,f,f,f,f]},z={facelets:[w,d,d,d,d]},k={facelets:[w,w,w,w,w]},b={facelets:[w,f,f,f,f]},G={facelets:[v,f,f,f,f]};function R(e){switch(e){case l.Regular:return g;case l.Dim:return k;case l.Ignored:return x;case l.OrientationStickers:return y;case l.Invisible:return S;case l.IgnoreNonPrimary:return E;case l.PermuteNonPrimary:return z;case l.Ignoriented:return b;case l.OrientationWithoutPermutation:return G}}var N,A,D,C=class extends h{constructor(e){super(e,l.Regular)}set(e,t){for(const[n,r]of this.stickerings.entries())for(let i=0;i<r.length;i++)e.stickerings.get(n)[i]&&(r[i]=t);return this}toAppearance(){const e={orbits:{}};for(const[t,n]of this.stickerings.entries()){const r=[],i={pieces:r};e.orbits[t]=i;for(const e of n)r.push(R(e))}return e}},P=class{constructor(e){this.kpuzzle=e}and(e){const t=new h(this.kpuzzle,!1);for(const[n,r]of Object.entries(this.kpuzzle.definition.orbits))e:for(let i=0;i<r.numPieces;i++){t.stickerings.get(n)[i]=!0;for(const r of e)if(!r.stickerings.get(n)[i]){t.stickerings.get(n)[i]=!1;continue e}}return t}or(e){const t=new h(this.kpuzzle,!1);for(const[n,r]of Object.entries(this.kpuzzle.definition.orbits))e:for(let i=0;i<r.numPieces;i++){t.stickerings.get(n)[i]=!1;for(const r of e)if(r.stickerings.get(n)[i]){t.stickerings.get(n)[i]=!0;continue e}}return t}not(e){const t=new h(this.kpuzzle,!1);for(const[n,r]of Object.entries(this.kpuzzle.definition.orbits))for(let i=0;i<r.numPieces;i++)t.stickerings.get(n)[i]=!e.stickerings.get(n)[i];return t}all(){return this.and(this.moves([]))}move(e){const t=this.kpuzzle.moveToTransformation(e),n=new h(this.kpuzzle,!1);for(const[e,r]of Object.entries(this.kpuzzle.definition.orbits))for(let i=0;i<r.numPieces;i++)t.transformationData[e].permutation[i]===i&&0===t.transformationData[e].orientation[i]||(n.stickerings.get(e)[i]=!0);return n}moves(e){return e.map((e=>this.move(e)))}},I=()=>{};async function L(e,t){const n=await e.kpuzzle(),r=new C(n),i=new P(n),a=()=>i.move("U"),o=()=>i.or(i.moves(["U","D"])),s=()=>i.not(o()),u=()=>i.or(i.moves(["L","R"])),p=()=>i.not(u()),m=()=>i.or(i.moves(["F","B"])),c=()=>i.not(m()),h=()=>i.not(a()),d=()=>i.and([a(),p(),c()]),f=()=>i.and([i.and(i.moves(["F","R"])),i.not(o())]),v=()=>i.and(i.moves(["D","R","F"])),_=()=>i.or([v(),f()]),w=()=>i.or([i.and([p(),s()]),i.and([p(),c()]),i.and([s(),c()])]),g=()=>i.or([i.and([p(),o(),m()]),i.and([s(),u(),m()]),i.and([c(),o(),u()])]),x=()=>i.not(i.or([w(),g()])),y=()=>i.or([p(),i.and([a(),g()])]);function S(){r.set(h(),l.Dim)}function E(){r.set(a(),l.PermuteNonPrimary),r.set(d(),l.Dim)}function z(){r.set(a(),l.IgnoreNonPrimary),r.set(d(),l.Regular)}switch(t){case"full":break;case"PLL":S(),E();break;case"CLS":S(),r.set(i.and(i.moves(["D","R","F"])),l.Regular),r.set(a(),l.Ignoriented),r.set(i.and([a(),p(),c()]),l.Dim),r.set(i.and([a(),x()]),l.IgnoreNonPrimary);break;case"OLL":S(),z();break;case"COLL":S(),E(),r.set(i.and([a(),x()]),l.Regular);break;case"OCLL":S(),r.set(a(),l.Ignoriented),r.set(d(),l.Dim),r.set(i.and([a(),x()]),l.IgnoreNonPrimary);break;case"CLL":S(),r.set(i.not(i.and([x(),a()])),l.Dim);break;case"ELL":S(),r.set(a(),l.Dim),r.set(i.and([a(),g()]),l.Regular);break;case"ELS":S(),z(),r.set(i.and([a(),x()]),l.Ignored),r.set(f(),l.Regular),r.set(v(),l.Ignored);break;case"LL":S();break;case"F2L":r.set(a(),l.Ignored);break;case"ZBLL":S(),r.set(a(),l.PermuteNonPrimary),r.set(d(),l.Dim),r.set(i.and([a(),x()]),l.Regular);break;case"ZBLS":S(),r.set(_(),l.Regular),z(),r.set(i.and([a(),x()]),l.Ignored);break;case"WVLS":case"VLS":S(),r.set(_(),l.Regular),z();break;case"LS":S(),r.set(_(),l.Regular),r.set(a(),l.Ignored),r.set(d(),l.Dim);break;case"EO":r.set(x(),l.Ignored),r.set(g(),l.OrientationWithoutPermutation);break;case"EOline":r.set(x(),l.Ignored),r.set(g(),l.OrientationWithoutPermutation),r.set(i.and(i.moves(["D","M"])),l.Regular);break;case"EOcross":r.set(g(),l.OrientationWithoutPermutation),r.set(i.move("D"),l.Regular),r.set(x(),l.Ignored);break;case"CMLL":r.set(h(),l.Dim),r.set(y(),l.Ignored),r.set(i.and([a(),x()]),l.Regular);break;case"L6E":r.set(i.not(y()),l.Dim);break;case"L6EO":r.set(i.not(y()),l.Dim),r.set(y(),l.OrientationWithoutPermutation),r.set(i.and([w(),o()]),l.OrientationStickers);break;case"Daisy":r.set(i.all(),l.Ignored),r.set(w(),l.Dim),r.set(i.and([i.move("D"),w()]),l.Regular),r.set(i.and([i.move("U"),g()]),l.IgnoreNonPrimary);break;case"Cross":r.set(i.all(),l.Ignored),r.set(w(),l.Dim),r.set(i.and([i.move("D"),w()]),l.Regular),r.set(i.and([i.move("D"),g()]),l.Regular);break;case"2x2x2":r.set(i.or(i.moves(["U","F","R"])),l.Ignored),r.set(i.and([i.or(i.moves(["U","F","R"])),w()]),l.Dim);break;case"2x2x3":r.set(i.all(),l.Dim),r.set(i.or(i.moves(["U","F","R"])),l.Ignored),r.set(i.and([i.or(i.moves(["U","F","R"])),w()]),l.Dim),r.set(i.and([i.move("F"),i.not(i.or(i.moves(["U","R"])))]),l.Regular);break;case"Void Cube":r.set(w(),l.Invisible);break;case"picture":case"invisible":r.set(i.all(),l.Invisible);break;case"centers-only":r.set(i.not(w()),l.Ignored);break;case"experimental-global-custom-1":case"experimental-global-custom-2":!function(e,t){I(e,t)}(r,i);break;default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),r.set(i.and(i.moves([])),l.Dim)}return r.toAppearance()}async function T(){return["full","PLL","CLS","OLL","COLL","OCLL","ELL","ELS","LL","F2L","ZBLL","ZBLS","WVLS","VLS","LS","EO","EOline","EOcross","CMLL","L6E","L6EO","Daisy","Cross","2x2x2","2x2x3","Void Cube","picture","invisible","centers-only"]}function O(e){let t=null;return()=>t??(t=e())}async function M(e){return(await i("eSgSO")).getPuzzleGeometryByName(e,{allMoves:!0,orientCenters:!0,addRotations:!0})}globalThis.location&&"true"===new URL(location.href).searchParams.get("global-custom-stickerer")&&(window.setGlobalCustomStickerer=function(e){(async()=>{I=e;const t=Array.from(document.body.querySelectorAll("twisty-player"));console.log(`Setting the custom stickering for ${t.length} players!`);const n=[];for(const e of t)n.push((async()=>{const t=await e.experimentalModel.stickering.get();e.experimentalStickering="experimental-global-custom-1"===t?"experimental-global-custom-2":"experimental-global-custom-1"})());await Promise.all(n),console.log("Success!")})()},window.PieceStickering=l,console.log("Global custom stickerer enabled! (using: global-custom-stickerer=true)"),console.log("Look here for inspiration:","https://github.com/cubing/cubing.js/blob/81b5cab3e27d8defb39dd1e0a10bc9e8ba894d26/src/cubing/puzzles/stickerings/cube-stickerings.ts#L67"));var U=class{constructor(e){a.__privateAdd(this,N,void 0),a.__privateAdd(this,A,void 0),a.__privateAdd(this,D,void 0),this.pgId=e.pgID,this.id=e.id,this.fullName=e.fullName,this.inventedBy=e.inventedBy,this.inventionYear=e.inventionYear}pg(){return a.__privateGet(this,N)??a.__privateSet(this,N,M(this.pgId??this.id))}kpuzzle(){return a.__privateGet(this,A)??a.__privateSet(this,A,async function(e,t){const n=await e,a=n.getKPuzzleDefinition(!0);a.name=t;const o=new((await i("eSgSO")).ExperimentalPGNotation)(n,n.getOrbitsDef(!0));return new r.KPuzzle(a,{experimentalPGNotation:o})}(this.pg(),this.id))}svg(){return a.__privateGet(this,D)??a.__privateSet(this,D,(async()=>(await this.pg()).generatesvg())())}};N=new WeakMap,A=new WeakMap,D=new WeakMap;var B=class extends U{constructor(){super(...arguments),this.stickerings=T}appearance(e){return L(this,e)}},F={id:"2x2x2",fullName:"2×2×2 Cube",kpuzzle:O((async()=>new r.KPuzzle((await i("bu4Gb")).cube2x2x2KPuzzleDefinition))),svg:async()=>(await i("k8a1w")).default,pg:O((async()=>M("2x2x2"))),appearance:e=>L(F,e),stickerings:T},q={id:"3x3x3",fullName:"3×3×3 Cube",inventedBy:["Ernő Rubik"],inventionYear:1974,kpuzzle:O((async()=>r.experimental3x3x3KPuzzle)),svg:O((async()=>(await i("1wxIG")).default)),llSVG:O((async()=>(await i("42PSz")).default)),pg:O((async()=>M("3x3x3"))),appearance:e=>L(q,e),stickerings:T},W={id:"clock",fullName:"Clock",inventedBy:["Christopher C. Wiggs","Christopher J. Taylor"],inventionYear:1988,kpuzzle:O((async()=>new r.KPuzzle((await i("fPPtJ")).clockKPuzzleDefinition))),svg:O((async()=>(await i("7GPye")).default))};async function j(){return["full","experimental-fto-fc","experimental-fto-f2t","experimental-fto-sc","experimental-fto-l2c","experimental-fto-lbt","experimental-fto-l3t"]}var H=new class extends U{constructor(){super({pgID:"FTO",id:"fto",fullName:"Face-Turning Octahedron",inventedBy:["Karl Rohrbach","David Pitcher"],inventionYear:1983}),this.stickerings=j}appearance(e){return async function(e,t){const n=await e.kpuzzle(),r=new C(n),i=new P(n),a=()=>i.and([i.move("U"),i.not(i.or(i.moves(["F","BL","BR"])))]),o=()=>i.and([i.move("U"),i.not(i.move("F"))]),s=()=>i.or([o(),i.and([i.move("F"),i.not(i.or(i.moves(["U","BL","BR"])))])]),u=()=>i.not(i.or([i.and([i.move("U"),i.move("F")]),i.and([i.move("F"),i.move("BL")]),i.and([i.move("F"),i.move("BR")]),i.and([i.move("BL"),i.move("BR")])])),p=()=>i.not(i.or([i.and([i.move("F"),i.move("BL")]),i.and([i.move("F"),i.move("BR")]),i.and([i.move("BL"),i.move("BR")])]));switch(t){case"full":break;case"experimental-fto-fc":r.set(i.not(a()),l.Ignored);break;case"experimental-fto-f2t":r.set(i.not(o()),l.Ignored),r.set(a(),l.Dim);break;case"experimental-fto-sc":r.set(i.not(s()),l.Ignored),r.set(o(),l.Dim);break;case"experimental-fto-l2c":r.set(i.not(u()),l.Ignored),r.set(s(),l.Dim);break;case"experimental-fto-lbt":r.set(i.not(p()),l.Ignored),r.set(u(),l.Dim);break;case"experimental-fto-l3t":r.set(p(),l.Dim);break;default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),r.set(i.and(i.moves([])),l.Dim)}return r.toAppearance()}(this,e)}};async function K(){return["full","F2L","LL"]}var $=new class extends U{constructor(){super({id:"megaminx",fullName:"Megaminx",inventionYear:1981}),this.stickerings=K}appearance(e){return async function(e,t){switch(t){case"full":case"F2L":case"LL":return L(e,t);default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`)}return L(e,"full")}(this,e)}},Q=new class extends U{constructor(){super({id:"pyraminx",fullName:"Pyraminx",inventedBy:["Uwe Meffert"]}),this.svg=O((async()=>(await i("6d7qw")).default))}},V={id:"square1",fullName:"Square-1",inventedBy:["Karel Hršel","Vojtech Kopský"],inventionYear:1990,kpuzzle:O((async()=>new r.KPuzzle((await i("cJLAM")).sq1HyperOrbitKPuzzleDefinition))),svg:O((async()=>(await i("gBfjV")).default))},Y={id:"kilominx",fullName:"Kilominx",kpuzzle:O((async()=>{const e=await M("megaminx + chopasaurus"),t=JSON.parse(JSON.stringify(e.getKPuzzleDefinition(!0)));delete t.orbits.CENTERS,delete t.orbits.CENTERS2,delete t.startStateData.CENTERS,delete t.startStateData.CENTERS2;for(const e of Object.values(t.moves))delete e.CENTERS,delete e.CENTERS2;t.name="kilominx",delete t.experimentalPuzzleDescription;const n=new((await i("eSgSO")).ExperimentalPGNotation)(e,e.getOrbitsDef(!0)),a=new r.KPuzzle(t,{experimentalPGNotation:{lookupMove:e=>"x2"===e.toString()||"x2'"===e.toString()?o.transformationData:n.lookupMove(e)}}),o=a.algToTransformation("Rv2 Fv Uv'");return t.moves.x2=o,a})),svg:O((async()=>(await i("c22Wm")).kilominxSVG))},J={id:"redi_cube",fullName:"Redi Cube",inventedBy:["Oskar van Deventer"],inventionYear:2009,kpuzzle:O((async()=>new r.KPuzzle((await i("2AAUC")).rediCubeKPuzzleDefinition))),svg:async()=>(await i("k2OLi")).rediCubeSVG},Z={"3x3x3":q,"2x2x2":F,"4x4x4":new B({id:"4x4x4",fullName:"4×4×4 Cube"}),"5x5x5":new B({id:"5x5x5",fullName:"5×5×5 Cube"}),"6x6x6":new B({id:"6x6x6",fullName:"6×6×6 Cube"}),"7x7x7":new B({id:"7x7x7",fullName:"7×7×7 Cube"}),"40x40x40":new B({id:"40x40x40",fullName:"40×40×40 Cube"}),clock:W,megaminx:$,pyraminx:Q,skewb:new U({id:"skewb",fullName:"Skewb",inventedBy:["Tony Durham"]}),square1:V,fto:H,gigaminx:new U({id:"gigaminx",fullName:"Gigaminx",inventedBy:["Tyler Fox"],inventionYear:2006}),master_tetraminx:new U({pgID:"master tetraminx",id:"master_tetraminx",fullName:"Master Tetraminx",inventedBy:["Katsuhiko Okamoto"],inventionYear:2002}),kilominx:Y,redi_cube:J}})),i.register("dKxIg",(function(t,n){e(t.exports,"KState",(()=>m)),e(t.exports,"KPuzzle",(()=>E)),e(t.exports,"experimental3x3x3KPuzzle",(()=>k));var r=i("98KNc"),a=i("cks0r");function o(e,t,n){const r={};for(const i in e.orbits){const a=e.orbits[i],o=t[i],s=n[i];if(d(a.numOrientations,s))r[i]=o;else if(d(a.numOrientations,o))r[i]=s;else{const e=new Array(a.numPieces);if(1===a.numOrientations){for(let t=0;t<a.numPieces;t++)e[t]=o.permutation[s.permutation[t]];r[i]={permutation:e,orientation:o.orientation}}else{const t=new Array(a.numPieces);for(let n=0;n<a.numPieces;n++)t[n]=(o.orientation[s.permutation[n]]+s.orientation[n])%a.numOrientations,e[n]=o.permutation[s.permutation[n]];r[i]={permutation:e,orientation:t}}}}return r}function s(e,t,n){const r={};for(const i in e.orbits){const a=e.orbits[i],o=t[i],s=n[i];if(d(a.numOrientations,s))r[i]=o;else{const e=new Array(a.numPieces);if(1===a.numOrientations){for(let t=0;t<a.numPieces;t++)e[t]=o.pieces[s.permutation[t]];r[i]={pieces:e,orientation:o.orientation}}else{const t=new Array(a.numPieces);for(let n=0;n<a.numPieces;n++)t[n]=(o.orientation[s.permutation[n]]+s.orientation[n])%a.numOrientations,e[n]=o.pieces[s.permutation[n]];r[i]={pieces:e,orientation:t}}}}return r}var u=new Map;function p(e){const t=u.get(e);if(t)return t;const n=new Array(e),r=new Array(e);for(let t=0;t<e;t++)n[t]=t,r[t]=0;const i={permutation:n,orientation:r};return u.set(e,i),i}var l,m=class{constructor(e,t){this.kpuzzle=e,this.stateData=t}static fromTransformation(e){const t=s(e.kpuzzle.definition,e.kpuzzle.definition.startStateData,e.transformationData);return new m(e.kpuzzle,t)}apply(e){return this.applyTransformation(this.kpuzzle.toTransformation(e))}applyTransformation(e){if(e.isIdentityTransformation())return new m(this.kpuzzle,this.stateData);const t=s(this.kpuzzle.definition,this.stateData,e.transformationData);return new m(this.kpuzzle,t)}applyMove(e){return this.applyTransformation(this.kpuzzle.moveToTransformation(e))}applyAlg(e){return this.applyTransformation(this.kpuzzle.algToTransformation(e))}experimentalToTransformation(){if(!this.kpuzzle.canConvertStateToUniqueTransformation())return null;const e={};for(const[t,n]of Object.entries(this.stateData)){const r={permutation:n.pieces,orientation:n.orientation};e[t]=r}return new h(this.kpuzzle,e)}},c=class{constructor(e,t){this.kpuzzle=e,this.transformationData=t,a.__privateAdd(this,l,void 0)}invert(){return new c(this.kpuzzle,v(this.kpuzzle,this.transformationData))}isIdentityTransformation(){return a.__privateGet(this,l)??a.__privateSet(this,l,this.isIdentical(this.kpuzzle.identityTransformation()))}static experimentalConstructIdentity(e){const t=new c(e,function(e){const t={};for(const[n,r]of Object.entries(e.orbits))t[n]=p(r.numPieces);return t}(e.definition));return a.__privateSet(t,l,!0),t}isIdentical(e){return function(e,t,n){for(const[r,i]of Object.entries(e.definition.orbits))if(!f(i,t[r],n[r]))return!1;return!0}(this.kpuzzle,this.transformationData,e.transformationData)}apply(e){return this.applyTransformation(this.kpuzzle.toTransformation(e))}applyTransformation(e){if(this.kpuzzle!==e.kpuzzle)throw new Error(`Tried to apply a transformation for a KPuzzle (${e.kpuzzle.name()}) to a different KPuzzle (${this.kpuzzle.name()}).`);return a.__privateGet(this,l)?new c(this.kpuzzle,e.transformationData):a.__privateGet(e,l)?new c(this.kpuzzle,this.transformationData):new c(this.kpuzzle,o(this.kpuzzle.definition,this.transformationData,e.transformationData))}applyMove(e){return this.applyTransformation(this.kpuzzle.moveToTransformation(e))}applyAlg(e){return this.applyTransformation(this.kpuzzle.algToTransformation(e))}toKState(){return m.fromTransformation(this)}repetitionOrder(){return function(e,t){let n=1;for(const r in e.orbits){const i=e.orbits[r],a=t.transformationData[r],o=new Array(i.numPieces);for(let e=0;e<i.numPieces;e++)if(!o[e]){let t=e,r=0,s=0;for(;o[t]=!0,r+=a.orientation[t],s+=1,t=a.permutation[t],t!==e;);0!==r&&(s=s*i.numOrientations/S(i.numOrientations,r)),n=n*s/S(n,s)}}return n}(this.kpuzzle.definition,this)}selfMultiply(e){return new c(this.kpuzzle,_(this.kpuzzle,this.transformationData,e))}},h=c;function d(e,t){const{permutation:n}=t,r=n.length;for(let e=0;e<r;e++)if(n[e]!==e)return!1;if(e>1){const{orientation:e}=t;for(let t=0;t<r;t++)if(0!==e[t])return!1}return!0}function f(e,t,n,r={}){for(let i=0;i<e.numPieces;i++){if(!r?.ignoreOrientation&&t.orientation[i]!==n.orientation[i])return!1;if(!r?.ignorePermutation&&t.permutation[i]!==n.permutation[i])return!1}return!0}function v(e,t){const n={};for(const r in e.definition.orbits){const i=e.definition.orbits[r],a=t[r];if(d(i.numOrientations,a))n[r]=a;else if(1===i.numOrientations){const e=new Array(i.numPieces);for(let t=0;t<i.numPieces;t++)e[a.permutation[t]]=t;n[r]={permutation:e,orientation:a.orientation}}else{const e=new Array(i.numPieces),t=new Array(i.numPieces);for(let n=0;n<i.numPieces;n++){const r=a.permutation[n];e[r]=n,t[r]=(i.numOrientations-a.orientation[n]+i.numOrientations)%i.numOrientations}n[r]={permutation:e,orientation:t}}}return n}function _(e,t,n){if(1===n)return t;if(n<0)return _(e,v(e,t),-n);if(0===n){const{transformationData:t}=e.identityTransformation();return t}let r=t;2!==n&&(r=_(e,t,Math.floor(n/2)));const i=o(e.definition,r,r);return n%2==0?i:o(e.definition,t,i)}l=new WeakMap;var w,g,x=new class extends r.TraversalDownUp{traverseAlg(e,t){let n=null;for(const r of e.units())n=n?n.applyTransformation(this.traverseUnit(r,t)):this.traverseUnit(r,t);return n??t.identityTransformation()}traverseGrouping(e,t){const n=this.traverseAlg(e.alg,t);return new h(t,_(t,n.transformationData,e.amount))}traverseMove(e,t){return t.moveToTransformation(e)}traverseCommutator(e,t){const n=this.traverseAlg(e.A,t),r=this.traverseAlg(e.B,t);return n.applyTransformation(r).applyTransformation(n.invert()).applyTransformation(r.invert())}traverseConjugate(e,t){const n=this.traverseAlg(e.A,t),r=this.traverseAlg(e.B,t);return n.applyTransformation(r).applyTransformation(n.invert())}traversePause(e,t){return t.identityTransformation()}traverseNewline(e,t){return t.identityTransformation()}traverseLineComment(e,t){return t.identityTransformation()}},y=x.traverseAlg.bind(x);function S(e,t){return t?S(t,e%t):e}var E=class{constructor(e,t){this.definition=e,a.__privateAdd(this,w,new Map),a.__privateAdd(this,g,void 0),this.experimentalPGNotation=t?.experimentalPGNotation}name(){return this.definition.name}identityTransformation(){return h.experimentalConstructIdentity(this)}moveToTransformation(e){"string"==typeof e&&(e=new r.Move(e));const t=e.toString(),n=a.__privateGet(this,w).get(t);if(n)return new h(this,n);if(this.experimentalPGNotation){const n=this.experimentalPGNotation.lookupMove(e);if(!n)throw new Error(`could not map to internal move: ${e}`);return a.__privateGet(this,w).set(t,n),new h(this,n)}const i=function(e,t){const n=t.quantum.toString();let r=e.definition.moves[n];if(!r){const t=e.definition.experimentalDerivedMoves?.[n];t&&(r=e.algToTransformation(t).transformationData)}if(r)return _(e,r,t.amount);const i=e.definition.moves[t.toString()];if(i)return i;const a=e.definition.moves[t.invert().toString()];if(a)return _(e,a,-1);throw new Error(`Invalid move for KPuzzle (${e.name()}): ${t}`)}(this,e);return a.__privateGet(this,w).set(t,i),new h(this,i)}algToTransformation(e){return"string"==typeof e&&(e=new r.Alg(e)),y(e,this)}toTransformation(e){return"string"==typeof e||e?.is?.(r.Alg)?this.algToTransformation(e):e?.is?.(r.Move)?this.moveToTransformation(e):e}startState(){return new m(this,this.definition.startStateData)}canConvertStateToUniqueTransformation(){return a.__privateGet(this,g)??a.__privateSet(this,g,(()=>{for(const[e,t]of Object.entries(this.definition.orbits)){const n=new Array(t.numPieces).fill(!1);for(const t of this.definition.startStateData[e].pieces)n[t]=!0;for(const e of n)if(!e)return!1}return!0})())}get state(){throw new Error("KPuzzle is now a different (stateless) class.")}reset(){throw new Error("KPuzzle is now a different (stateless) class.")}applyMove(e){throw new Error("KPuzzle is now a different class. Try `.moveToTransformation()` to get the transformation for a move.")}applyAlg(e){throw new Error("KPuzzle is now a different class. Try `.algToTransformation()` to get the transformation for an alg.")}};w=new WeakMap,g=new WeakMap;var z={name:"3x3x3",orbits:{EDGES:{numPieces:12,numOrientations:2},CORNERS:{numPieces:8,numOrientations:3},CENTERS:{numPieces:6,numOrientations:4}},startStateData:{EDGES:{pieces:[0,1,2,3,4,5,6,7,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{pieces:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{pieces:[0,1,2,3,4,5],orientation:[0,0,0,0,0,0]}},moves:{U:{EDGES:{permutation:[1,2,3,0,4,5,6,7,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[1,0,0,0,0,0]}},y:{EDGES:{permutation:[1,2,3,0,5,6,7,4,10,8,11,9],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,7,4,5,6],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientation:[1,0,0,0,0,3]}},x:{EDGES:{permutation:[4,8,0,9,6,10,2,11,5,7,1,3],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,3,5,7,6,2,1],orientation:[2,1,2,1,1,2,1,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientation:[0,3,0,1,2,2]}},L:{EDGES:{permutation:[0,1,2,11,4,5,6,9,8,3,10,7],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientation:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,1,0,0,0,0]}},F:{EDGES:{permutation:[9,1,2,3,8,5,6,7,0,4,10,11],orientation:[1,0,0,0,1,0,0,0,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientation:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,0,1,0,0,0]}},R:{EDGES:{permutation:[0,8,2,3,4,10,6,7,5,9,1,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientation:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,0,0,1,0,0]}},B:{EDGES:{permutation:[0,1,10,3,4,5,11,7,8,9,6,2],orientation:[0,0,1,0,0,0,1,0,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientation:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,0,0,0,1,0]}},D:{EDGES:{permutation:[0,1,2,3,7,4,5,6,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientation:[0,0,0,0,0,1]}},z:{EDGES:{permutation:[9,3,11,7,8,1,10,5,0,4,2,6],orientation:[1,1,1,1,1,1,1,1,1,1,1,1]},CORNERS:{permutation:[3,2,6,5,0,4,7,1],orientation:[1,2,1,2,2,1,2,1]},CENTERS:{permutation:[1,5,2,0,4,3],orientation:[1,1,1,1,3,1]}},M:{EDGES:{permutation:[2,1,6,3,0,5,4,7,8,9,10,11],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientation:[2,0,0,0,2,0]}},E:{EDGES:{permutation:[0,1,2,3,4,5,6,7,9,11,8,10],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientation:[0,0,0,0,0,0]}},S:{EDGES:{permutation:[0,3,2,7,4,1,6,5,8,9,10,11],orientation:[0,1,0,1,0,1,0,1,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientation:[1,1,0,1,0,1]}},u:{EDGES:{permutation:[1,2,3,0,4,5,6,7,10,8,11,9],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientation:[1,0,0,0,0,0]}},l:{EDGES:{permutation:[2,1,6,11,0,5,4,9,8,3,10,7],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientation:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientation:[2,1,0,0,2,0]}},f:{EDGES:{permutation:[9,3,2,7,8,1,6,5,0,4,10,11],orientation:[1,1,0,1,1,1,0,1,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientation:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientation:[1,1,1,1,0,1]}},r:{EDGES:{permutation:[4,8,0,3,6,10,2,7,5,9,1,11],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientation:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientation:[0,0,0,1,2,2]}},b:{EDGES:{permutation:[0,5,10,1,4,7,11,3,8,9,6,2],orientation:[0,1,1,1,0,1,1,1,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientation:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[3,0,2,5,4,1],orientation:[3,3,0,3,1,3]}},d:{EDGES:{permutation:[0,1,2,3,7,4,5,6,9,11,8,10],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientation:[0,0,0,0,0,1]}}}};z.moves.Uw=z.moves.u,z.moves.Lw=z.moves.l,z.moves.Fw=z.moves.f,z.moves.Rw=z.moves.r,z.moves.Bw=z.moves.b,z.moves.Dw=z.moves.d,z.moves.Rv=z.moves.x,z.moves.Uv=z.moves.y,z.moves.Fv=z.moves.z,z.moves.Lv={EDGES:{permutation:[2,10,6,11,0,8,4,9,1,3,5,7],orientation:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[1,7,6,2,0,3,5,4],orientation:[2,1,2,1,1,2,1,2]},CENTERS:{permutation:[4,1,0,3,5,2],orientation:[2,1,0,3,2,0]}},z.moves.Dv={EDGES:{permutation:[3,0,1,2,7,4,5,6,9,11,8,10],orientation:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[3,0,1,2,5,6,7,4],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientation:[3,0,0,0,0,1]}},z.moves.Bv={EDGES:{permutation:[8,5,10,1,9,7,11,3,4,0,6,2],orientation:[1,1,1,1,1,1,1,1,1,1,1,1]},CORNERS:{permutation:[4,7,1,0,5,3,2,6],orientation:[1,2,1,2,2,1,2,1]},CENTERS:{permutation:[3,0,2,5,4,1],orientation:[3,3,3,3,1,3]}};var k=new E(z)})),i.register("98KNc",(function(t,n){e(t.exports,"IterationDirection",(()=>r)),e(t.exports,"direct",(()=>p)),e(t.exports,"directedGenerator",(()=>l)),e(t.exports,"AlgBuilder",(()=>f)),e(t.exports,"Alg",(()=>fe)),e(t.exports,"Conjugate",(()=>S)),e(t.exports,"Move",(()=>V)),e(t.exports,"QuantumMove",(()=>$)),e(t.exports,"Grouping",(()=>X)),e(t.exports,"TraversalDownUp",(()=>ae)),e(t.exports,"TraversalUp",(()=>oe)),e(t.exports,"experimentalAppendMove",(()=>_e));var r,a,o=i("cks0r"),s=class{is(e){return this instanceof e}as(e){return this instanceof e?this:null}},u=class extends s{constructor(){super()}get log(){return console.log.bind(console,this,this.toString())}};function p(e,t){return-1===t?Array.from(e).reverse():e}function*l(e,t){-1===t?yield*function*(e){for(const t of Array.from(e).reverse())yield t}(e):yield*e}(a=r||(r={}))[a.Forwards=1]="Forwards",a[a.Backwards=-1]="Backwards";var m,c,h,d=2147483647,f=class{constructor(){o.__privateAdd(this,m,[])}push(e){o.__privateGet(this,m).push(e)}experimentalPushAlg(e){for(const t of e.units())this.push(t)}experimentalNumUnits(){return o.__privateGet(this,m).length}toAlg(){return new fe(o.__privateGet(this,m))}reset(){o.__privateSet(this,m,[])}};m=new WeakMap;var v,_,w=class extends u{constructor(e,t){super(),o.__privateAdd(this,c,void 0),o.__privateAdd(this,h,void 0),o.__privateSet(this,c,he(e)),o.__privateSet(this,h,he(t))}get A(){return o.__privateGet(this,c)}get B(){return o.__privateGet(this,h)}isIdentical(e){const t=e.as(w);return!(!t?.A.isIdentical(this.A)||!t?.B.isIdentical(this.B))}invert(){return new w(o.__privateGet(this,h),o.__privateGet(this,c))}*experimentalExpand(e=r.Forwards,t){t??(t=1/0),0===t?yield e===r.Forwards?this:this.invert():e===r.Forwards?(yield*this.A.experimentalExpand(r.Forwards,t-1),yield*this.B.experimentalExpand(r.Forwards,t-1),yield*this.A.experimentalExpand(r.Backwards,t-1),yield*this.B.experimentalExpand(r.Backwards,t-1)):(yield*this.B.experimentalExpand(r.Forwards,t-1),yield*this.A.experimentalExpand(r.Forwards,t-1),yield*this.B.experimentalExpand(r.Backwards,t-1),yield*this.A.experimentalExpand(r.Backwards,t-1))}toString(){return`[${o.__privateGet(this,c).toString()}, ${o.__privateGet(this,h).toString()}]`}},g=w;c=new WeakMap,h=new WeakMap;var x,y=class extends u{constructor(e,t){super(),o.__privateAdd(this,v,void 0),o.__privateAdd(this,_,void 0),o.__privateSet(this,v,he(e)),o.__privateSet(this,_,he(t))}get A(){return o.__privateGet(this,v)}get B(){return o.__privateGet(this,_)}isIdentical(e){const t=e.as(y);return!(!t?.A.isIdentical(this.A)||!t?.B.isIdentical(this.B))}invert(){return new y(o.__privateGet(this,v),o.__privateGet(this,_).invert())}*experimentalExpand(e,t){t??(t=1/0),0===t?yield e===r.Forwards?this:this.invert():(yield*this.A.experimentalExpand(r.Forwards,t-1),yield*this.B.experimentalExpand(e,t-1),yield*this.A.experimentalExpand(r.Backwards,t-1))}toString(){return`[${this.A}: ${this.B}]`}},S=y;v=new WeakMap,_=new WeakMap;var E=class extends u{constructor(e){if(super(),o.__privateAdd(this,x,void 0),e.includes("\n")||e.includes("\r"))throw new Error("LineComment cannot contain newline");o.__privateSet(this,x,e)}get text(){return o.__privateGet(this,x)}isIdentical(e){const t=e;return e.is(E)&&o.__privateGet(this,x)===o.__privateGet(t,x)}invert(){return this}*experimentalExpand(e=r.Forwards,t=1/0){yield this}toString(){return`//${o.__privateGet(this,x)}`}},z=E;x=new WeakMap;var k=class extends u{toString(){return"\n"}isIdentical(e){return e.is(k)}invert(){return this}*experimentalExpand(e=r.Forwards,t=1/0){yield this}},b=class extends u{toString(){return"."}isIdentical(e){return e.is(b)}invert(){return this}*experimentalExpand(e=r.Forwards,t=1/0){yield this}};function G(e,t){return e?parseInt(e):t}var R,N,A=/^(\d+)?('?)/,D=/^[_\dA-Za-z]/,C=/^((([1-9]\d*)-)?([1-9]\d*))?([_A-Za-z]+)?/,P=/^[^\n]*/,I=/^(-?\d+), ?/,L=/^(-?\d+)\)/;function T(e){return(new M).parseAlg(e)}function O(e,t,n){const r=e;return r.startCharIndex=t,r.endCharIndex=n,r}var M=class{constructor(){o.__privateAdd(this,R,""),o.__privateAdd(this,N,0)}parseAlg(e){o.__privateSet(this,R,e),o.__privateSet(this,N,0);const t=this.parseAlgWithStopping([]);return this.mustBeAtEndOfInput(),t}parseMove(e){o.__privateSet(this,R,e),o.__privateSet(this,N,0);const t=this.parseMoveImpl();return this.mustBeAtEndOfInput(),t}parseQuantumMove(e){o.__privateSet(this,R,e),o.__privateSet(this,N,0);const t=this.parseQuantumMoveImpl();return this.mustBeAtEndOfInput(),t}mustBeAtEndOfInput(){if(o.__privateGet(this,N)!==o.__privateGet(this,R).length)throw new Error("parsing unexpectedly ended early")}parseAlgWithStopping(e){let t=o.__privateGet(this,N),n=o.__privateGet(this,N);const r=new f;let i=!1;const a=e=>{if(i)throw new Error(`Unexpected character at index ${e}. Are you missing a space?`)};e:for(;o.__privateGet(this,N)<o.__privateGet(this,R).length;){const s=o.__privateGet(this,N);if(e.includes(o.__privateGet(this,R)[o.__privateGet(this,N)]))return O(r.toAlg(),t,n);if(this.tryConsumeNext(" "))i=!1,0===r.experimentalNumUnits()&&(t=o.__privateGet(this,N));else if(D.test(o.__privateGet(this,R)[o.__privateGet(this,N)])){a(s);const e=this.parseMoveImpl();r.push(e),i=!0,n=o.__privateGet(this,N)}else{if(this.tryConsumeNext("(")){a(s);const e=this.tryRegex(I);if(e){const t=e[1],a=o.__privateGet(this,N),u=this.parseRegex(L),p=O(new V(new $("U_SQ_"),parseInt(t)),s+1,s+1+t.length),l=O(new V(new $("D_SQ_"),parseInt(u[1])),a,o.__privateGet(this,N)-1),m=O(new fe([p,l]),s+1,o.__privateGet(this,N)-1);r.push(O(new X(m),s,o.__privateGet(this,N))),i=!0,n=o.__privateGet(this,N);continue e}{const e=this.parseAlgWithStopping([")"]);this.mustConsumeNext(")");const t=this.parseAmount();r.push(O(new X(e,t),s,o.__privateGet(this,N))),i=!0,n=o.__privateGet(this,N);continue e}}if(!this.tryConsumeNext("[")){if(this.tryConsumeNext("\n")){r.push(O(new k,s,o.__privateGet(this,N))),i=!1,n=o.__privateGet(this,N);continue e}if(this.tryConsumeNext("/")){if(this.tryConsumeNext("/")){a(s);const[e]=this.parseRegex(P);r.push(O(new z(e),s,o.__privateGet(this,N))),i=!1,n=o.__privateGet(this,N);continue e}r.push(O(new V("_SLASH_"),s,o.__privateGet(this,N))),i=!0,n=o.__privateGet(this,N);continue e}if(this.tryConsumeNext(".")){a(s),r.push(O(new b,s,o.__privateGet(this,N))),i=!0,n=o.__privateGet(this,N);continue e}throw new Error(`Unexpected character: ${this.popNext()}`)}{a(s);const e=this.parseAlgWithStopping([",",":"]),t=this.popNext(),u=this.parseAlgWithStopping(["]"]);switch(this.mustConsumeNext("]"),t){case":":r.push(O(new S(e,u),s,o.__privateGet(this,N))),i=!0,n=o.__privateGet(this,N);continue e;case",":r.push(O(new g(e,u),s,o.__privateGet(this,N))),i=!0,n=o.__privateGet(this,N);continue e;default:throw"unexpected parsing error"}}}}if(o.__privateGet(this,N)!==o.__privateGet(this,R).length)throw new Error("did not finish parsing?");if(e.length>0)throw new Error("expected stopping");return O(r.toAlg(),t,n)}parseQuantumMoveImpl(){const[,,,e,t,n]=this.parseRegex(C);return new $(n,G(t,void 0),G(e,void 0))}parseMoveImpl(){const e=o.__privateGet(this,N);if(this.tryConsumeNext("/"))return O(new V("_SLASH_"),e,o.__privateGet(this,N));let t=this.parseQuantumMoveImpl(),[n,r]=this.parseAmountAndTrackEmptyAbsAmount();const i=this.parseMoveSuffix();if(i){if(n<0)throw new Error("uh-oh");if(("++"===i||"--"===i)&&1!==n)throw new Error("Pochmann ++ or -- moves cannot have an amount other than 1.");if(("++"===i||"--"===i)&&!r)throw new Error("Pochmann ++ or -- moves cannot have an amount written as a number.");if(("+"===i||"-"===i)&&r)throw new Error("Clock dial moves must have an amount written as a natural number followed by + or -.");i.startsWith("+")&&(t=t.modified({family:`${t.family}_${"+"===i?"PLUS":"PLUSPLUS"}_`})),i.startsWith("-")&&(t=t.modified({family:`${t.family}_${"-"===i?"PLUS":"PLUSPLUS"}_`}),n*=-1)}return O(new V(t,n),e,o.__privateGet(this,N))}parseMoveSuffix(){return this.tryConsumeNext("+")?this.tryConsumeNext("+")?"++":"+":this.tryConsumeNext("-")?this.tryConsumeNext("-")?"--":"-":null}parseAmountAndTrackEmptyAbsAmount(){const e=o.__privateGet(this,N),[,t,n]=this.parseRegex(A);if(t?.startsWith("0")&&"0"!==t)throw new Error(`Error at char index ${e}: An amount can only start with 0 if it's exactly the digit 0.`);return[G(t,1)*("'"===n?-1:1),!t]}parseAmount(){const e=o.__privateGet(this,N),[,t,n]=this.parseRegex(A);if(t?.startsWith("0")&&"0"!==t)throw new Error(`Error at char index ${e}: An amount number can only start with 0 if it's exactly the digit 0.`);return G(t,1)*("'"===n?-1:1)}parseRegex(e){const t=e.exec(this.remaining());if(null===t)throw new Error("internal parsing error");return o.__privateSet(this,N,o.__privateGet(this,N)+t[0].length),t}tryRegex(e){const t=e.exec(this.remaining());return null===t?null:(o.__privateSet(this,N,o.__privateGet(this,N)+t[0].length),t)}remaining(){return o.__privateGet(this,R).slice(o.__privateGet(this,N))}popNext(){const e=o.__privateGet(this,R)[o.__privateGet(this,N)];return o.__privateWrapper(this,N)._++,e}tryConsumeNext(e){return o.__privateGet(this,R)[o.__privateGet(this,N)]===e&&(o.__privateWrapper(this,N)._++,!0)}mustConsumeNext(e){const t=this.popNext();if(t!==e)throw new Error(`expected \`${e}\` while parsing, encountered ${t}`);return t}};R=new WeakMap,N=new WeakMap;var U=new Set;function B(e){U.has(e)||(console.warn(e),U.add(e))}var F,q,W,j,H=class{constructor(e,t=1){if(this.quantum=e,this.amount=t,!Number.isInteger(this.amount)||this.amount<-2147483648||this.amount>d)throw new Error("Unit amount absolute value must be a non-negative integer from 2^31 - 1 to 2^31 - 1.")}suffix(){let e="";const t=Math.abs(this.amount);return 1!==t&&(e+=t),this.amount<0&&(e+="'"),e}isIdentical(e){return this.quantum.isIdentical(e.quantum)&&this.amount===e.amount}*experimentalExpand(e,t){const n=Math.abs(this.amount),r=function(e,t=!0){if(!t)return e;switch(e){case 1:return-1;case-1:return 1}}(e,this.amount<0);for(let e=0;e<n;e++)yield*this.quantum.experimentalExpand(r,t)}},K=class extends s{constructor(e,t,n){if(super(),o.__privateAdd(this,F,void 0),o.__privateAdd(this,q,void 0),o.__privateAdd(this,W,void 0),o.__privateSet(this,F,e),o.__privateSet(this,q,t??null),o.__privateSet(this,W,n??null),Object.freeze(this),null!==o.__privateGet(this,q)&&(!Number.isInteger(o.__privateGet(this,q))||o.__privateGet(this,q)<1||o.__privateGet(this,q)>d))throw new Error("QuantumMove inner layer must be a positive integer below 2^31 - 1.");if(null!==o.__privateGet(this,W)&&(!Number.isInteger(o.__privateGet(this,W))||o.__privateGet(this,W)<1||o.__privateGet(this,W)>d))throw new Error("QuantumMove outer layer must be a positive integer below 2^31 - 1.");if(null!==o.__privateGet(this,W)&&null!==o.__privateGet(this,q)&&o.__privateGet(this,q)<=o.__privateGet(this,W))throw new Error("QuantumMove outer layer must be smaller than inner layer.");if(null!==o.__privateGet(this,W)&&null===o.__privateGet(this,q))throw new Error("QuantumMove with an outer layer must have an inner layer")}static fromString(e){return function(e){return(new M).parseQuantumMove(e)}(e)}modified(e){return new K(e.family??o.__privateGet(this,F),e.innerLayer??o.__privateGet(this,q),e.outerLayer??o.__privateGet(this,W))}isIdentical(e){const t=e;return e.is(K)&&o.__privateGet(this,F)===o.__privateGet(t,F)&&o.__privateGet(this,q)===o.__privateGet(t,q)&&o.__privateGet(this,W)===o.__privateGet(t,W)}get family(){return o.__privateGet(this,F)}get outerLayer(){return o.__privateGet(this,W)}get innerLayer(){return o.__privateGet(this,q)}experimentalExpand(){throw new Error("experimentalExpand() cannot be called on a `QuantumMove` directly.")}toString(){let e=o.__privateGet(this,F);return null!==o.__privateGet(this,q)&&(e=String(o.__privateGet(this,q))+e,null!==o.__privateGet(this,W)&&(e=String(o.__privateGet(this,W))+"-"+e)),e}},$=K;F=new WeakMap,q=new WeakMap,W=new WeakMap;var Q=class extends u{constructor(...e){if(super(),o.__privateAdd(this,j,void 0),"string"==typeof e[0])return e[1]?void o.__privateSet(this,j,new H($.fromString(e[0]),e[1])):Q.fromString(e[0]);o.__privateSet(this,j,new H(e[0],e[1]))}isIdentical(e){const t=e.as(Q);return!!t&&o.__privateGet(this,j).isIdentical(o.__privateGet(t,j))}invert(){return e=this,t=new Q(o.__privateGet(this,j).quantum,-this.amount),"startCharIndex"in e&&(t.startCharIndex=e.startCharIndex),"endCharIndex"in e&&(t.endCharIndex=e.endCharIndex),t;var e,t}*experimentalExpand(e=r.Forwards){e===r.Forwards?yield this:yield this.modified({amount:-this.amount})}get quantum(){return o.__privateGet(this,j).quantum}modified(e){return new Q(o.__privateGet(this,j).quantum.modified(e),e.amount??this.amount)}static fromString(e){return function(e){return(new M).parseMove(e)}(e)}get amount(){return o.__privateGet(this,j).amount}get type(){return B("deprecated: type"),"blockMove"}get family(){return o.__privateGet(this,j).quantum.family??void 0}get outerLayer(){return o.__privateGet(this,j).quantum.outerLayer??void 0}get innerLayer(){return o.__privateGet(this,j).quantum.innerLayer??void 0}toString(){if("_SLASH_"===this.family)return"/";if(this.family.endsWith("_PLUS_"))return o.__privateGet(this,j).quantum.toString().slice(0,-6)+Math.abs(this.amount)+(this.amount<0?"-":"+");if(this.family.endsWith("_PLUSPLUS_")){const e=Math.abs(this.amount);return o.__privateGet(this,j).quantum.toString().slice(0,-10)+(1===e?"":e)+(this.amount<0?"--":"++")}return o.__privateGet(this,j).quantum.toString()+o.__privateGet(this,j).suffix()}},V=Q;j=new WeakMap;var Y,J=new class{constructor(){this.quantumU_SQ_=null,this.quantumD_SQ_=null}format(e){const t=this.tuple(e);return t?`(${t.map((e=>e.amount)).join(", ")})`:null}tuple(e){this.quantumU_SQ_||(this.quantumU_SQ_=new $("U_SQ_")),this.quantumD_SQ_||(this.quantumD_SQ_=new $("D_SQ_"));const t=e.alg;if(2===t.experimentalNumUnits()){const[n,r]=t.units();if(n.as(V)?.quantum.isIdentical(this.quantumU_SQ_)&&r.as(V)?.quantum.isIdentical(this.quantumD_SQ_)){if(1!==e.amount)throw new Error("Square-1 tuples cannot have an amount other than 1.");return[n,r]}}return null}},Z=class extends u{constructor(e,t){super(),o.__privateAdd(this,Y,void 0);const n=he(e);o.__privateSet(this,Y,new H(n,t))}isIdentical(e){const t=e;return e.is(Z)&&o.__privateGet(this,Y).isIdentical(o.__privateGet(t,Y))}get alg(){return o.__privateGet(this,Y).quantum}get amount(){return o.__privateGet(this,Y).amount}get experimentalRepetitionSuffix(){return o.__privateGet(this,Y).suffix()}invert(){return new Z(o.__privateGet(this,Y).quantum,-o.__privateGet(this,Y).amount)}*experimentalExpand(e=r.Forwards,t){t??(t=1/0),0===t?yield e===r.Forwards?this:this.invert():yield*o.__privateGet(this,Y).experimentalExpand(e,t-1)}static fromString(){throw new Error("unimplemented")}toString(){return J.format(this)??`(${o.__privateGet(this,Y).quantum.toString()})${o.__privateGet(this,Y).suffix()}`}experimentalAsSquare1Tuple(){return J.tuple(this)}},X=Z;function ee(e,t){return e instanceof t}function te(e,t,n){if(t.is(X))return e.traverseGrouping(t,n);if(t.is(V))return e.traverseMove(t,n);if(t.is(g))return e.traverseCommutator(t,n);if(t.is(S))return e.traverseConjugate(t,n);if(t.is(b))return e.traversePause(t,n);if(t.is(k))return e.traverseNewline(t,n);if(t.is(z))return e.traverseLineComment(t,n);throw new Error("unknown unit")}function ne(e){if(e.is(X)||e.is(V)||e.is(g)||e.is(S)||e.is(b)||e.is(k)||e.is(z))return e;throw"internal error: expected unit"}Y=new WeakMap;var re,ie,ae=class{traverseUnit(e,t){return te(this,e,t)}traverseIntoUnit(e,t){return ne(this.traverseUnit(e,t))}},oe=class extends ae{traverseUnit(e){return te(this,e,void 0)}traverseIntoUnit(e){return ne(this.traverseUnit(e))}},se=class extends ae{*traverseAlg(e,t){if(0===t.depth)return void(yield*e.units());const n=[];let r=null;const i=t?.collapseMoves??!0;function a(e,i){var a;const s=o.__privateMethod(a=se,re,ie).call(a,e,i,t);if(0===s)return!1;const u=new V(e.quantum,s);return n.push(u),r=u,!0}const s={depth:t.depth?t.depth-1:null};for(const t of e.units())for(const e of this.traverseUnit(t,s))u=e,i&&r?.is(V)&&u.is(V)&&r.quantum.isIdentical(u.quantum)?(n.pop(),a(r,u.amount)||(r=n.slice(-1)[0])):u.is(V)?a(u,0):(n.push(u),r=u);var u;for(const e of n)yield e}*traverseGrouping(e,t){if(0===t.depth)return void(yield e);const n={depth:t.depth?t.depth-1:null};yield new X(this.traverseAlg(e.alg,n))}*traverseMove(e,t){yield e}*traverseCommutator(e,t){if(0===t.depth)return void(yield e);const n={depth:t.depth?t.depth-1:null};yield new g(this.traverseAlg(e.A,n),this.traverseAlg(e.B,n))}*traverseConjugate(e,t){if(0===t.depth)return void(yield e);const n={depth:t.depth?t.depth-1:null};yield new S(this.traverseAlg(e.A,n),this.traverseAlg(e.B,n))}*traversePause(e,t){yield e}*traverseNewline(e,t){yield e}*traverseLineComment(e,t){yield e}},ue=se;re=new WeakSet,ie=function(e,t,n){let r=e.amount+t;if(n?.quantumMoveOrder){const t=n.quantumMoveOrder(e.quantum),i=Math.floor(t/2)+1-t;r=(r%t+t-i)%t+i}return r},o.__privateAdd(ue,re);var pe,le=new ue,me=le.traverseAlg.bind(le);function ce(e){if(!e)return[];if(ee(e,fe))return e.units();if("string"==typeof e)return T(e).units();const t=e;if("function"==typeof t[Symbol.iterator])return t;throw"Invalid unit"}function he(e){return ee(e,fe)?e:new fe(e)}var de=class extends u{constructor(e){super(),o.__privateAdd(this,pe,void 0),o.__privateSet(this,pe,Array.from(ce(e)));for(const e of o.__privateGet(this,pe))if(!(ee(t=e,X)||ee(t,z)||ee(t,g)||ee(t,S)||ee(t,V)||ee(t,k)||ee(t,b)))throw new Error("An alg can only contain units.");var t}isIdentical(e){const t=e;if(!e.is(de))return!1;const n=Array.from(o.__privateGet(this,pe)),r=Array.from(o.__privateGet(t,pe));if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].isIdentical(r[e]))return!1;return!0}invert(){return new de((e=Array.from(o.__privateGet(this,pe)).map((e=>e.invert())),Array.from(e).reverse()));var e}*experimentalExpand(e=r.Forwards,t){t??(t=1/0);for(const n of p(o.__privateGet(this,pe),e))yield*n.experimentalExpand(e,t)}expand(e){return new de(this.experimentalExpand(r.Forwards,e?.depth??1/0))}*experimentalLeafMoves(){for(const e of this.experimentalExpand())e.is(V)&&(yield e)}concat(e){return new de(Array.from(o.__privateGet(this,pe)).concat(Array.from(ce(e))))}experimentalIsEmpty(){for(const e of o.__privateGet(this,pe))return!1;return!0}static fromString(e){return T(e)}*units(){for(const e of o.__privateGet(this,pe))yield e}experimentalNumUnits(){return Array.from(o.__privateGet(this,pe)).length}get type(){return B("deprecated: type"),"sequence"}toString(){let e="",t=null;for(const n of o.__privateGet(this,pe))t&&(e+=ve(t,n)),e+=n.toString(),t=n;return e}simplify(e){return new de(me(this,e??{}))}},fe=de;function ve(e,t){return e.is(k)||t.is(k)?"":e.is(z)&&!t.is(k)?"\n":" "}pe=new WeakMap;new fe([new V("R",1),new V("U",1),new V("R",-1),new V("U",1),new V("R",1),new V("U",-2),new V("R",-1)]),new fe([new V("R",1),new V("U",2),new V("R",-1),new V("U",-1),new V("R",1),new V("U",-1),new V("R",-1)]),new fe([new g(new fe([new V("R",1),new V("U",1),new V("R",-2)]),new fe([new S(new fe([new V("R",1)]),new fe([new V("U",1)]))]))]),new fe([new V("R",1),new V("U",-1),new V("L",-1),new V("U",1),new V("R",-1),new V("U",-1),new V("L",1),new V("U",1)]),new fe([new V("x",-1),new g(new fe([new S(new fe([new V("R",1)]),new fe([new V("U",-1)]))]),new fe([new V("D",1)])),new g(new fe([new S(new fe([new V("R",1)]),new fe([new V("U",1)]))]),new fe([new V("D",1)])),new V("x",1)]),new fe([new S(new fe([new V("F",1)]),new fe([new g(new fe([new V("U",1)]),new fe([new V("R",1)]))]))]),new fe([new S(new fe([new V("R",2)]),new fe([new g(new fe([new V("F",2)]),new fe([new V("R",-1),new V("B",-1),new V("R",1)]))]))]),new fe([new V("F",1),new V("U",1),new V("R",1),new V("U",-1),new V("R",-1),new V("F",-1)]),new fe([new V("R",1),new V("U",1),new V("R",-1),new V("U",-1),new V("R",-1),new V("F",1),new V("R",2),new V("U",-1),new V("R",-1),new V("U",-1),new V("R",1),new V("U",1),new V("R",-1),new V("F",-1)]),new fe([new S(new fe([new V("F",1)]),new fe([new X(new fe([new g(new fe([new V("R",1)]),new fe([new V("U",1)]))]),3)]))]),new fe([new b,new b,new b]),new V("R"),new V("R'"),new V("B"),new V("B'"),new V("D"),new V("D'"),new V("L"),new V("L'"),new V("U"),new V("U'"),new V("F"),new V("F'"),new V("x'"),new V("l"),new V("l'"),new V("r"),new V("r'"),new V("d"),new V("d'"),new V("x"),new V("x"),new V("x'"),new V("y"),new V("y"),new V("y'"),new V("z"),new V("z'"),new V("M'"),new V("M'");function _e(e,t,n){const r=Array.from(e.units()),i=r[r.length-1];if(n?.coalesce&&i&&i.quantum&&i.quantum.isIdentical(t.quantum)){const e=r.slice(0,r.length-1);let a=i.amount+t.amount;const o=n?.mod;return o&&(a=(a%o+o)%o,2*a>o&&(a-=o)),0!==a&&e.push(i.modified({amount:a})),new fe(e)}return new fe([...r,t])}})),i.register("cks0r",(function(t,n){e(t.exports,"__privateGet",(()=>i)),e(t.exports,"__privateAdd",(()=>a)),e(t.exports,"__privateSet",(()=>o)),e(t.exports,"__privateWrapper",(()=>s)),e(t.exports,"__privateMethod",(()=>u));var r=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},i=(e,t,n)=>(r(e,t,"read from private field"),n?n.call(e):t.get(e)),a=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},o=(e,t,n,i)=>(r(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),s=(e,t,n,r)=>({set _(r){o(e,t,r,n)},get _(){return i(e,t,r)}}),u=(e,t,n)=>(r(e,t,"access private method"),n)})),i.register("eSgSO",(function(e,t){e.exports=Promise.all([import("./"+i("27Lyk").resolve("hPxUV")),import("./"+i("27Lyk").resolve("gW5g5"))]).then((()=>i("ikk6p")))})),i.register("bu4Gb",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("iak3L")).then((()=>i("5EXOu")))})),i.register("k8a1w",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("3tHIy")).then((()=>i("9RkB3")))})),i.register("1wxIG",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("lfz5Q")).then((()=>i("9GPYv")))})),i.register("42PSz",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("4UNjE")).then((()=>i("oGs7p")))})),i.register("fPPtJ",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("91rD7")).then((()=>i("kMaxg")))})),i.register("7GPye",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("lMvhS")).then((()=>i("l8vvO")))})),i.register("6d7qw",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("dRtyN")).then((()=>i("jWUwg")))})),i.register("cJLAM",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("kziDj")).then((()=>i("Qa0PX")))})),i.register("gBfjV",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("1uf7V")).then((()=>i("5aOeo")))})),i.register("c22Wm",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("aGyuS")).then((()=>i("71hVm")))})),i.register("2AAUC",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("2tl92")).then((()=>i("exL2t")))})),i.register("k2OLi",(function(e,t){e.exports=import("./"+i("27Lyk").resolve("gyTEh")).then((()=>i("6PzdC")))})),i("5bFr4");
//# sourceMappingURL=index.b9099a78.js.map

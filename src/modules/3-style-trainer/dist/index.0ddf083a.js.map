{"mappings":"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AME,EAAuB,CAClC,CACE,OACA,OACA,QACA,UACA,QACA,IACA,OACA,OACA,OACA,QACA,KACA,SACA,MACA,KACA,KACA,MACA,QACA,OACA,KACA,UACA,GACA,WACA,IACA,SAEF,CACE,QACA,QACA,UACA,QACA,OACA,QACA,WACA,UACA,WACA,KACA,OACA,OACA,QACA,WACA,MACA,GACA,UACA,UACA,SACA,QACA,KACA,OACA,SACA,KAEF,CACE,YACA,aACA,YACA,aACA,UACA,UACA,aACA,aACA,WACA,WACA,WACA,SACA,eACA,gBACA,UACA,YACA,WACA,YACA,SACA,cACA,GACA,kBAEF,CACE,aACA,aACA,aACA,YACA,WACA,YACA,YACA,aACA,UACA,YACA,WACA,WACA,GACA,iBACA,WACA,SACA,SACA,cACA,UACA,WAEF,CACE,WACA,KACA,KACA,SACA,UACA,QACA,QACA,OACA,cACA,IACA,QACA,UACA,WACA,QACA,OACA,UACA,GACA,cAEF,CACE,eACA,aACA,aACA,aACA,UACA,YACA,WACA,YACA,aACA,aACA,WACA,SACA,YACA,UACA,UACA,GACA,eACA,gBACA,iBACA,YACA,UAEF,CACE,UACA,YACA,cACA,SACA,aACA,aACA,YACA,aACA,GACA,gBACA,eACA,YACA,aACA,UACA,gBACA,YAEF,CACE,KACA,YACA,OACA,UACA,GACA,WACA,KACA,SACA,QACA,aACA,IACA,YACA,QACA,WAEF,CACE,WACA,YACA,eACA,cACA,eACA,cACA,GACA,mBACA,iBACA,UACA,cACA,cACA,aACA,eACA,iBACA,WACA,eACA,gBAEF,CACE,SACA,iBACA,YACA,aACA,UACA,YACA,aACA,UACA,GACA,oBACA,aACA,cAEF,CACE,GACA,iBACA,SACA,YACA,YACA,UACA,UACA,UACA,UACA,UAEF,CACE,GACA,4BACA,4BACA,qBACA,qBACA,oBACA,oBACA,kBACA,mBACA,oBACA,oBACA,kBACA,mBACA,kBACA,mBAEF,CACE,KACA,iBACA,KACA,iBACA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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/cubing/src/cubing/search/inside/worker-guard.ts","node_modules/cubing/src/cubing/vendor/comlink-everywhere/node-adapter.ts","node_modules/cubing/src/cubing/vendor/random-uint-below/get-random-values.ts","node_modules/cubing/src/cubing/vendor/random-uint-below/random53BitValue.ts","node_modules/cubing/src/cubing/vendor/random-uint-below/random-choice.ts","node_modules/cubing/src/cubing/vendor/random-uint-below/index.ts","node_modules/comlink/src/comlink.ts","node_modules/@parcel/runtime-js/lib/runtime-d2deb8ef271a0962.js","node_modules/@parcel/runtime-js/lib/runtime-7fd5152786399030.js","node_modules/cubing/src/cubing/search/inside/inside-worker.ts","node_modules/cubing/src/cubing/search/inside/solve/addOrientationSuffix.ts","node_modules/cubing/src/cubing/search/inside/solve/puzzles/3x3x3/convert.ts","node_modules/cubing/src/cubing/search/inside/solve/puzzles/3x3x3/filter.ts","node_modules/cubing/src/cubing/search/inside/solve/puzzles/3x3x3/legacy-sgs.ts","node_modules/cubing/src/cubing/search/inside/solve/puzzles/3x3x3/index.ts","node_modules/@parcel/runtime-js/lib/runtime-f1c787adc074e93b.js","node_modules/cubing/src/cubing/notation/CountMoves.ts","node_modules/cubing/src/cubing/notation/CountAnimatedLeaves.ts","node_modules/@parcel/runtime-js/lib/runtime-95336ed10e06c134.js","node_modules/@parcel/runtime-js/lib/runtime-eda991061cad8409.js","src/Main.elm","node_modules/cubing/src/cubing/search/inside/solve/puzzles/clock.ts","node_modules/cubing/src/cubing/search/inside/solve/puzzles/wca-minx.ts","node_modules/cubing/src/cubing/vendor/comlink-everywhere/outside/index.ts","node_modules/cubing/src/cubing/search/inside/search-worker-ts-entry-path-getter.ts","node_modules/cubing/src/cubing/search/instantiator.ts","node_modules/cubing/src/cubing/search/outside.ts","node_modules/cubing/src/cubing/twisty/controllers/AnimationTypes.ts","node_modules/cubing/src/cubing/twisty/controllers/RenderScheduler.ts","node_modules/cubing/src/cubing/twisty/model/helpers.ts","node_modules/cubing/src/cubing/twisty/controllers/TwistyAnimationController.ts","node_modules/cubing/src/cubing/twisty/controllers/TwistyPlayerController.ts","node_modules/cubing/src/cubing/twisty/views/node-custom-element-shims.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/ControlPanelProp.ts","node_modules/cubing/src/cubing/twisty/views/ManagedCustomElement.ts","node_modules/cubing/src/cubing/twisty/views/TwistyViewerWrapper.css.ts","node_modules/cubing/src/cubing/twisty/views/2D/Twisty2DPuzzle.css.ts","node_modules/cubing/src/cubing/twisty/views/2D/KPuzzleSVGWrapper.ts","node_modules/cubing/src/cubing/twisty/views/2D/Twisty2DPuzzle.ts","node_modules/cubing/src/cubing/twisty/views/2D/Twisty2DPuzzleWrapper.ts","node_modules/cubing/src/cubing/twisty/views/2D/Twisty2DSceneWrapper.ts","node_modules/cubing/src/cubing/twisty/views/ClassListManager.ts","node_modules/cubing/src/cubing/twisty/views/3D/Twisty3DPuzzleWrapper.ts","node_modules/cubing/src/cubing/vendor/three/examples/jsm/libs/stats.modified.module.ts","node_modules/cubing/src/cubing/twisty/views/canvas.ts","node_modules/cubing/src/cubing/twisty/views/3D/Twisty3DVantage.css.ts","node_modules/cubing/src/cubing/twisty/views/3D/DragTracker.ts","node_modules/cubing/src/cubing/twisty/views/3D/RendererPool.ts","node_modules/cubing/src/cubing/twisty/views/3D/TwistyOrbitControls.ts","node_modules/cubing/src/cubing/twisty/views/3D/Twisty3DVantage.ts","node_modules/cubing/src/cubing/twisty/views/3D/Twisty3DSceneWrapper.ts","node_modules/cubing/src/cubing/twisty/views/control-panel/TwistyButtons.css.ts","node_modules/cubing/src/cubing/twisty/views/document.ts","node_modules/cubing/src/cubing/twisty/views/control-panel/webkit-fullscreen.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/ButtonAppearanceProp.ts","node_modules/cubing/src/cubing/twisty/views/control-panel/TwistyButtons.ts","node_modules/cubing/src/cubing/twisty/views/control-panel/TwistyScrubber.css.ts","node_modules/cubing/src/cubing/twisty/views/control-panel/TwistyScrubber.ts","node_modules/cubing/src/cubing/twisty/views/screenshot.ts","node_modules/cubing/src/cubing/twisty/views/TwistyPlayer.css.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/AlgProp.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/BackgroundProp.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/BackViewProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/IndexerConstructorRequestProp.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/LatitudeLimit.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/OrbitCoordinatesRequestProp.ts","node_modules/cubing/src/cubing/twisty/model/props/timeline/PlayingInfoProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/structure/PuzzleDescriptionProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/structure/PuzzleIDRequestProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/structure/PuzzleLoaderProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/SetupAnchorProp.ts","node_modules/cubing/src/cubing/twisty/model/props/timeline/TempoScaleProp.ts","node_modules/cubing/src/cubing/twisty/model/props/timeline/TimestampRequestProp.ts","node_modules/cubing/src/cubing/twisty/model/props/general/URLProp.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/ViewerLinkProp.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/VisualizationProp.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/OrbitCoordinatesProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/structure/PuzzleIDProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/display/SpriteProp.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/VisualizationStrategyProp.ts","node_modules/cubing/src/cubing/twisty/controllers/indexer/AlgDuration.ts","node_modules/cubing/src/cubing/twisty/controllers/indexer/simultaneous-moves/simul-moves.ts","node_modules/cubing/src/cubing/twisty/controllers/indexer/simultaneous-moves/SimultaneousMoveIndexer.ts","node_modules/cubing/src/cubing/twisty/controllers/indexer/tree/AlgWalker.ts","node_modules/cubing/src/cubing/twisty/controllers/indexer/tree/chunkAlgs.ts","node_modules/cubing/src/cubing/twisty/model/props/timeline/DetailedTimelineInfoProp.ts","node_modules/cubing/src/cubing/twisty/controllers/indexer/tree/TreeAlgIndexer.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/IndexerConstructorProp.ts","node_modules/cubing/src/cubing/twisty/controllers/indexer/SimpleAlgIndexer.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/PuzzleAlgProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/AlgTransformationProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/IndexerProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/AnchorTransformationProp.ts","node_modules/cubing/src/cubing/twisty/model/props/viewer/TimeRangeProp.ts","node_modules/cubing/src/cubing/twisty/model/props/timeline/CoarseTimelineInfoProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/CurrentMoveInfoProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/CurrentLeavesSimplified.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/CurrentStateProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/LegacyPositionProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/structure/KPuzzleProp.ts","node_modules/cubing/src/cubing/twisty/model/UserVisibleErrorTracker.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/CatchUpMoveProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/NaiveMoveCountProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/MovePressInputProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/display/FoundationDisplayProp.ts","node_modules/cubing/src/cubing/twisty/model/props/puzzle/state/SetupTransformationProp.ts","node_modules/cubing/src/cubing/twisty/model/props/general/ArbitraryStringProp.ts","node_modules/cubing/src/cubing/twisty/views/TwistyPlayerSettable.ts","node_modules/cubing/src/cubing/twisty/views/TwistyPlayer.ts","node_modules/cubing/src/cubing/twisty/model/TwistyPlayerModel.ts","node_modules/cubing/src/cubing/twisty/views/TwistyAlgViewer.css.ts","node_modules/cubing/src/cubing/twisty/views/TwistyAlgViewer.ts","node_modules/cubing/src/cubing/twisty/views/TwistyAlgEditor/LeafTokens.ts","node_modules/cubing/src/cubing/twisty/views/TwistyAlgEditor/TwistyAlgEditor.ts","node_modules/cubing/src/cubing/twisty/views/TwistyAlgEditor/model.ts","node_modules/cubing/src/cubing/twisty/views/TwistyAlgEditor/TwistyAlgEditor.css.ts","node_modules/cubing/src/cubing/twisty/views/twizzle/TwizzleLink.css.ts","node_modules/cubing/src/cubing/twisty/views/twizzle/url-params.ts","node_modules/cubing/src/cubing/twisty/views/twizzle/TwizzleLink.ts","3-Style/3STYLE.json","src/index.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","export const exposeAPI: { expose: boolean } = {\n  expose: true,\n};\n","import type { Worker as NodeWorker } from \"worker_threads\";\n\n/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\ntype EventHandler = EventListenerObject | ((event: any) => void);\n\nfunction nodeEndpoint(nep: NodeWorker): Worker & {\n  nodeWorker?: import(\"worker_threads\").Worker;\n} {\n  const listeners = new WeakMap();\n  return {\n    postMessage: nep.postMessage.bind(nep),\n    addEventListener: (_: string, eh: EventHandler) => {\n      const l = (data: Event) => {\n        if (\"handleEvent\" in eh) {\n          eh.handleEvent({ data } as any);\n        } else {\n          eh({ data });\n        }\n      };\n      nep.on(\"message\", l);\n      listeners.set(eh, l);\n    },\n    removeEventListener: (_: string, eh: EventHandler) => {\n      const l = listeners.get(eh);\n      if (!l) {\n        return;\n      }\n      nep.off(\"message\", l);\n      listeners.delete(eh);\n    },\n    nodeWorker: nep,\n    // start: nep.start && nep.start.bind(nep),\n  } as Worker & {\n    nodeWorker?: import(\"worker_threads\").Worker;\n  };\n}\n\nexport default nodeEndpoint;\n//# sourceMappingURL=node-adapter.mjs.map\n","export type GetRandomValuesFunction = (arr: Uint32Array) => void;\n\n// This is a workaround for a `node` segfault.\n// In theory, imports are cached and safe to import multiple times: https://nodejs.org/api/esm.html#esm_urls\n// In practice, a rapid series of inline imports inside a worker causes a segfault(!) in `node`.\n// So we cache a single import reference. We avoid populating it until we first need it, so that we don't attempt to perform the import in environments that don't need or have it (e.g. browsers, `deno`).\nlet cryptoPromise: Promise<typeof import(\"crypto\")> | null = null;\n\n// `@types/node` is... lacking. This type may cause an error in the future, at which point we can hopefully use `@types/node` directly.\ntype NodeWebCrypto = typeof import(\"crypto\").webcrypto & {\n  getRandomValues: GetRandomValuesFunction;\n};\n\n// Mangled so that bundlers don't try to inline the source.\nconst cryptoMangled = \"cr-yp-to\";\nconst cryptoUnmangled = () => cryptoMangled.replace(/-/g, \"\");\n\n// We could use top-level await to define this more statically, but that has limited transpilation support.\nexport async function getRandomValuesFactory(): Promise<GetRandomValuesFunction> {\n  if (!globalThis?.crypto?.getRandomValues) {\n    const nodeWebcrypto = (await (cryptoPromise ??= import(cryptoUnmangled())))\n      .webcrypto as NodeWebCrypto;\n    return nodeWebcrypto.getRandomValues;\n  } else {\n    return crypto.getRandomValues.bind(crypto) as GetRandomValuesFunction;\n  }\n}\n","import {\n  getRandomValuesFactory,\n  GetRandomValuesFunction,\n} from \"./get-random-values\";\n\n/*\n * randomInt.below(max) returns a random non-negative integer less than max (0 <= output < max).\n * `max` must be at most 2^53.\n */\n\nconst MAX_JS_PRECISE_INT = 9007199254740992;\n\nconst UPPER_HALF_MULTIPLIER = 2097152; // 2^21. We have to use multiplication because bit shifts truncate to 32 bits.\nconst LOWER_HALF_DIVIDER = 2048;\n\nfunction random53BitValue(getRandomValues: GetRandomValuesFunction): number {\n  // Construct a random 53-bit value from a 32-bit upper half and a 21-bit lower half.\n  const arr = new Uint32Array(2);\n  getRandomValues(arr);\n  const upper = arr[0];\n  const lower = arr[1];\n  return (\n    Math.floor(upper * UPPER_HALF_MULTIPLIER) +\n    Math.floor(lower / LOWER_HALF_DIVIDER)\n  );\n}\n\nfunction validateMax(max: number): void {\n  if (typeof max !== \"number\" || max < 0 || Math.floor(max) !== max) {\n    throw new Error(\n      \"randomInt.below() not called with a positive integer value.\",\n    );\n  }\n  if (max > MAX_JS_PRECISE_INT) {\n    throw new Error(\n      `Called randomInt.below() with max == ${max}, which is larger than JavaScript can handle with integer precision.`,\n    );\n  }\n}\n\n// TODO: cache generated `randomUIntBelow`?\nexport async function randomUIntBelowFactory(): Promise<\n  (max: number) => number\n> {\n  const getRandomValues = await getRandomValuesFactory();\n  const randomUIntBelow = (max: number): number => {\n    validateMax(max);\n\n    const val = random53BitValue(getRandomValues);\n    const maxUniformSamplingRange = Math.floor(MAX_JS_PRECISE_INT / max) * max;\n\n    // Rejection sampling:\n    if (val < maxUniformSamplingRange) {\n      return val % max;\n    } else {\n      // val % max would produce a biased result. This bias an be very bad if `max` is on the order of MAX_JS_PRECISE_INT. We have to try again, so just call ourselves recursively.\n      // For some values of `max` just above 9007199254740992 / 2, this happens about once on average. For other values of `max`, it's less than that (and for small values of `max` it's extremely unlikely).\n\n      // TODO: Use more bits of accuracy instead of rejection sampling to avoid DoS.\n      return randomUIntBelow(max);\n    }\n  };\n  return randomUIntBelow;\n}\n","import { randomUIntBelowFactory } from \"./random53BitValue\";\n\n// Inspired by https://reference.wolfram.com/language/ref/RandomChoice.html\n// This library itself should be kept small, but a wrapper library may want to implement selecting multiple element without replacement as with replacement:\n// https://reference.wolfram.com/language/ref/RandomSample.html\nexport async function randomChoiceFactory<T>(): Promise<(arr: Array<T>) => T> {\n  const randomUIntBelow = await randomUIntBelowFactory();\n  return (arr: Array<T>): T => arr[randomUIntBelow(arr.length)];\n}\n","export { randomChoiceFactory } from \"./random-choice\";\nexport { randomUIntBelowFactory } from \"./random53BitValue\";\n\n// TODO: reuse factory properly, move this to a separate file, add to impl.\nimport { randomUIntBelowFactory } from \"./random53BitValue\";\nconst randomUIntBelowPromise = randomUIntBelowFactory();\nexport async function randomPermute<T>(list: T[]): Promise<void> {\n  for (let i = 1; i < list.length; i++) {\n    const j = (await randomUIntBelowPromise)(i);\n    [list[i], list[j]] = [list[j], list[i]];\n  }\n}\n","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  EventSource,\n  Message,\n  MessageType,\n  PostMessageWithOrigin,\n  WireValue,\n  WireValueType,\n} from \"./protocol\";\nexport { Endpoint };\n\nexport const proxyMarker = Symbol(\"Comlink.proxy\");\nexport const createEndpoint = Symbol(\"Comlink.endpoint\");\nexport const releaseProxy = Symbol(\"Comlink.releaseProxy\");\n\nconst throwMarker = Symbol(\"Comlink.thrown\");\n\n/**\n * Interface of values that were marked to be proxied with `comlink.proxy()`.\n * Can also be implemented by classes.\n */\nexport interface ProxyMarked {\n  [proxyMarker]: true;\n}\n\n/**\n * Takes a type and wraps it in a Promise, if it not already is one.\n * This is to avoid `Promise<Promise<T>>`.\n *\n * This is the inverse of `Unpromisify<T>`.\n */\ntype Promisify<T> = T extends Promise<unknown> ? T : Promise<T>;\n/**\n * Takes a type that may be Promise and unwraps the Promise type.\n * If `P` is not a Promise, it returns `P`.\n *\n * This is the inverse of `Promisify<T>`.\n */\ntype Unpromisify<P> = P extends Promise<infer T> ? T : P;\n\n/**\n * Takes the raw type of a remote property and returns the type that is visible to the local thread on the proxy.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions.\n * See https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype RemoteProperty<T> =\n  // If the value is a method, comlink will proxy it automatically.\n  // Objects are only proxied if they are marked to be proxied.\n  // Otherwise, the property is converted to a Promise that resolves the cloned value.\n  T extends Function | ProxyMarked ? Remote<T> : Promisify<T>;\n\n/**\n * Takes the raw type of a property as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This is the inverse of `RemoteProperty<T>`.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions. See\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype LocalProperty<T> = T extends Function | ProxyMarked\n  ? Local<T>\n  : Unpromisify<T>;\n\n/**\n * Proxies `T` if it is a `ProxyMarked`, clones it otherwise (as handled by structured cloning and transfer handlers).\n */\nexport type ProxyOrClone<T> = T extends ProxyMarked ? Remote<T> : T;\n/**\n * Inverse of `ProxyOrClone<T>`.\n */\nexport type UnproxyOrClone<T> = T extends RemoteObject<ProxyMarked>\n  ? Local<T>\n  : T;\n\n/**\n * Takes the raw type of a remote object in the other thread and returns the type as it is visible to the local thread\n * when proxied with `Comlink.proxy()`.\n *\n * This does not handle call signatures, which is handled by the more general `Remote<T>` type.\n *\n * @template T The raw type of a remote object as seen in the other thread.\n */\nexport type RemoteObject<T> = { [P in keyof T]: RemoteProperty<T[P]> };\n/**\n * Takes the type of an object as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This does not handle call signatures, which is handled by the more general `Local<T>` type.\n *\n * This is the inverse of `RemoteObject<T>`.\n *\n * @template T The type of a proxied object.\n */\nexport type LocalObject<T> = { [P in keyof T]: LocalProperty<T[P]> };\n\n/**\n * Additional special comlink methods available on each proxy returned by `Comlink.wrap()`.\n */\nexport interface ProxyMethods {\n  [createEndpoint]: () => Promise<MessagePort>;\n  [releaseProxy]: () => void;\n}\n\n/**\n * Takes the raw type of a remote object, function or class in the other thread and returns the type as it is visible to\n * the local thread from the proxy return value of `Comlink.wrap()` or `Comlink.proxy()`.\n */\nexport type Remote<T> =\n  // Handle properties\n  RemoteObject<T> &\n    // Handle call signature (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: UnproxyOrClone<TArguments[I]> }\n        ) => Promisify<ProxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: UnproxyOrClone<TArguments[I]>;\n            }\n          ): Promisify<Remote<TInstance>>;\n        }\n      : unknown) &\n    // Include additional special comlink methods available on the proxy.\n    ProxyMethods;\n\n/**\n * Expresses that a type can be either a sync or async.\n */\ntype MaybePromise<T> = Promise<T> | T;\n\n/**\n * Takes the raw type of a remote object, function or class as a remote thread would see it through a proxy (e.g. when\n * passed in as a function argument) and returns the type the local thread has to supply.\n *\n * This is the inverse of `Remote<T>`. It takes a `Remote<T>` and returns its original input `T`.\n */\nexport type Local<T> =\n  // Omit the special proxy methods (they don't need to be supplied, comlink adds them)\n  Omit<LocalObject<T>, keyof ProxyMethods> &\n    // Handle call signatures (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: ProxyOrClone<TArguments[I]> }\n        ) => // The raw function could either be sync or async, but is always proxied automatically\n        MaybePromise<UnproxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: ProxyOrClone<TArguments[I]>;\n            }\n          ): // The raw constructor could either be sync or async, but is always proxied automatically\n          MaybePromise<Local<Unpromisify<TInstance>>>;\n        }\n      : unknown);\n\nconst isObject = (val: unknown): val is object =>\n  (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n\n/**\n * Customizes the serialization of certain values as determined by `canHandle()`.\n *\n * @template T The input type being handled by this transfer handler.\n * @template S The serialized type sent over the wire.\n */\nexport interface TransferHandler<T, S> {\n  /**\n   * Gets called for every value to determine whether this transfer handler\n   * should serialize the value, which includes checking that it is of the right\n   * type (but can perform checks beyond that as well).\n   */\n  canHandle(value: unknown): value is T;\n\n  /**\n   * Gets called with the value if `canHandle()` returned `true` to produce a\n   * value that can be sent in a message, consisting of structured-cloneable\n   * values and/or transferrable objects.\n   */\n  serialize(value: T): [S, Transferable[]];\n\n  /**\n   * Gets called to deserialize an incoming value that was serialized in the\n   * other thread with this transfer handler (known through the name it was\n   * registered under).\n   */\n  deserialize(value: S): T;\n}\n\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler: TransferHandler<object, MessagePort> = {\n  canHandle: (val): val is ProxyMarked =>\n    isObject(val) && (val as ProxyMarked)[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  },\n};\n\ninterface ThrownValue {\n  [throwMarker]: unknown; // just needs to be present\n  value: unknown;\n}\ntype SerializedThrownValue =\n  | { isError: true; value: Error }\n  | { isError: false; value: unknown };\n\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler: TransferHandler<\n  ThrownValue,\n  SerializedThrownValue\n> = {\n  canHandle: (value): value is ThrownValue =>\n    isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized: SerializedThrownValue;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack,\n        },\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(\n        new Error(serialized.value.message),\n        serialized.value\n      );\n    }\n    throw serialized.value;\n  },\n};\n\n/**\n * Allows customizing the serialization of certain values.\n */\nexport const transferHandlers = new Map<\n  string,\n  TransferHandler<unknown, unknown>\n>([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler],\n]);\n\nexport function expose(obj: any, ep: Endpoint = self as any) {\n  ep.addEventListener(\"message\", function callback(ev: MessageEvent) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    const { id, type, path } = {\n      path: [] as string[],\n      ...(ev.data as Message),\n    };\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n      const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n      switch (type) {\n        case MessageType.GET:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case MessageType.SET:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case MessageType.APPLY:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case MessageType.CONSTRUCT:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case MessageType.ENDPOINT:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case MessageType.RELEASE:\n          {\n            returnValue = undefined;\n          }\n          break;\n        default:\n          return;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue)\n      .catch((value) => {\n        return { value, [throwMarker]: 0 };\n      })\n      .then((returnValue) => {\n        const [wireValue, transferables] = toWireValue(returnValue);\n        ep.postMessage({ ...wireValue, id }, transferables);\n        if (type === MessageType.RELEASE) {\n          // detach and deactive after sending release response above.\n          ep.removeEventListener(\"message\", callback as any);\n          closeEndPoint(ep);\n        }\n      });\n  } as any);\n  if (ep.start) {\n    ep.start();\n  }\n}\n\nfunction isMessagePort(endpoint: Endpoint): endpoint is MessagePort {\n  return endpoint.constructor.name === \"MessagePort\";\n}\n\nfunction closeEndPoint(endpoint: Endpoint) {\n  if (isMessagePort(endpoint)) endpoint.close();\n}\n\nexport function wrap<T>(ep: Endpoint, target?: any): Remote<T> {\n  return createProxy<T>(ep, [], target) as any;\n}\n\nfunction throwIfProxyReleased(isReleased: boolean) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\n\nfunction createProxy<T>(\n  ep: Endpoint,\n  path: (string | number | symbol)[] = [],\n  target: object = function () {}\n): Remote<T> {\n  let isProxyReleased = false;\n  const proxy = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          return requestResponseMessage(ep, {\n            type: MessageType.RELEASE,\n            path: path.map((p) => p.toString()),\n          }).then(() => {\n            closeEndPoint(ep);\n            isProxyReleased = true;\n          });\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy };\n        }\n        const r = requestResponseMessage(ep, {\n          type: MessageType.GET,\n          path: path.map((p) => p.toString()),\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n      // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.SET,\n          path: [...path, prop].map((p) => p.toString()),\n          value,\n        },\n        transferables\n      ).then(fromWireValue) as any;\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if ((last as any) === createEndpoint) {\n        return requestResponseMessage(ep, {\n          type: MessageType.ENDPOINT,\n        }).then(fromWireValue);\n      }\n      // We just pretend that `bind()` didn’t happen.\n      if (last === \"bind\") {\n        return createProxy(ep, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.APPLY,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.CONSTRUCT,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n  });\n  return proxy as any;\n}\n\nfunction myFlat<T>(arr: (T | T[])[]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\nfunction processArguments(argumentList: any[]): [WireValue[], Transferable[]] {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\n\nconst transferCache = new WeakMap<any, Transferable[]>();\nexport function transfer<T>(obj: T, transfers: Transferable[]): T {\n  transferCache.set(obj, transfers);\n  return obj;\n}\n\nexport function proxy<T>(obj: T): T & ProxyMarked {\n  return Object.assign(obj, { [proxyMarker]: true }) as any;\n}\n\nexport function windowEndpoint(\n  w: PostMessageWithOrigin,\n  context: EventSource = self,\n  targetOrigin = \"*\"\n): Endpoint {\n  return {\n    postMessage: (msg: any, transferables: Transferable[]) =>\n      w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context),\n  };\n}\n\nfunction toWireValue(value: any): [WireValue, Transferable[]] {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: WireValueType.HANDLER,\n          name,\n          value: serializedValue,\n        },\n        transferables,\n      ];\n    }\n  }\n  return [\n    {\n      type: WireValueType.RAW,\n      value,\n    },\n    transferCache.get(value) || [],\n  ];\n}\n\nfunction fromWireValue(value: WireValue): any {\n  switch (value.type) {\n    case WireValueType.HANDLER:\n      return transferHandlers.get(value.name)!.deserialize(value.value);\n    case WireValueType.RAW:\n      return value.value;\n  }\n}\n\nfunction requestResponseMessage(\n  ep: Endpoint,\n  msg: Message,\n  transfers?: Transferable[]\n): Promise<WireValue> {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    ep.addEventListener(\"message\", function l(ev: MessageEvent) {\n      if (!ev.data || !ev.data.id || ev.data.id !== id) {\n        return;\n      }\n      ep.removeEventListener(\"message\", l as any);\n      resolve(ev.data);\n    } as any);\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage({ id, ...msg }, transfers);\n  });\n}\n\nfunction generateUUID(): string {\n  return new Array(4)\n    .fill(0)\n    .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n    .join(\"-\");\n}\n","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"24U01\"))).then(() => parcelRequire('LqPMA'));","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"kR70J\"))).then(() => parcelRequire('is7wV'));","let isInsideWorker = false;\n\nexport function setIsInsideWorker(inside: boolean) {\n  isInsideWorker = inside;\n}\n\nexport function mustBeInsideWorker(): void {\n  if (!isInsideWorker) {\n    throw new Error(\n      \"Must be called from inside a worker, to avoid impact on page performance. Try importing from the top level of `cubing/solve`?\",\n    );\n  }\n}\n","import { Alg, AlgBuilder, Move } from \"../../../alg\";\nimport { randomChoiceFactory } from \"../../../vendor/random-uint-below\";\n\nexport async function addOrientationSuffix(\n  alg: Alg,\n  suffixSpec: (null | string)[][],\n): Promise<Alg> {\n  const algBuilder = new AlgBuilder();\n  algBuilder.experimentalPushAlg(alg);\n  for (const suffix of suffixSpec) {\n    const choice = ((await randomChoiceFactory()) as any)(suffix);\n    if (choice !== null) {\n      algBuilder.push(Move.fromString(choice));\n    }\n  }\n  return algBuilder.toAlg();\n}\n","/*\n\nFace order:\n\n U\nLFRB\n D\n\n         | 0| 1| 2|\n         | 3| 4| 5|\n         | 6| 7| 8|\n| 9|10|11|18|19|20|27|28|29|36|37|38|\n|12|13|14|21|22|23|30|31|32|39|40|41|\n|15|16|17|24|25|26|33|34|35|42|43|44|\n         |45|46|47|\n         |48|49|50|\n         |51|52|53|\n*/\n\nimport type { KState } from \"../../../../../kpuzzle/KState\";\n\nconst reidEdgeOrder = \"UF UR UB UL DF DR DB DL FR FL BR BL\".split(\" \");\nconst reidCornerOrder = \"UFR URB UBL ULF DRF DFL DLB DBR\".split(\" \");\nconst centerOrder = \"U L F R B D\".split(\" \");\n\n// const stickers = [reidEdgeOrder, reidCornerOrder, centerOrder];\n\n// /*\n//                |1 20|0 20|1 10|\n//                |0 30|2 00|0 10|\n//                |1 30|0 00|1 00|\n// |1 22|0 31|1 31|1 32|0 01|1 01|1 02|0 11|1 11|1 12|0 21|1 21|\n// |0111|2 10|0 91|0 90|2 20|0 80|0 81|2 30|0101|0100|2 40|0110|\n// |1 61|0 71|1 52|1 51|0 41|1 42|1 41|0 51|1 72|1 71|0 61|1 62|\n//                |1 50|0 40|1 40|\n//                |0 70|2 50|0 50|\n//                |1 60|0 60|1 70|\n// */\n\nconst map: [number, number, number][] = [\n  [1, 2, 0],\n  [0, 2, 0],\n  [1, 1, 0],\n  [0, 3, 0],\n  [2, 0, 0],\n  [0, 1, 0],\n  [1, 3, 0],\n  [0, 0, 0],\n  [1, 0, 0],\n  [1, 0, 2],\n  [0, 1, 1],\n  [1, 1, 1],\n  [0, 8, 1],\n  [2, 3, 0],\n  [0, 10, 1],\n  [1, 4, 1],\n  [0, 5, 1],\n  [1, 7, 2],\n  [1, 3, 2],\n  [0, 0, 1],\n  [1, 0, 1],\n  [0, 9, 0],\n  [2, 2, 0],\n  [0, 8, 0],\n  [1, 5, 1],\n  [0, 4, 1],\n  [1, 4, 2],\n  [1, 5, 0],\n  [0, 4, 0],\n  [1, 4, 0],\n  [0, 7, 0],\n  [2, 5, 0],\n  [0, 5, 0],\n  [1, 6, 0],\n  [0, 6, 0],\n  [1, 7, 0],\n  [1, 2, 2],\n  [0, 3, 1],\n  [1, 3, 1],\n  [0, 11, 1],\n  [2, 1, 0],\n  [0, 9, 1],\n  [1, 6, 1],\n  [0, 7, 1],\n  [1, 5, 2],\n  [1, 1, 2],\n  [0, 2, 1],\n  [1, 2, 1],\n  [0, 10, 0],\n  [2, 4, 0],\n  [0, 11, 0],\n  [1, 7, 1],\n  [0, 6, 1],\n  [1, 6, 2],\n];\n\nfunction rotateLeft(s: string, i: number): string {\n  return s.slice(i) + s.slice(0, i);\n}\n\nfunction toReid333Struct(state: KState): string[][] {\n  const output: string[][] = [[], []];\n  for (let i = 0; i < 6; i++) {\n    if (state.stateData[\"CENTERS\"].pieces[i] !== i) {\n      throw new Error(\"non-oriented puzzles are not supported\");\n    }\n  }\n  for (let i = 0; i < 12; i++) {\n    output[0].push(\n      rotateLeft(\n        reidEdgeOrder[state.stateData[\"EDGES\"].pieces[i]],\n        state.stateData[\"EDGES\"].orientation[i],\n      ),\n    );\n  }\n  for (let i = 0; i < 8; i++) {\n    output[1].push(\n      rotateLeft(\n        reidCornerOrder[state.stateData[\"CORNERS\"].pieces[i]],\n        state.stateData[\"CORNERS\"].orientation[i],\n      ),\n    );\n  }\n  output.push(centerOrder);\n  return output;\n}\n\n// function toReid333String(state: Transformation): string {\n//   return toReid333Struct(state)\n//     .map((l) => l.join(\" \"))\n//     .join(\" \");\n// }\n\nexport function toMin2PhaseState(state: KState): string {\n  const reid = toReid333Struct(state);\n  return map.map(([orbit, perm, ori]) => reid[orbit][perm][ori]).join(\"\");\n}\n","import { Move } from \"../../../../../alg\";\nimport type { KPuzzle } from \"../../../../../kpuzzle\";\nimport { KState } from \"../../../../../kpuzzle\";\n\nexport function isEquivalentTranformationIgnoringCENTERS(\n  t1: KState,\n  t2: KState,\n): boolean {\n  const t1NoCenterOri = new KState(t1.kpuzzle, {\n    EDGES: t1.stateData.EDGES,\n    CORNERS: t1.stateData.CORNERS,\n    CENTERS: {\n      pieces: t1.stateData.CENTERS.pieces,\n      orientation: new Array(6).fill(0),\n    },\n  }).experimentalToTransformation()!;\n  const t2NoCenterOri = new KState(t2.kpuzzle, {\n    EDGES: t2.stateData.EDGES,\n    CORNERS: t2.stateData.CORNERS,\n    CENTERS: {\n      pieces: t2.stateData.CENTERS.pieces,\n      orientation: new Array(6).fill(0),\n    },\n  }).experimentalToTransformation()!;\n  return t1NoCenterOri.isIdentical(t2NoCenterOri);\n}\n\nexport function passesFilter(kpuzzle: KPuzzle, state: KState): boolean {\n  if (isEquivalentTranformationIgnoringCENTERS(kpuzzle.startState(), state)) {\n    return false;\n  }\n\n  for (const face of \"ULFRBD\") {\n    for (let amount = 1; amount < 4; amount++) {\n      const transformation = kpuzzle\n        .moveToTransformation(new Move(face, amount))\n        .toKState();\n      if (isEquivalentTranformationIgnoringCENTERS(transformation, state)) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\n// TODO: implement tests\n// {\n//   const def = await puzzles[\"3x3x3\"].def();\n//   const kpuzzle = new KPuzzle(def);\n//   console.log(passesFilter(def, kpuzzle.state));\n//   kpuzzle.applyAlg(parse(\"R\"));\n//   console.log(passesFilter(def, kpuzzle.state));\n//   kpuzzle.applyAlg(parse(\"D\"));\n//   console.log(passesFilter(def, kpuzzle.state));\n//   kpuzzle.reset();\n//   kpuzzle.applyAlg(parse(\"(R' U' R U')5\"));\n//   console.log(passesFilter(def, kpuzzle.state));\n// }\n","// TODO: Verify\nexport const sgs3x3x3: string[][] = [\n  [\n    \"R U'\",\n    \"R2 B\", //\n    \"D2 B2\",\n    \"D' L B'\", //\n    \"R' U'\",\n    \"B\", //\n    \"D B2\",\n    \"R' B\", //\n    \"L' U\",\n    \"L2 B'\", //\n    \"B2\",\n    \"D L B'\", //\n    \"L U\",\n    \"B'\", //\n    \"U'\",\n    \"R B\", //\n    \"D' B2\",\n    \"L B'\", //\n    \"U2\",\n    \"U L' B'\", //\n    \"\",\n    \"U' L' B'\", //\n    \"U\",\n    \"L' B'\",\n  ],\n  [\n    \"F2 L2\",\n    \"F' L'\",\n    \"R' F L2\", //\n    \"D' L2\",\n    \"F L2\",\n    \"F2 L'\", //\n    \"R' F' L'\",\n    \"R2 F L2\",\n    \"R2 F2 L'\", //\n    \"L2\",\n    \"F L'\",\n    \"D' L\", //\n    \"D2 L2\",\n    \"R2 F' L'\",\n    \"D L\", //\n    \"\",\n    \"L2 F L'\",\n    \"L F' L2\", //\n    \"L F L'\",\n    \"F' L2\",\n    \"L'\", //\n    \"D L2\",\n    \"D F L'\",\n    \"L\",\n  ],\n  [\n    \"R B U2 B'\",\n    \"R2 B U' B'\", //\n    \"F2 B U B'\",\n    \"F B2 L' B2\", //\n    \"B2 L B2\",\n    \"B U' B'\", //\n    \"R2 B U2 B'\",\n    \"R' B U' B'\", //\n    \"B2 L' B2\",\n    \"F B U B'\", //\n    \"B2 U' B2\",\n    \"B' L B\", //\n    \"L F' B D' B'\",\n    \"B' U' B2 D B'\", //\n    \"B U2 B'\",\n    \"R B U' B'\", //\n    \"B2 L2 B2\",\n    \"D' B' L B\", //\n    \"B U B'\",\n    \"F' B2 L' B2\", //\n    \"\",\n    \"B2 L' B' U' B'\",\n  ],\n  [\n    \"U F2 L2 U'\",\n    \"F' U L' U'\", //\n    \"F2 U L' U'\",\n    \"U F L2 U'\", //\n    \"U2 B2 U2\",\n    \"R' U' B U\", //\n    \"D2 U L U'\",\n    \"D U2 B' U2\", //\n    \"U L2 U'\",\n    \"F U L' U'\", //\n    \"D U L U'\",\n    \"U2 B' U2\", //\n    \"\",\n    \"U2 B' U' L' U'\", //\n    \"U2 L' U2\",\n    \"U' B U\", //\n    \"U L U'\",\n    \"D' U2 B' U2\", //\n    \"U L' U'\",\n    \"U2 B U2\",\n  ],\n  [\n    \"R' D' F2\",\n    \"F'\", //\n    \"F2\",\n    \"D R F'\", //\n    \"R D' F2\",\n    \"R2 F'\", //\n    \"D' F2\",\n    \"R F'\", //\n    \"F2 R' D' F2\",\n    \"F\", //\n    \"D2 F2\",\n    \"D' R F'\", //\n    \"R2 D' F2\",\n    \"R' F'\", //\n    \"D F2\",\n    \"D2 R F'\", //\n    \"\",\n    \"F R' D' F2\",\n  ],\n  [\n    \"R' D2 F' D F\",\n    \"R F2 R2 F2\",\n    \"R2 F' D2 F\", //\n    \"F' R2 D2 F\",\n    \"L D' L'\",\n    \"D F' D2 F\", //\n    \"F2 R2 F2\",\n    \"R F' D2 F\",\n    \"F' R2 D' F\", //\n    \"F' R' D2 F\",\n    \"F2 R' F2\",\n    \"L D L'\", //\n    \"F' R D' F\",\n    \"F2 R F2\",\n    \"F' D2 F\", //\n    \"\",\n    \"L D2 R D' L'\",\n    \"F' D2 F' R F2\", //\n    \"D2 R2 F2 R2 F2\",\n    \"D F' D' F\",\n    \"F' D F\",\n  ],\n  [\n    \"U F2 U'\",\n    \"R U F' U'\", //\n    \"D R U F2 U'\",\n    \"U F U'\", //\n    \"R2 U F2 U'\",\n    \"R' U F' U'\", //\n    \"R U F2 U'\",\n    \"R2 U F' U'\", //\n    \"\",\n    \"U L D L' F U'\", //\n    \"F2 D' R D F2\",\n    \"D2 U F U'\", //\n    \"R' U F2 U'\",\n    \"U F' U'\", //\n    \"F2 D2 R D2 F2\",\n    \"D U F U'\",\n  ],\n  [\n    \"R2\",\n    \"R' B' D B\", //\n    \"D R'\",\n    \"F' R2 F\", //\n    \"\",\n    \"R B' D B\", //\n    \"R'\",\n    \"B' D B\", //\n    \"D' R'\",\n    \"D2 F' R2 F\", //\n    \"R\",\n    \"R2 B' D B\", //\n    \"D2 R'\",\n    \"B' D' B\",\n  ],\n  [\n    \"R2 D' R2\",\n    \"F' R' F R\",\n    \"R D' R2 D R'\", //\n    \"D2 R2 D2 R2\",\n    \"R' D' F' R F\",\n    \"U F D F' U'\", //\n    \"\",\n    \"R2 D2 B R' B' R'\",\n    \"R' F D' F2 R F\", //\n    \"R2 D R2\",\n    \"F2 U F U' F\",\n    \"R' D F' R F\", //\n    \"D R2 D2 R2\",\n    \"U F D' F' U'\",\n    \"D R' D2 F' R F\", //\n    \"R2 D2 R2\",\n    \"U F D2 F' U'\",\n    \"R' D2 F' R F\",\n  ],\n  [\n    \"B R B'\",\n    \"F D F' B R2 B'\", //\n    \"D B R2 B'\",\n    \"D2 B R' B'\", //\n    \"B R2 B'\",\n    \"D B R' B'\", //\n    \"D' B R2 B'\",\n    \"B R' B'\", //\n    \"\",\n    \"B R2 B' D B R' B'\", //\n    \"D2 B R2 B'\",\n    \"D' B R' B'\",\n  ],\n  [\n    \"\",\n    \"R' D R F D2 F'\", //\n    \"R' D R\",\n    \"D F D' F'\", //\n    \"R F' R' F\",\n    \"F D' F'\", //\n    \"R' D' R\",\n    \"F D2 F'\", //\n    \"R' D2 R\",\n    \"F D F'\",\n  ],\n  [\n    \"\",\n    \"F2 D2 R F' R' D2 F' D2 F'\",\n    \"F2 D2 F' D' F D' F' D2 F'\", //\n    \"F2 D F2 D F2 D2 F2\",\n    \"D2 F L D2 L' D2 F'\",\n    \"D F D2 L D2 L' F'\", //\n    \"R' D B' D2 B D' R\",\n    \"R' D2 B' D2 B R\",\n    \"F D2 F' D F D F'\", //\n    \"F D' L D2 L' D F'\",\n    \"B D' F D B' D' F'\",\n    \"F D2 L D2 L' F'\", //\n    \"F D' L D L' D F'\",\n    \"F L D2 L' D2 F'\",\n    \"R' B' D2 B D2 R\",\n  ],\n  [\n    \"D'\",\n    \"F L D L' D' F'\", //\n    \"D2\",\n    \"L B D B' D' L'\", //\n    \"D\",\n    \"B' L' D' L D B\", //\n    \"\",\n    \"D F L D L' D' F'\",\n  ],\n  [\n    \"F' D2 F D F' D F\",\n    \"F' D' R' D R F\", //\n    \"F' R' D' R D F\",\n    \"B D R D' R' B'\", //\n    \"\",\n    \"D B' D' L' D L B\",\n  ],\n  [\n    \"D F D F' D F D2 F'\",\n    \"F' U2 B' R' B U2 F' L F' L' F'\", //\n    \"\",\n    \"D2 L D L2 F L F2 D F\",\n  ],\n  [\n    \"L B' L' F L B L' F'\",\n    \"F2 U F' D2 F U' F' D2 F'\",\n    \"D' F' D B D' F D B'\", //\n    \"F L2 F R2 F' L2 F R2 F2\",\n    \"D B D' F' D B' D' F\",\n    \"R F L F' R' F L' F'\", //\n    \"\",\n    \"D2 B L' U2 L B' D2 B L' U2 L B'\",\n    \"D2 F R' U2 R F' D2 F R' U2 R F'\", //\n    \"R F L' F' R' F L F'\",\n    \"D F D' B' D F' D' B\",\n    \"L2 F2 L' B2 L F2 L' B2 L'\",\n  ],\n  [\n    \"L B R' B' L' B R B'\",\n    \"R' B R F' R' B' R F\",\n    \"L D2 L U L' D2 L U' L2\", //\n    \"\",\n    \"D2 B' D2 F D' L2 F L2 F' D2 B D' F'\",\n    \"D2 F' R' F R2 B' D2 B D2 R' F D2 F'\", //\n    \"L B L' F L B' L' F'\",\n    \"F' D2 F' U' F D2 F' U F2\",\n    \"D' B' D F D' B D F'\",\n  ],\n  [\"\", \"D2 F' L U2 L' F D2 F' L U2 L' F\", \"D2 B' R U2 R' B D2 B' R U2 R' B\"],\n];\n","import { Alg, AlgBuilder } from \"../../../../../alg\";\nimport type { KState } from \"../../../../../kpuzzle/KState\";\nimport { puzzles } from \"../../../../../puzzles\";\nimport { randomChoiceFactory } from \"../../../../../vendor/random-uint-below\";\nimport { mustBeInsideWorker } from \"../../../inside-worker\";\nimport { addOrientationSuffix } from \"../../addOrientationSuffix\";\nimport { toMin2PhaseState } from \"./convert\";\nimport { passesFilter } from \"./filter\";\nimport { sgs3x3x3 } from \"./legacy-sgs\";\n\nexport async function random333State(): Promise<KState> {\n  const kpuzzle = await puzzles[\"3x3x3\"].kpuzzle();\n  let state = kpuzzle.startState();\n  for (const piece of sgs3x3x3) {\n    state = state.applyAlg(\n      Alg.fromString(((await randomChoiceFactory()) as any)(piece)),\n    );\n  }\n  if (!passesFilter(kpuzzle, state)) {\n    return random333State();\n  }\n  return state;\n}\n\nlet cachedImport: Promise<\n  typeof import(\"../../../../../vendor/min2phase/3x3x3-min2phase\")\n> | null = null;\nfunction dynamicMin2phaseGWT(): Promise<\n  typeof import(\"../../../../../vendor/min2phase/3x3x3-min2phase\")\n> {\n  return (cachedImport ??= import(\n    \"../../../../../vendor/min2phase/3x3x3-min2phase\"\n  ));\n}\n\nexport async function solve333(s: KState): Promise<Alg> {\n  mustBeInsideWorker();\n  return Alg.fromString(\n    (await dynamicMin2phaseGWT()).solveState(toMin2PhaseState(s)),\n  );\n}\n\nexport async function random333Scramble(): Promise<Alg> {\n  return solve333(await random333State());\n}\n\nexport async function initialize333(): Promise<void> {\n  (await dynamicMin2phaseGWT()).initialize();\n}\n\nconst randomSuffixes = [\n  [null, \"Rw\", \"Rw2\", \"Rw'\", \"Fw\", \"Fw'\"],\n  [null, \"Dw\", \"Dw2\", \"Dw'\"],\n];\n\nexport async function random333OrientedScramble(): Promise<Alg> {\n  return addOrientationSuffix(await random333Scramble(), randomSuffixes);\n}\n\nconst extraBit = new Alg(\"R' U' F\");\nexport async function random333FewestMovesScramble(): Promise<Alg> {\n  const algBuilder = new AlgBuilder();\n  const unorientedScramble = await random333Scramble();\n  algBuilder.experimentalPushAlg(extraBit);\n  // TODO:Avoid cancellable moves.\n  algBuilder.experimentalPushAlg(unorientedScramble);\n  algBuilder.experimentalPushAlg(extraBit);\n  return algBuilder.toAlg();\n}\n","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"bDe2m\"))).then(() => parcelRequire('7i0aL'));","// TODO: move this file somewhere permanent.\nimport {\n  Alg,\n  Grouping,\n  LineComment,\n  Commutator,\n  Conjugate,\n  Move,\n  Newline,\n  Pause,\n  TraversalUp,\n} from \"../alg\";\n\n/*\n *   For movecount, that understands puzzle rotations.  This code\n *   should be moved to the alg class, probably.\n */\nclass CountMoves extends TraversalUp<number> {\n  constructor(private metric: (move: Move) => number) {\n    super();\n  }\n\n  public traverseAlg(alg: Alg): number {\n    let r = 0;\n    for (const unit of alg.units()) {\n      r += this.traverseUnit(unit);\n    }\n    return r;\n  }\n\n  public traverseGrouping(grouping: Grouping): number {\n    // const unit: Unit = Alg.fromString(\"SDf\");\n    // console.log(unit);\n    const alg: Alg = grouping.alg;\n    return this.traverseAlg(alg) * Math.abs(grouping.amount);\n  }\n\n  public traverseMove(move: Move): number {\n    return this.metric(move);\n  }\n\n  public traverseCommutator(commutator: Commutator): number {\n    return (\n      2 * (this.traverseAlg(commutator.A) + this.traverseAlg(commutator.B))\n    );\n  }\n\n  public traverseConjugate(conjugate: Conjugate): number {\n    return 2 * this.traverseAlg(conjugate.A) + this.traverseAlg(conjugate.B);\n  }\n\n  // TODO: Remove spaces between repeated pauses (in traverseSequence)\n  public traversePause(_pause: Pause): number {\n    return 0;\n  }\n\n  public traverseNewline(_newLine: Newline): number {\n    return 0;\n  }\n\n  // TODO: Enforce being followed by a newline (or the end of the alg)?\n  public traverseLineComment(_comment: LineComment): number {\n    return 0;\n  }\n}\n\nfunction isCharUppercase(c: string): boolean {\n  return \"A\" <= c && c <= \"Z\";\n}\n\n// TODO: Implement a puzzle-specific way to calculate this.\nfunction baseMetric(move: Move): number {\n  const fam = move.family;\n  if (\n    (isCharUppercase(fam[0]) && fam[fam.length - 1] === \"v\") ||\n    fam === \"x\" ||\n    fam === \"y\" ||\n    fam === \"z\" ||\n    fam === \"T\"\n  ) {\n    return 0;\n  } else {\n    return 1;\n  }\n}\n\n// TODO: Implement a puzzle-specific way to calculate this.\nfunction quantumMetric(move: Move): number {\n  const fam = move.family;\n  if (\n    (isCharUppercase(fam[0]) && fam[fam.length - 1] === \"v\") ||\n    fam === \"x\" ||\n    fam === \"y\" ||\n    fam === \"z\" ||\n    fam === \"T\"\n  ) {\n    return 0;\n  } else {\n    return Math.abs(move.amount);\n  }\n}\n\nconst countMovesInstance = new CountMoves(baseMetric);\nexport const countMoves: (alg: Alg) => number =\n  countMovesInstance.traverseAlg.bind(countMovesInstance);\n\nconst countQuantumMovesInstance = new CountMoves(quantumMetric);\nexport const countQuantumMoves: (alg: Alg) => number =\n  countQuantumMovesInstance.traverseAlg.bind(countQuantumMovesInstance);\n","import {\n  Alg,\n  Commutator,\n  Conjugate,\n  Grouping,\n  LineComment,\n  Move,\n  Newline,\n  Pause,\n  TraversalUp,\n} from \"../alg\";\n\n// TODO: Include Pause, include amounts\nclass CountAnimatedLeaves extends TraversalUp<number, number> {\n  public traverseAlg(alg: Alg): number {\n    let total = 0;\n    for (const part of alg.units()) {\n      total += this.traverseUnit(part);\n    }\n    return total;\n  }\n\n  public traverseGrouping(grouping: Grouping): number {\n    return this.traverseAlg(grouping.alg) * Math.abs(grouping.amount);\n  }\n\n  public traverseMove(_move: Move): number {\n    return 1;\n  }\n\n  public traverseCommutator(commutator: Commutator): number {\n    return (\n      2 * (this.traverseAlg(commutator.A) + this.traverseAlg(commutator.B))\n    );\n  }\n\n  public traverseConjugate(conjugate: Conjugate): number {\n    return 2 * this.traverseAlg(conjugate.A) + this.traverseAlg(conjugate.B);\n  }\n\n  public traversePause(_pause: Pause): number {\n    return 1;\n  }\n\n  public traverseNewline(_newline: Newline): number {\n    return 0;\n  }\n\n  public traverseLineComment(_comment: LineComment): number {\n    return 0;\n  }\n}\n\nconst countAnimatedLeavesInstance = new CountAnimatedLeaves();\nexport const countAnimatedLeaves: (alg: Alg) => number =\n  countAnimatedLeavesInstance.traverseAlg.bind(countAnimatedLeavesInstance);\n","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"hPxUV\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"gW5g5\"))]).then(() => parcelRequire('ikk6p'));","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"9vqfN\\\":\\\"index.0ddf083a.js\\\",\\\"gW5g5\\\":\\\"puzzle-geometry.898d008f.js\\\",\\\"hPxUV\\\":\\\"puzzle-geometry.90dbf6e2.js\\\",\\\"24U01\\\":\\\"search-worker-ts-entry-3B5U6XER.4cc48f0d.js\\\",\\\"lU41E\\\":\\\"search-worker-js-entry-BDMABBZV.3e98f933.js\\\",\\\"guMJt\\\":\\\"2x2x2.sgs.json-GQVTWF7L.47ab3dd3.js\\\",\\\"bhiEI\\\":\\\"444-solver-ZBJQH3QR.a7152004.js\\\",\\\"lkYRb\\\":\\\"fto.dynamic-ZH5IVUKX.09e31fb2.js\\\",\\\"idC09\\\":\\\"fto-solver-HI6NIV74.6a4fec0b.js\\\",\\\"2ubzY\\\":\\\"kilosolver-N6JM5PUY.61addde9.js\\\",\\\"9Ly1g\\\":\\\"master_tetraminx-solver-KBQJGW4A.9feb95d6.js\\\",\\\"7HMUQ\\\":\\\"megaminx.sgs.json-JXXOXGQE.4668c523.js\\\",\\\"d0aV3\\\":\\\"pyraminx.sgs.json-EHYGSC7B.ad5388cf.js\\\",\\\"gGgdh\\\":\\\"redi_cube-E5F64NIQ.ce6337fe.js\\\",\\\"3cEni\\\":\\\"skewb.sgs.json-F5FL7533.de9c7dd3.js\\\",\\\"hCOO5\\\":\\\"sq1-solver-P3IWWET7.b76ecebd.js\\\",\\\"kR70J\\\":\\\"worker-inside-generated-string-AHMSHHSF.00fe2450.js\\\",\\\"bDe2m\\\":\\\"3x3x3-min2phase-FPRJ5PCJ.68ac9f68.js\\\",\\\"8kOfR\\\":\\\"index.2f09df78.js\\\"}\"));","port module Main exposing (..)\n\nimport Array exposing (Array)\nimport Browser\nimport Browser.Navigation as Nav\nimport Html exposing (..)\nimport Html.Attributes exposing (..)\nimport Html.Events exposing (..)\nimport Json.Decode exposing (Decoder)\nimport Random\nimport Task\nimport Url\n\n\n\n-- PORTS\n\n\nport newCommMessage : Maybe String -> Cmd msg\n\n\nport newSettingsMessage : Settings -> Cmd msg\n\n\nport newCommReceiver : (String -> msg) -> Sub msg\n\n\n\n-- SUBSCRIPTIONS\n\n\nsubscriptions : Model -> Sub Msg\nsubscriptions _ =\n    newCommReceiver GeneratedNewComm\n\n\n\n---- MODEL ----\n\n\ntype alias CommUF =\n    { comm : String\n    , piece1 : String\n    , piece2 : String\n    , comm_type : String\n    }\n\n\ntoCommTypeUF : CommUF -> CommType\ntoCommTypeUF comm =\n    UF (Just comm)\n\n\ndecoderCommUF : Decoder CommUF\ndecoderCommUF =\n    Json.Decode.map4\n        CommUF\n        (Json.Decode.field \"comm\" Json.Decode.string)\n        (Json.Decode.field \"piece_1\" Json.Decode.string)\n        (Json.Decode.field \"piece_2\" Json.Decode.string)\n        (Json.Decode.field \"type\" Json.Decode.string)\n\n\ntype alias CommUFR =\n    { comm : String\n    , piece1 : String\n    , piece2 : String\n    , comm_type : String\n    }\n\n\ntoCommTypeUFR : CommUFR -> CommType\ntoCommTypeUFR comm =\n    UFR (Just comm)\n\n\ndecoderCommUFR : Decoder CommUFR\ndecoderCommUFR =\n    Json.Decode.map4\n        CommUFR\n        (Json.Decode.field \"comm\" Json.Decode.string)\n        (Json.Decode.field \"piece_1\" Json.Decode.string)\n        (Json.Decode.field \"piece_2\" Json.Decode.string)\n        (Json.Decode.field \"type\" Json.Decode.string)\n\n\ntype alias CommParity =\n    { piece : String\n    , comm : String\n    }\n\n\ntoCommTypeParity : CommParity -> CommType\ntoCommTypeParity comm =\n    Parity (Just comm)\n\n\ndecoderCommParity : Decoder CommParity\ndecoderCommParity =\n    Json.Decode.map2\n        CommParity\n        (Json.Decode.field \"piece\" Json.Decode.string)\n        (Json.Decode.field \"comm\" Json.Decode.string)\n\n\ntype alias Comm2Flip =\n    { comm : String\n    , piece1 : String\n    , piece2 : String\n    }\n\n\ntoCommType2Flip : Comm2Flip -> CommType\ntoCommType2Flip comm =\n    TwoFlips (Just comm)\n\n\ndecoderComm2Flip : Decoder Comm2Flip\ndecoderComm2Flip =\n    Json.Decode.map3\n        Comm2Flip\n        (Json.Decode.field \"comm\" Json.Decode.string)\n        (Json.Decode.field \"piece_1\" Json.Decode.string)\n        (Json.Decode.field \"piece_2\" Json.Decode.string)\n\n\ntype alias Comm2Twist =\n    { comm : String\n    , piece1 : String\n    , piece2 : String\n    }\n\n\ntoCommType2Twist : Comm2Twist -> CommType\ntoCommType2Twist comm =\n    TwoTwists (Just comm)\n\n\ndecoderComm2Twist : Decoder Comm2Twist\ndecoderComm2Twist =\n    Json.Decode.map3\n        Comm2Twist\n        (Json.Decode.field \"comm\" Json.Decode.string)\n        (Json.Decode.field \"piece_1\" Json.Decode.string)\n        (Json.Decode.field \"piece_2\" Json.Decode.string)\n\n\ntype alias Comm3Twist =\n    { comm : String\n    , piece1 : String\n    , piece2 : String\n    }\n\n\ntoCommType3Twist : Comm3Twist -> CommType\ntoCommType3Twist comm =\n    ThreeTwists (Just comm)\n\n\ndecoderComm3Twist : Decoder Comm3Twist\ndecoderComm3Twist =\n    Json.Decode.map3\n        Comm3Twist\n        (Json.Decode.field \"comm\" Json.Decode.string)\n        (Json.Decode.field \"piece_1\" Json.Decode.string)\n        (Json.Decode.field \"piece_2\" Json.Decode.string)\n\n\ntype alias Data =\n    { uf : List CommUF\n    , ufr : List CommUFR\n    , parity : List CommParity\n    , two_flips : List Comm2Flip\n    , two_twists : List Comm2Twist\n    , three_twists : List Comm3Twist\n    }\n\n\ndecoderData : Decoder Data\ndecoderData =\n    Json.Decode.field \"data\"\n        (Json.Decode.map6\n            Data\n            (Json.Decode.field \"UF\" (Json.Decode.list decoderCommUF))\n            (Json.Decode.field \"UFR\" (Json.Decode.list decoderCommUFR))\n            (Json.Decode.field \"PARITY\" (Json.Decode.list decoderCommParity))\n            (Json.Decode.field \"2FLIPS\" (Json.Decode.list decoderComm2Flip))\n            (Json.Decode.field \"2TWISTS\" (Json.Decode.list decoderComm2Twist))\n            (Json.Decode.field \"3TWISTS\" (Json.Decode.list decoderComm3Twist))\n        )\n\n\ndecoderToggledTypes : Decoder ToggledTypes\ndecoderToggledTypes =\n    Json.Decode.map6\n        ToggledTypes\n        (Json.Decode.field \"uf\" Json.Decode.bool)\n        (Json.Decode.field \"ufr\" Json.Decode.bool)\n        (Json.Decode.field \"parity\" Json.Decode.bool)\n        (Json.Decode.field \"two_flips\" Json.Decode.bool)\n        (Json.Decode.field \"two_twists\" Json.Decode.bool)\n        (Json.Decode.field \"three_twists\" Json.Decode.bool)\n\n\ndecoderSettings : Decoder Settings\ndecoderSettings =\n    Json.Decode.field \"settings\"\n        (Json.Decode.map4\n            Settings\n            (Json.Decode.field \"toggled_types\" decoderToggledTypes)\n            (Json.Decode.field \"comm_visible\" Json.Decode.bool)\n            (Json.Decode.field \"comm_type_visible\" Json.Decode.bool)\n            (Json.Decode.field \"letters_visible\" Json.Decode.bool)\n        )\n\n\ndecoder : Decoder Flags\ndecoder =\n    Json.Decode.map2\n        Flags\n        decoderData\n        decoderSettings\n\n\ntype alias Flags =\n    { data : Data, settings : Settings }\n\n\ntype CommType\n    = UF (Maybe CommUF)\n    | UFR (Maybe CommUFR)\n    | Parity (Maybe CommParity)\n    | TwoFlips (Maybe Comm2Flip)\n    | TwoTwists (Maybe Comm2Twist)\n    | ThreeTwists (Maybe Comm3Twist)\n\n\ntype alias ToggledTypes =\n    { uf : Bool\n    , ufr : Bool\n    , parity : Bool\n    , two_flips : Bool\n    , two_twists : Bool\n    , three_twists : Bool\n    }\n\n\ngetComm : Maybe CommType -> Maybe String\ngetComm c =\n    case c of\n        Just (UF (Just comm)) ->\n            Just comm.comm\n\n        Just (UFR (Just comm)) ->\n            Just comm.comm\n\n        Just (Parity (Just comm)) ->\n            Just comm.comm\n\n        Just (TwoFlips (Just comm)) ->\n            Just comm.comm\n\n        Just (TwoTwists (Just comm)) ->\n            Just comm.comm\n\n        Just (ThreeTwists (Just comm)) ->\n            Just comm.comm\n\n        _ ->\n            Nothing\n\n\ntoggleType : CommType -> ToggledTypes -> ToggledTypes\ntoggleType type_to_toggle current =\n    case type_to_toggle of\n        UF _ ->\n            { current | uf = not current.uf }\n\n        UFR _ ->\n            { current | ufr = not current.ufr }\n\n        Parity _ ->\n            { current | parity = not current.parity }\n\n        TwoFlips _ ->\n            { current | two_flips = not current.two_flips }\n\n        TwoTwists _ ->\n            { current | two_twists = not current.two_twists }\n\n        ThreeTwists _ ->\n            { current | three_twists = not current.three_twists }\n\n\ntype alias Settings =\n    { toggled_types : ToggledTypes\n    , comm_visible : Bool\n    , comm_type_visible : Bool\n    , letters_visible : Bool\n    }\n\n\nsetToggledTypes : ToggledTypes -> Settings -> Settings\nsetToggledTypes new_toggled_types settings =\n    { settings | toggled_types = new_toggled_types }\n\n\nsetCommVisible : Bool -> Settings -> Settings\nsetCommVisible new_val settings =\n    { settings | comm_visible = new_val }\n\n\nsetCommTypeVisible : Bool -> Settings -> Settings\nsetCommTypeVisible new_val settings =\n    { settings | comm_type_visible = new_val }\n\n\nsetLettersVisible : Bool -> Settings -> Settings\nsetLettersVisible new_val settings =\n    { settings | letters_visible = new_val }\n\n\ntype Model\n    = Error\n    | Loaded\n        { data : Data\n        , settings : Settings\n        , current_comms : List CommType\n        , current_comm : Maybe CommType\n        , current_setup_alg : Maybe String\n        }\n\n\nsetCurrentComms : List CommType -> Model -> Model\nsetCurrentComms new_current_comms model =\n    case model of\n        Loaded state ->\n            Loaded { state | current_comms = new_current_comms }\n\n        Error ->\n            model\n\n\nsetSettings : Settings -> Model -> Model\nsetSettings settings model =\n    case model of\n        Loaded state ->\n            Loaded { state | settings = settings }\n\n        Error ->\n            model\n\n\ninit : Json.Decode.Value -> Url.Url -> Nav.Key -> ( Model, Cmd Msg )\ninit flags url key =\n    case Json.Decode.decodeValue decoderData flags of\n        Ok decodedData ->\n            case Json.Decode.decodeValue decoderSettings flags of\n                Ok decodedSettings ->\n                    ( Loaded\n                        { data = decodedData\n                        , settings = decodedSettings\n                        , current_comms = []\n                        , current_comm = Nothing\n                        , current_setup_alg = Nothing\n                        }\n                    , send GenerateCurrentComms\n                    )\n\n                Err err ->\n                    ( Loaded\n                        { data = decodedData\n                        , settings =\n                            { toggled_types =\n                                { uf = False\n                                , ufr = False\n                                , parity = False\n                                , two_flips = False\n                                , two_twists = False\n                                , three_twists = False\n                                }\n                            , comm_visible = False\n                            , comm_type_visible = False\n                            , letters_visible = False\n                            }\n                        , current_comms = []\n                        , current_comm = Nothing\n                        , current_setup_alg = Nothing\n                        }\n                    , Cmd.none\n                    )\n\n        Err err ->\n            ( Error, Cmd.none )\n\n\n\n---- UPDATE ----\n\n\ntype Msg\n    = NoOp\n    | LinkClicked Browser.UrlRequest\n    | UrlChanged Url.Url\n    | ToggleType CommType\n    | GenerateNewComm\n    | UpdateComm Int\n    | GeneratedNewComm String\n    | GenerateCurrentComms\n    | ToggleCommVisible\n    | ToggleCommTypeVisible\n    | ToggleLettersVisible\n\n\nrandomIndexGenerator : List CommType -> Random.Generator Int\nrandomIndexGenerator list =\n    Random.int 0 (List.length list)\n\n\nnewComm : List CommType -> Cmd Msg\nnewComm list =\n    Random.generate UpdateComm (randomIndexGenerator list)\n\n\nupdateSettings : Settings -> Cmd Msg\nupdateSettings settings =\n    newSettingsMessage settings\n\n\nsend : msg -> Cmd msg\nsend msg =\n    Task.succeed msg\n        |> Task.perform identity\n\n\nupdate : Msg -> Model -> ( Model, Cmd Msg )\nupdate msg model =\n    case ( msg, model ) of\n        ( NoOp, _ ) ->\n            ( model, Cmd.none )\n\n        ( LinkClicked _, _ ) ->\n            ( model, Cmd.none )\n\n        ( UrlChanged _, _ ) ->\n            ( model, Cmd.none )\n\n        ( ToggleType type_to_toggle, Loaded state ) ->\n            let\n                new_types =\n                    state.settings.toggled_types |> toggleType type_to_toggle\n\n                new_settings =\n                    state.settings |> setToggledTypes (state.settings.toggled_types |> toggleType type_to_toggle)\n            in\n            ( Loaded state\n                |> setSettings new_settings\n            , send GenerateCurrentComms\n            )\n\n        ( GenerateCurrentComms, Loaded state ) ->\n            let\n                new_comms =\n                    List.concat\n                        [ if state.settings.toggled_types.uf then\n                            List.map toCommTypeUF state.data.uf\n\n                          else\n                            []\n                        , if state.settings.toggled_types.ufr then\n                            List.map toCommTypeUFR state.data.ufr\n\n                          else\n                            []\n                        , if state.settings.toggled_types.parity then\n                            List.map toCommTypeParity state.data.parity\n\n                          else\n                            []\n                        , if state.settings.toggled_types.two_flips then\n                            List.map toCommType2Flip state.data.two_flips\n\n                          else\n                            []\n                        , if state.settings.toggled_types.two_twists then\n                            List.map toCommType2Twist state.data.two_twists\n\n                          else\n                            []\n                        , if state.settings.toggled_types.three_twists then\n                            List.map toCommType3Twist state.data.three_twists\n\n                          else\n                            []\n                        ]\n            in\n            ( Loaded state |> setCurrentComms new_comms, newComm state.current_comms )\n\n        ( GenerateNewComm, Loaded state ) ->\n            ( model, newComm state.current_comms )\n\n        ( UpdateComm index, Loaded state ) ->\n            let\n                new_comm =\n                    state.current_comms |> List.drop (index - 1) |> List.head\n            in\n            ( Loaded { state | current_comm = new_comm }, newCommMessage (new_comm |> getComm) )\n\n        ( GeneratedNewComm alg, Loaded state ) ->\n            let\n                new_settings =\n                    state.settings |> setCommVisible False\n\n                new_state =\n                    Loaded { state | current_setup_alg = Just alg, settings = new_settings }\n            in\n            ( new_state, updateSettings new_settings )\n\n        ( ToggleCommVisible, Loaded state ) ->\n            let\n                new_settings =\n                    state.settings |> setCommVisible (not state.settings.comm_visible)\n\n                new_state =\n                    Loaded { state | settings = new_settings }\n            in\n            ( new_state, updateSettings new_settings )\n\n        ( ToggleCommTypeVisible, Loaded state ) ->\n            let\n                new_settings =\n                    state.settings |> setCommTypeVisible (not state.settings.comm_type_visible)\n\n                new_state =\n                    Loaded { state | settings = new_settings }\n            in\n            ( new_state, updateSettings new_settings )\n\n        ( ToggleLettersVisible, Loaded state ) ->\n            let\n                new_settings =\n                    state.settings |> setLettersVisible (not state.settings.letters_visible)\n\n                new_state =\n                    Loaded { state | settings = new_settings }\n            in\n            ( new_state, updateSettings new_settings )\n\n        ( _, _ ) ->\n            ( model, Cmd.none )\n\n\n\n---- VIEW ----\n\n\nviewToggleButton : String -> CommType -> Bool -> Html Msg\nviewToggleButton content type_to_toggle toggled =\n    button\n        [ class \"mr-auto hover:bg-emerald-700 ease-in-out duration-75 text-white font-bold py-2 px-4 rounded w-1/2 mb-2\"\n        , class\n            (if toggled == False then\n                \"bg-emerald-400\"\n\n             else\n                \"bg-emerald-600\"\n            )\n        , onClick (ToggleType type_to_toggle)\n        ]\n        [ text content ]\n\n\nviewComm : CommType -> Settings -> Html Msg\nviewComm c settings =\n    div [ class \"text-5xl text-white font-bold text-center\" ]\n        (case c of\n            UF (Just comm) ->\n                [ span\n                    [ class\n                        (if settings.comm_type_visible == True then\n                            \"\"\n\n                         else\n                            \"blur-lg\"\n                        )\n                    , onClick ToggleCommTypeVisible\n                    ]\n                    [ text (comm.comm_type ++ \": \") ]\n                , span\n                    [ class\n                        (if settings.letters_visible == True then\n                            \"\"\n\n                         else\n                            \"blur-md\"\n                        )\n                    , onClick ToggleLettersVisible\n                    ]\n                    [ text (comm.piece1 ++ \" -> \" ++ comm.piece2) ]\n                ]\n\n            _ ->\n                [ span [] [ text \": \" ] ]\n        )\n\n\nview : Model -> Browser.Document Msg\nview model =\n    { title = \"3-Style\"\n    , body =\n        [ div [ class \"bg-zinc-900 h-screen w-screen\" ]\n            [ case model of\n                Loaded state ->\n                    div [ class \"h-full w-full flex flex-col justify-center items-center\" ]\n                        [ div [ class \"h-1/2 w-3/4 flex flex-row justify-center\" ]\n                            [ div [ class \"h-full w-1/6 rounded-lg drop-shadow-xl m-2 flex flex-col\" ]\n                                [ button\n                                    [ class \"ml-auto bg-emerald-400 hover:bg-emerald-700 ease-in-out duration-75 text-white font-bold py-2 px-4 rounded w-1/2 mb-2\"\n                                    , onClick GenerateNewComm\n                                    ]\n                                    [ text \"Skip\" ]\n                                ]\n                            , div [ class \"h-full w-4/6 bg-cyan-200 rounded-lg drop-shadow-xl m-2\" ]\n                                [ div [ class \"h-full w-full text-center p-6 text-white text-2xl font-bold\", id \"twisty-player-container\" ]\n                                    [ case state.current_setup_alg of\n                                        Just current_setup_alg ->\n                                            text current_setup_alg\n\n                                        _ ->\n                                            text \"No setup alg.\"\n                                    ]\n                                ]\n                            , div [ class \"h-full w-1/6 rounded-lg drop-shadow-xl m-2 flex flex-col\" ]\n                                [ viewToggleButton \"UF\" (UF Nothing) state.settings.toggled_types.uf\n                                , viewToggleButton \"UFR\" (UFR Nothing) state.settings.toggled_types.ufr\n                                , viewToggleButton \"Parity\" (Parity Nothing) state.settings.toggled_types.parity\n                                , viewToggleButton \"2 Flips\" (TwoFlips Nothing) state.settings.toggled_types.two_flips\n                                , viewToggleButton \"2 Twists\" (TwoTwists Nothing) state.settings.toggled_types.two_twists\n                                , viewToggleButton \"3 Twists\" (ThreeTwists Nothing) state.settings.toggled_types.three_twists\n                                ]\n                            ]\n                        , div [ class \"border h-1/3 w-1/2 mt-10 p-5\" ]\n                            [ case ( state.current_comm, state.current_comm |> getComm ) of\n                                ( Just current_comm_obj, Just current_comm ) ->\n                                    div [ class \"h-full w-full flex flex-col justify-center place-content-center p-10\" ]\n                                        [ viewComm current_comm_obj state.settings\n                                        , div\n                                            [ class \"text-3xl text-white font-bold w-3/4 m-auto text-center\"\n                                            , class\n                                                (if state.settings.comm_visible == True then\n                                                    \"\"\n\n                                                 else\n                                                    \"blur\"\n                                                )\n                                            , onClick ToggleCommVisible\n                                            ]\n                                            [ text current_comm ]\n                                        ]\n\n                                ( _, _ ) ->\n                                    h1 [ class \"text-5xl text-white font-bold text-center\" ] [ text \"No active comm\" ]\n                            ]\n                        ]\n\n                Error ->\n                    div [ class \"h-full w-full flex flex-col justify-center items-center\" ]\n                        [ div\n                            [ class \"h-1/2 w-1/2 bg-red-400 rounded-lg drop-shadow-xl p-10\"\n                            , class \"flex flex-col justify-center items-center\"\n                            ]\n                            [ h1 [ class \"text-9xl text-center text-white\" ] [ text \"ERROR\" ]\n                            , h2 [ class \"text-5xl text-center\" ] [ text \"An error occured\" ]\n                            ]\n                        ]\n            ]\n        ]\n    }\n\n\n\n---- PROGRAM ----\n\n\nmain : Program Json.Decode.Value Model Msg\nmain =\n    Browser.application\n        { init = init\n        , view = view\n        , update = update\n        , subscriptions = subscriptions\n        , onUrlRequest = LinkClicked\n        , onUrlChange = UrlChanged\n        }\n","import { randomUIntBelowFactory } from \"../../../../vendor/random-uint-below\";\n\nconst pins = [\"UR\", \"DR\", \"DL\", \"UL\"];\nconst backMoves = [\"U\", \"R\", \"D\", \"L\", \"ALL\"];\nconst frontMoves = pins.concat(backMoves);\n\nconst randomUIntBelowPromise = randomUIntBelowFactory();\n\nexport async function randomClockScrambleString(): Promise<string> {\n  const randomUIntBelow = await randomUIntBelowPromise;\n\n  let filteringMoveCount = 0;\n\n  async function randomSuffix(randomUIntBelow: (max: number) => number) {\n    const amount = randomUIntBelow(12);\n    if (amount !== 0) {\n      filteringMoveCount++;\n    }\n    if (amount <= 6) {\n      return `${amount}+`;\n    } else {\n      return `${12 - amount}-`;\n    }\n  }\n\n  const moves = [];\n  async function side(families: string[]): Promise<void> {\n    for (const family of families) {\n      moves.push(`${family}${await randomSuffix(randomUIntBelow)}`);\n    }\n  }\n\n  await side(frontMoves);\n  moves.push(\"y2\");\n  await side(backMoves);\n\n  // https://www.worldcubeassociation.org/regulations/#4b3\n  if (filteringMoveCount < 2) {\n    return randomClockScrambleString();\n  }\n\n  for (const pin of pins) {\n    if (randomUIntBelow(2) === 0) {\n      moves.push(pin);\n    }\n  }\n  return moves.join(\" \");\n}\n","import { randomUIntBelowFactory } from \"../../../../vendor/random-uint-below\";\n\nconst randomUIntBelowPromise = randomUIntBelowFactory();\n\nconst suffixes = [\"++\", \"--\"];\n\nexport async function randomMegaminxScrambleString(): Promise<string> {\n  const randomUIntBelow = await randomUIntBelowPromise;\n\n  function rdPair(): string {\n    return `R${suffixes[randomUIntBelow(2)]} D${suffixes[randomUIntBelow(2)]}`;\n  }\n\n  function randomU(): string {\n    return `U${[\"\", \"'\"][randomUIntBelow(2)]}`;\n  }\n\n  function row(): string {\n    const chunks = [];\n    for (let i = 0; i < 5; i++) {\n      chunks.push(rdPair());\n    }\n    chunks.push(randomU());\n    return chunks.join(\" \");\n  }\n\n  const chunks = [];\n  for (let i = 0; i < 6; i++) {\n    chunks.push(row());\n  }\n  return chunks.join(\"\\n\");\n}\n","import nodeEndpoint from \"../node-adapter\";\n\nexport { wrap } from \"comlink\";\n// Mangled so that bundlers don't try to inline the source.\n\nconst worker_threads_mangled = \"w-orker-_threa-ds\";\nconst worker_threads_unmangled = () => worker_threads_mangled.replace(/-/g, \"\");\n\nconst useNodeWorkarounds =\n  typeof globalThis.Worker === \"undefined\" &&\n  typeof (globalThis as any).WorkerNavigator === \"undefined\";\n\nasync function nodeWorker(\n  source: string | URL,\n  options?: { eval?: boolean },\n): Promise<Worker> {\n  const { Worker: NodeWorker } = await import(worker_threads_unmangled());\n  const worker = new NodeWorker(source, options);\n  worker.unref();\n  return nodeEndpoint(worker);\n}\n\nexport async function constructWorker(\n  source: string | URL,\n  options?: { eval?: boolean; type?: WorkerType },\n): Promise<Worker> {\n  let worker;\n  if (useNodeWorkarounds) {\n    return nodeWorker(source, { eval: options?.eval });\n  } else {\n    if (options?.eval) {\n      const blob = new Blob([source as string], {\n        type: \"application/javascript\",\n      });\n      source = URL.createObjectURL(blob);\n    }\n    worker = new globalThis.Worker(source, {\n      type: options ? options.type : undefined, // TODO: Is it safe to use `options?.type`?\n    });\n  }\n  return worker;\n}\n","import { exposeAPI } from \"./worker-guard\";\n\nexposeAPI.expose = false;\nexport async function getWorkerEntryFileURL() {\n  return (await import(\"./search-worker-ts-entry\")).WORKER_ENTRY_FILE_URL;\n}\n","import { constructWorker, wrap } from \"../vendor/comlink-everywhere/outside\";\nimport type { WorkerInsideAPI } from \"./inside/api\";\nimport { getWorkerEntryFileURL } from \"./inside/search-worker-ts-entry-path-getter\";\n\nconst MODULE_WORKER_TIMEOUT_MILLISECONDS = 5000;\nexport async function instantiateModuleWorker(): Promise<WorkerInsideAPI> {\n  // eslint-disable-next-line no-async-promise-executor\n  return new Promise<WorkerInsideAPI>(async (resolve, reject) => {\n    const timeoutID = setTimeout(() => {\n      reject(new Error(\"module instantiation timeout\"));\n    }, MODULE_WORKER_TIMEOUT_MILLISECONDS);\n\n    try {\n      const workerEntryFileURL = await getWorkerEntryFileURL();\n      if (!workerEntryFileURL) {\n        // This happens in `bundle-global`.\n        reject(new Error(\"Could not get worker entry file URL.\"));\n      }\n      let url: string | URL;\n      if (globalThis.Blob) {\n        // Standard browser-like environment.\n        const importSrc = `import \"${workerEntryFileURL}\";`;\n        const blob = new Blob([importSrc], {\n          type: \"text/javascript\",\n        });\n        url = URL.createObjectURL(blob);\n      } else {\n        // `node` doesn't have `Blob`. We can keep the original entry file URL there, but we have to wrap it.\n        // Needed for `node`\n        url = new URL(workerEntryFileURL);\n      }\n\n      const worker = (await constructWorker(url, {\n        type: \"module\",\n      })) as Worker & {\n        nodeWorker?: import(\"worker_threads\").Worker;\n      };\n\n      const onError = (e: ErrorEvent) => {\n        // TODO: Remove fallback when Firefox implements module workers: https://bugzilla.mozilla.org/show_bug.cgi?id=1247687\n        if (e.message?.startsWith(\"SyntaxError\")) {\n          reject(e);\n        }\n      };\n\n      const onFirstMessage = (messageData: string) => {\n        if (messageData === \"comlink-exposed\") {\n          // We need to clear the timeout so that we don't prevent `node` from exiting in the meantime.\n          clearTimeout(timeoutID);\n          resolve(wrap<WorkerInsideAPI>(worker));\n        } else {\n          reject(\n            new Error(\"wrong module instantiation message \" + messageData),\n          );\n        }\n      };\n\n      if (worker.nodeWorker) {\n        // We have to use `once` so the `unref()` from `comlink-everywhere` allows the process to quite as expected.\n        worker.nodeWorker.once(\"message\", onFirstMessage);\n      } else {\n        worker.addEventListener(\"error\", onError, {\n          once: true,\n        });\n        worker.addEventListener(\"message\", (e) => onFirstMessage(e.data), {\n          once: true,\n        });\n      }\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nexport async function instantiateWorker(): Promise<WorkerInsideAPI> {\n  try {\n    // `await` is important for `catch` to work.\n    return await instantiateModuleWorker();\n  } catch (e) {\n    console.warn(\n      \"Could not instantiate module worker (this is expected in Firefox and `bundle-global`). Falling back to string worker.\",\n      e,\n    );\n    const { workerSource } = await import(\n      \"./worker-inside-generated-string.js\"\n    );\n    const worker = await constructWorker(workerSource, { eval: true });\n    return wrap(worker);\n  }\n}\n","import { Alg } from \"../alg\";\n// import { preInitialize222 } from \"../implementations/2x2x2\";\nimport { randomClockScrambleString } from \"./inside/solve/puzzles/clock\"; // TODO: don't reach into `inside` code.\nimport { randomMegaminxScrambleString } from \"./inside/solve/puzzles/wca-minx\"; // TODO: don't reach into `inside` code.\nimport { instantiateWorker } from \"./instantiator\";\nimport type { WorkerInsideAPI } from \"./inside/api\";\nimport type { KState } from \"../kpuzzle/KState\";\n\nlet cachedWorkerInstance: Promise<WorkerInsideAPI> | null = null;\nasync function getCachedWorkerInstance(): Promise<WorkerInsideAPI> {\n  return await (cachedWorkerInstance ??= instantiateWorker());\n}\n\n// Pre-initialize the scrambler for the given event. (Otherwise, an event is\n// initialized the first time you ask for a scramble for that event.)\n//\n// Some typical numbers for a fast computer:\n// - 3x3x3 initialization: 200ms\n// - Each 3x3x3 scramble: 50ms\n// - 4x4x4 initialization: 2500ms\n// - Each 4x4x4 scramble: 300ms to 800ms\n//\n// It is safe to immediately call for a scramble\n// any time after starting pre-initialization, or to call for them without\n// pre-initializing. Pre-initializing essentially gives the scramble worker a\n// head start in case a scramble doesn't get requested immediately.\n//\n// Note that events cannot be pre-initialized in parallel. Attempting to\n// pre-initialize multiple events will initialize them consecutively. Scrambles\n// for a given event cannot be computed while another event is being initialized.\nexport function _preInitializationHintForEvent(\n  eventID: string,\n  // callback?: () => void\n): void {\n  switch (eventID) {\n    case \"clock\":\n    case \"minx\":\n      return;\n    case \"333oh\":\n      return _preInitializationHintForEvent(\"333\");\n  }\n  (async () => {\n    await (await getCachedWorkerInstance()).initialize(eventID);\n  })();\n}\n\nexport async function randomScrambleForEvent(eventID: string): Promise<Alg> {\n  switch (eventID) {\n    case \"clock\":\n      return Alg.fromString(await randomClockScrambleString());\n    case \"minx\":\n      return Alg.fromString(await randomMegaminxScrambleString());\n  }\n  const prom = _randomScrambleStringForEvent(eventID);\n  const wat = await prom;\n  return Alg.fromString(wat);\n}\n\nexport async function _randomScrambleStringForEvent(\n  eventID: string,\n): Promise<string> {\n  const cwi = await getCachedWorkerInstance();\n  return cwi.randomScrambleStringForEvent(eventID);\n}\n\nexport async function randomScrambleStringForEvent(\n  eventID: string,\n): Promise<string> {\n  switch (eventID) {\n    case \"clock\":\n      return randomClockScrambleString();\n    case \"minx\":\n      return randomMegaminxScrambleString();\n  }\n  return await _randomScrambleStringForEvent(eventID);\n}\n\nexport async function experimentalSolve3x3x3IgnoringCenters(\n  state: KState,\n): Promise<Alg> {\n  const cwi = await getCachedWorkerInstance();\n  return Alg.fromString(await cwi.solve333ToString(state.stateData));\n}\n\nexport async function experimentalSolve2x2x2(state: KState): Promise<Alg> {\n  const cwi = await getCachedWorkerInstance();\n  return Alg.fromString(await cwi.solve222ToString(state.stateData));\n}\n\nexport async function solveSkewb(state: KState): Promise<Alg> {\n  const cwi = await getCachedWorkerInstance();\n  return Alg.fromString(await cwi.solveSkewbToString(state.stateData));\n}\n\nexport async function solvePyraminx(state: KState): Promise<Alg> {\n  const cwi = await getCachedWorkerInstance();\n  return Alg.fromString(await cwi.solvePyraminxToString(state.stateData));\n}\n\nexport async function solveMegaminx(state: KState): Promise<Alg> {\n  const cwi = await getCachedWorkerInstance();\n  return Alg.fromString(await cwi.solveMegaminxToString(state.stateData));\n}\n\nexport function setDebug(options: { logPerf?: boolean }): void {\n  const { logPerf } = options;\n  if (typeof logPerf !== \"undefined\") {\n    getCachedWorkerInstance().then((cwi) => cwi.setDebugMeasurePerf(logPerf));\n  }\n}\n","import type { Move } from \"../../alg\";\nimport type { KState } from \"../../kpuzzle/KState\";\n\nexport type MillisecondTimestamp = number;\n\n// TODO: unify duration/timstamp types\nexport type Duration = MillisecondTimestamp; // Duration in milliseconds\n// TODO: Extend `number`, introduce MoveSequenceTimestamp vs. EpochTimestamp,\n// force Duration to be a difference.\nexport type Timestamp = MillisecondTimestamp; // Duration since a particular epoch.\n\nexport type Fraction = number; // Value from 0 to 1.\n\n// 1, 0, -1 are used as scalars for `directionScalar` below.\nexport enum Direction {\n  Forwards = 1,\n  Paused = 0,\n  Backwards = -1,\n}\n\nexport function directionScalar(direction: Direction): MillisecondTimestamp {\n  return direction;\n}\n\nexport interface MoveInProgress {\n  move: Move;\n  direction: Direction;\n  fraction: number;\n}\n\nexport type PuzzlePosition = {\n  state: KState;\n  movesInProgress: MoveInProgress[];\n};\n\nexport enum BoundaryType {\n  Move = \"move\",\n  EntireTimeline = \"entire-timeline\",\n}\n\nexport interface TimeRange {\n  start: MillisecondTimestamp;\n  end: MillisecondTimestamp;\n}\n\n// export type DurationForAmount = (amount: number) => Duration;\n\nexport interface PositionListener {\n  onPositionChange(position: PuzzlePosition): void;\n}\n","// Debounces `requestAnimationFrame()`.\nexport class RenderScheduler {\n  private animFrameID: number | null = null;\n  private animFrame = this.animFrameWrapper.bind(this);\n  constructor(private callback: (timestamp: DOMHighResTimeStamp) => void) {}\n  requestAnimFrame(): void {\n    if (!this.animFrameID) {\n      this.animFrameID = requestAnimationFrame(this.animFrame);\n    }\n  }\n\n  cancelAnimFrame(): void {\n    if (this.animFrameID) {\n      cancelAnimationFrame(this.animFrameID);\n      this.animFrameID = 0;\n    }\n  }\n\n  private animFrameWrapper(timestamp: DOMHighResTimeStamp): void {\n    this.animFrameID = 0;\n    this.callback(timestamp);\n  }\n}\n\n// An interface for classes to use to expose their scheduling.\nexport interface Schedulable {\n  scheduleRender(): void;\n}\n","export function arrayEquals<T>(a: readonly T[], b: readonly T[]): boolean {\n  if (a === b) {\n    return true;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function arrayEqualsCompare<T>(\n  a: readonly T[],\n  b: readonly T[],\n  compare: (a: T, b: T) => boolean,\n): boolean {\n  if (a === b) {\n    return true;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n  for (let i = 0; i < a.length; i++) {\n    if (!compare(a[i], b[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// Assumes `offset > 0`. Will produce invalid values if not!\n// We don't check for that, since this can be a hot path.\nexport function mod(v: number, m: number, offset = 0): number {\n  return (((v % m) + m + offset) % m) - offset;\n}\n\nexport function modIntoRange(\n  v: number,\n  rangeMin: number,\n  rangeMax: number,\n): number {\n  return mod(v - rangeMin, rangeMax - rangeMin) + rangeMin;\n}\n","import {\n  BoundaryType,\n  Direction,\n  directionScalar,\n  MillisecondTimestamp,\n  TimeRange,\n} from \"./AnimationTypes\";\nimport { RenderScheduler } from \"./RenderScheduler\";\nimport type {\n  PlayingInfo,\n  SimpleDirection,\n} from \"../model/props/timeline/PlayingInfoProp\";\nimport type { TwistyPlayerModel } from \"../model/TwistyPlayerModel\";\nimport { StaleDropper } from \"../model/PromiseFreshener\";\nimport type { CurrentMoveInfo } from \"./indexer/AlgIndexer\";\nimport type { TimestampRequest } from \"../model/props/timeline/TimestampRequestProp\";\nimport { modIntoRange } from \"../model/helpers\";\nimport type { CatchUpMove } from \"../model/props/puzzle/state/CatchUpMoveProp\";\n\n// TODO: Figure out a better way for the controller to instruct the player.\nexport interface TwistyAnimationControllerDelegate {\n  flash(): void;\n}\n\n// We use a separate helper to separate the anim frame callbacks (and their cancellations).\n// TODO: fold this into the main controller\nclass CatchUpHelper {\n  catchingUp: boolean = false;\n  pendingFrame = false;\n\n  constructor(private model: TwistyPlayerModel) {}\n\n  private scheduler: RenderScheduler = new RenderScheduler(\n    this.animFrame.bind(this),\n  );\n\n  start(): void {\n    if (!this.catchingUp) {\n      this.lastTimestamp = performance.now();\n    }\n    this.catchingUp = true;\n    this.pendingFrame = true;\n    this.scheduler.requestAnimFrame();\n  }\n\n  stop(): void {\n    this.catchingUp = false;\n    this.scheduler.cancelAnimFrame();\n  }\n\n  catchUpMs = 500;\n  lastTimestamp = 0;\n  animFrame(timestamp: MillisecondTimestamp): void {\n    this.scheduler.requestAnimFrame();\n    const delta = (timestamp - this.lastTimestamp) / this.catchUpMs;\n    this.lastTimestamp = timestamp;\n\n    this.model.catchUpMove.set(\n      (async () => {\n        const previousCatchUpMove = await this.model.catchUpMove.get();\n        if (previousCatchUpMove.move === null) {\n          return previousCatchUpMove;\n        }\n\n        const amount = previousCatchUpMove.amount + delta; // TODO: use tempo scale?\n        if (amount >= 1) {\n          this.pendingFrame = true;\n          this.stop();\n          this.model.timestampRequest.set(\"end\");\n          return {\n            move: null,\n            amount: 0,\n          };\n        }\n        this.pendingFrame = false;\n        return {\n          move: previousCatchUpMove.move,\n          amount: amount,\n        };\n      })(),\n    );\n  }\n}\n\n// This controls the logic for animation, so that the main controller can focus on the right API abstractions.\nexport class TwistyAnimationController {\n  // TODO: #private?\n  private playing: boolean = false;\n  private direction: Direction = Direction.Forwards;\n\n  private catchUpHelper: CatchUpHelper;\n\n  private model: TwistyPlayerModel;\n\n  private lastDatestamp: MillisecondTimestamp = 0;\n  private lastTimestampPromise: Promise<MillisecondTimestamp>;\n\n  private scheduler: RenderScheduler = new RenderScheduler(\n    this.animFrame.bind(this),\n  );\n\n  constructor(\n    model: TwistyPlayerModel,\n    private delegate: TwistyAnimationControllerDelegate,\n  ) {\n    this.model = model;\n    this.lastTimestampPromise = this.#effectiveTimestampMilliseconds();\n\n    this.model.playingInfo.addFreshListener(this.onPlayingProp.bind(this)); // TODO\n\n    this.catchUpHelper = new CatchUpHelper(this.model);\n    this.model.catchUpMove.addFreshListener(this.onCatchUpMoveProp.bind(this)); // TODO\n  }\n\n  // TODO: Do we need this?\n  async onPlayingProp(playingInfo: PlayingInfo): Promise<void> {\n    if (playingInfo.playing !== this.playing) {\n      playingInfo.playing ? this.play(playingInfo) : this.pause();\n    }\n  }\n\n  // TODO: Do we need this?\n  async onCatchUpMoveProp(catchUpMove: CatchUpMove): Promise<void> {\n    const catchingUp = catchUpMove.move !== null;\n    if (catchingUp !== this.catchUpHelper.catchingUp) {\n      catchingUp ? this.catchUpHelper.start() : this.catchUpHelper.stop();\n    }\n    this.scheduler.requestAnimFrame();\n  }\n\n  async #effectiveTimestampMilliseconds(): Promise<MillisecondTimestamp> {\n    return (await this.model.detailedTimelineInfo.get()).timestamp;\n  }\n\n  // TODO: Return the animation we've switched to.\n  jumpToStart(options?: { flash: boolean }): void {\n    this.model.timestampRequest.set(\"start\");\n    this.pause();\n    if (options?.flash) {\n      this.delegate.flash();\n    }\n  }\n\n  // TODO: Return the animation we've switched to.\n  jumpToEnd(options?: { flash: boolean }): void {\n    this.model.timestampRequest.set(\"end\");\n    this.pause();\n    if (options?.flash) {\n      this.delegate.flash();\n    }\n  }\n\n  // TODO: Return the playing info we've switched to.\n  playPause(): void {\n    if (this.playing) {\n      this.pause();\n    } else {\n      this.play(); // TODO: Resume direction and looping behaviour?\n    }\n  }\n\n  // TODO: bundle playing direction, and boundary into `toggle`.\n  async play(options?: {\n    direction?: SimpleDirection;\n    untilBoundary?: BoundaryType;\n    autoSkipToOtherEndIfStartingAtBoundary?: boolean; // TODO What's a good short name that doesn't imply a more general looping concept?\n    loop?: boolean;\n  }): Promise<void> {\n    // TODO: We might need to cache all playing info?\n    // Or maybe we don't have to worry about short-circuiting, since this is idempotent?\n    // if (this.playing) {\n    //   return;\n    // }\n\n    const direction = options?.direction ?? Direction.Forwards;\n\n    const coarseTimelineInfo = await this.model.coarseTimelineInfo.get(); // TODO: Why do we need to read this if we don't use it?\n    if (options?.autoSkipToOtherEndIfStartingAtBoundary ?? true) {\n      if (direction === Direction.Forwards && coarseTimelineInfo.atEnd) {\n        this.model.timestampRequest.set(\"start\");\n        this.delegate.flash();\n      }\n      if (direction === Direction.Backwards && coarseTimelineInfo.atStart) {\n        this.model.timestampRequest.set(\"end\");\n        this.delegate.flash();\n      }\n    }\n    this.model.playingInfo.set({\n      playing: true,\n      direction,\n      untilBoundary: options?.untilBoundary ?? BoundaryType.EntireTimeline,\n      loop: options?.loop ?? false,\n    });\n\n    this.playing = true;\n    this.lastDatestamp = performance.now(); // TODO: Take from event.\n    this.lastTimestampPromise = this.#effectiveTimestampMilliseconds();\n\n    // TODO: Save timestamp from model?\n    this.scheduler.requestAnimFrame();\n  }\n\n  pause(): void {\n    this.playing = false;\n    this.scheduler.cancelAnimFrame();\n    this.model.playingInfo.set({\n      playing: false,\n      untilBoundary: BoundaryType.EntireTimeline,\n    });\n  }\n\n  #animFrameEffectiveTimestampStaleDropper: StaleDropper<\n    [PlayingInfo, MillisecondTimestamp, TimeRange, number, CurrentMoveInfo]\n  > = new StaleDropper<\n    [PlayingInfo, MillisecondTimestamp, TimeRange, number, CurrentMoveInfo]\n  >();\n\n  async animFrame(frameDatestamp: MillisecondTimestamp): Promise<void> {\n    if (this.playing) {\n      this.scheduler.requestAnimFrame();\n    }\n\n    const lastDatestamp = this.lastDatestamp;\n    const freshenerResult =\n      await this.#animFrameEffectiveTimestampStaleDropper.queue(\n        Promise.all([\n          this.model.playingInfo.get(),\n          this.lastTimestampPromise,\n          this.model.timeRange.get(),\n          this.model.tempoScale.get(),\n          this.model.currentMoveInfo.get(),\n        ]),\n      );\n\n    const [playingInfo, lastTimestamp, timeRange, tempoScale, currentMoveInfo] =\n      freshenerResult;\n\n    // TODO: Get this without wasting time on the others?\n    if (!playingInfo.playing) {\n      this.playing = false;\n      // TODO: Ideally we'd cancel the anim frame from the top of this method.\n      // But `this.scheduler.cancelAnimFrame();` might accidentally cancel a\n      // legit freshly scheduled frame. We should modify `RenderScheduler` to\n      // either have individually cancellable requests, or to have something\n      // like a \"default\" anim frame re-request that can be canceled separately.\n      //\n      // Note that we can't wait until here to call\n      // `this.scheduler.requestAnimFrame();`, because that would slow down the\n      // frame rate.\n      return;\n    }\n\n    let end = currentMoveInfo.earliestEnd; // timeRange.end\n    if (\n      currentMoveInfo.currentMoves.length === 0 ||\n      playingInfo.untilBoundary === BoundaryType.EntireTimeline\n    ) {\n      end = timeRange.end;\n    }\n\n    let start = currentMoveInfo.latestStart; // timeRange.end\n    if (\n      currentMoveInfo.currentMoves.length === 0 ||\n      playingInfo.untilBoundary === BoundaryType.EntireTimeline\n    ) {\n      start = timeRange.start;\n    }\n    // const start = currentMoveInfo.latestStart; // timeRange.start // TODO\n\n    let delta =\n      (frameDatestamp - lastDatestamp) *\n      directionScalar(this.direction) *\n      tempoScale;\n    delta = Math.max(delta, 1); // TODO: This guards against the timestamp going in the wrong direction by accident. Can we avoid it?\n    delta *= playingInfo.direction;\n    let newTimestamp = lastTimestamp + delta; // TODO: Pre-emptively clamp.\n    let newSmartTimestampRequest: Exclude<TimestampRequest, number> | null =\n      null;\n\n    if (newTimestamp >= end) {\n      if (playingInfo.loop) {\n        newTimestamp = modIntoRange(\n          newTimestamp,\n          timeRange.start,\n          timeRange.end,\n        );\n      } else {\n        if (newTimestamp === timeRange.end) {\n          newSmartTimestampRequest = \"end\";\n        } else {\n          newTimestamp = end;\n        }\n        this.playing = false;\n        this.model.playingInfo.set({\n          playing: false,\n        });\n      }\n    } else if (newTimestamp <= start) {\n      if (playingInfo.loop) {\n        newTimestamp = modIntoRange(\n          newTimestamp,\n          timeRange.start,\n          timeRange.end,\n        );\n      } else {\n        if (newTimestamp === timeRange.start) {\n          newSmartTimestampRequest = \"start\";\n        } else {\n          newTimestamp = start;\n        }\n        this.playing = false;\n        this.model.playingInfo.set({\n          playing: false,\n        });\n      }\n    }\n    this.lastDatestamp = frameDatestamp;\n    this.lastTimestampPromise = Promise.resolve(newTimestamp); // TODO: Save this earlier? / Do we need to worry about the effecitve timestamp disagreeing?\n    this.model.timestampRequest.set(newSmartTimestampRequest ?? newTimestamp);\n  }\n}\n","import type { TwistyPlayerModel } from \"../model/TwistyPlayerModel\";\nimport {\n  TwistyAnimationController,\n  TwistyAnimationControllerDelegate,\n} from \"./TwistyAnimationController\";\n\nexport class TwistyPlayerController {\n  animationController: TwistyAnimationController;\n\n  constructor(\n    private model: TwistyPlayerModel,\n    delegate: TwistyAnimationControllerDelegate,\n  ) {\n    this.animationController = new TwistyAnimationController(model, delegate);\n  }\n\n  jumpToStart(options?: { flash: boolean }): void {\n    this.animationController.jumpToStart(options);\n  }\n\n  jumpToEnd(options?: { flash: boolean }): void {\n    this.animationController.jumpToEnd(options);\n  }\n\n  togglePlay(play?: boolean) {\n    if (typeof play === \"undefined\") {\n      this.animationController.playPause();\n    }\n    play ? this.animationController.play() : this.animationController.pause();\n  }\n\n  public async visitTwizzleLink(): Promise<void> {\n    const a = document.createElement(\"a\");\n    a.href = await this.model.twizzleLink();\n    a.target = \"_blank\";\n    a.click();\n  }\n}\n","// Workarounds for `node`.\n// TODO: figure out how to remove this.\n\n// This stub does not need to be callable, just constructable to satisfy the `node` loader.\nclass HTMLElementStub {}\n\nlet HTMLElementShim: typeof HTMLElement;\nif (globalThis.HTMLElement) {\n  HTMLElementShim = HTMLElement;\n} else {\n  HTMLElementShim = HTMLElementStub as any;\n}\n\nexport { HTMLElementShim };\n\nclass CustomElementsStub {\n  define(): void {\n    // nothing\n  }\n}\n\nlet customElementsShim: typeof customElements;\n\nif (globalThis.customElements) {\n  customElementsShim = customElements;\n} else {\n  customElementsShim = new CustomElementsStub() as any;\n}\n\nexport { customElementsShim };\n","import { SimpleTwistyPropSource } from \"../TwistyProp\";\n\nexport const controlsLocations = {\n  \"bottom-row\": true, // default\n  \"none\": true,\n};\nexport type ControlsLocation = keyof typeof controlsLocations;\nexport type ControlPanelThemeWithAuto = ControlsLocation | \"auto\";\n\nexport class ControlPanelProp extends SimpleTwistyPropSource<ControlPanelThemeWithAuto> {\n  getDefaultValue(): ControlPanelThemeWithAuto {\n    return \"auto\";\n  }\n}\n","import {\n  HTMLElementShim,\n  customElementsShim,\n} from \"./node-custom-element-shims\";\n\nexport class CSSSource {\n  constructor(private sourceText: string) {\n    // TODO: Replace with adopted style sheets some day if we can.\n    // const blob = new Blob([sourceText], {\n    //   type: \"text/utf8\",\n    // });\n    // this.url = URL.createObjectURL(blob);\n  }\n\n  getAsString(): string {\n    return this.sourceText;\n  }\n}\n\n// - Wrapped element\n//   - Shadow root\n//     - Content wrapper\nexport class ManagedCustomElement extends HTMLElementShim {\n  public readonly shadow: ShadowRoot; // TODO: hide this\n  public readonly contentWrapper: HTMLDivElement; // TODO: can we get rid of this wrapper?\n\n  #cssSourceMap: Map<CSSSource, HTMLStyleElement> = new Map();\n  constructor(options?: { mode: \"open\" | \"closed\" }) {\n    super();\n    this.shadow = this.attachShadow({ mode: options?.mode ?? \"closed\" });\n\n    this.contentWrapper = document.createElement(\"div\");\n    this.contentWrapper.classList.add(\"wrapper\");\n    this.shadow.appendChild(this.contentWrapper);\n  }\n\n  // Add the source, if not already added.\n  // Returns the existing if it's already on the element.\n  public addCSS(cssSource: CSSSource): HTMLStyleElement {\n    const existing = this.#cssSourceMap.get(cssSource);\n    if (existing) {\n      return existing;\n    }\n\n    const cssElem: HTMLStyleElement = document.createElement(\"style\");\n    cssElem.textContent = cssSource.getAsString();\n\n    this.#cssSourceMap.set(cssSource, cssElem);\n    this.shadow.appendChild(cssElem);\n    return cssElem;\n  }\n\n  // Remove the source, if it's currently added.\n  public removeCSS(cssSource: CSSSource): void {\n    const cssElem = this.#cssSourceMap.get(cssSource);\n    if (!cssElem) {\n      return;\n    }\n    this.shadow.removeChild(cssElem);\n    this.#cssSourceMap.delete(cssSource);\n  }\n\n  public addElement<T extends Node>(element: T): T {\n    return this.contentWrapper.appendChild(element);\n  }\n\n  public prependElement<T extends Node>(element: T): void {\n    this.contentWrapper.prepend(element);\n  }\n\n  public removeElement<T extends Node>(element: T): T {\n    return this.contentWrapper.removeChild(element);\n  }\n}\n\ncustomElementsShim.define(\n  \"twisty-managed-custom-element\",\n  ManagedCustomElement,\n);\n","import { CSSSource } from \"./ManagedCustomElement\";\n\nexport const twistyViewerWrapperCSS = new CSSSource(`\n:host {\n  width: 384px;\n  height: 256px;\n  display: grid;\n}\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  overflow: hidden;\n}\n\n.wrapper > * {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n.wrapper.back-view-side-by-side {\n  grid-template-columns: 1fr 1fr;\n}\n\n.wrapper.back-view-top-right {\n  grid-template-columns: 3fr 1fr;\n  grid-template-rows: 1fr 3fr;\n}\n\n.wrapper.back-view-top-right > :nth-child(1) {\n  grid-row: 1 / 3;\n  grid-column: 1 / 3;\n}\n\n.wrapper.back-view-top-right > :nth-child(2) {\n  grid-row: 1 / 2;\n  grid-column: 2 / 3;\n}\n`);\n","import { CSSSource } from \"../ManagedCustomElement\";\n\n// TODO: Can we do this without so much nesting, and styling all the nested elems?\nexport const twisty2DSVGCSS = new CSSSource(`\n:host {\n  width: 384px;\n  height: 256px;\n  display: grid;\n}\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  overflow: hidden;\n}\n\n.svg-wrapper,\ntwisty-2d-svg,\nsvg {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  min-height: 0;\n}\n\nsvg {\n  animation: fade-in 0.25s ease-in;\n}\n\n@keyframes fade-in {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n`);\n","import type { KPuzzle } from \"../../../kpuzzle\";\nimport type { KState } from \"../../../kpuzzle/KState\";\nimport type {\n  FaceletMeshAppearance,\n  PuzzleAppearance,\n} from \"../../../puzzles/stickerings/appearance\"; // TODO\nconst xmlns = \"http://www.w3.org/2000/svg\";\n\n// Unique ID mechanism to keep SVG gradient element IDs unique. TODO: Is there\n// something more performant, and that can't be broken by other elements of the\n// page? (And also doesn't break if this library is run in parallel.)\nlet svgCounter = 0;\nfunction nextSVGID(): string {\n  svgCounter += 1;\n  return \"svg\" + svgCounter.toString();\n}\n\n// TODO: This is hardcoded to 3x3x3 SVGs\nconst colorMaps: Partial<\n  Record<FaceletMeshAppearance, Record<string, string>>\n> = {\n  dim: {\n    \"white\": \"#dddddd\",\n    \"orange\": \"#884400\",\n    \"limegreen\": \"#008800\",\n    \"red\": \"#660000\",\n    \"rgb(34, 102, 255)\": \"#000088\", // TODO\n    \"yellow\": \"#888800\",\n  },\n  oriented: {\n    \"white\": \"#44ddcc\",\n    \"orange\": \"#44ddcc\",\n    \"limegreen\": \"#44ddcc\",\n    \"red\": \"#44ddcc\",\n    \"rgb(34, 102, 255)\": \"#44ddcc\", // TODO\n    \"yellow\": \"#44ddcc\",\n  },\n  ignored: {\n    \"white\": \"#444444\",\n    \"orange\": \"#444444\",\n    \"limegreen\": \"#444444\",\n    \"red\": \"#444444\",\n    \"rgb(34, 102, 255)\": \"#444444\", // TODO\n    \"yellow\": \"#444444\",\n  },\n  invisible: {\n    \"white\": \"#00000000\",\n    \"orange\": \"#00000000\",\n    \"limegreen\": \"#00000000\",\n    \"red\": \"#00000000\",\n    \"rgb(34, 102, 255)\": \"#00000000\", // TODO\n    \"yellow\": \"#00000000\",\n  },\n};\n\nexport class KPuzzleSVGWrapper {\n  public element: HTMLElement;\n  public gradientDefs: SVGDefsElement;\n  private originalColors: { [type: string]: string } = {};\n  private gradients: { [type: string]: SVGGradientElement } = {};\n  private svgID: string;\n  constructor(\n    public kpuzzle: KPuzzle,\n    svgSource: string,\n    experimentalAppearance?: PuzzleAppearance,\n  ) {\n    if (!svgSource) {\n      throw new Error(`No SVG definition for puzzle type: ${kpuzzle.name()}`);\n    }\n\n    this.svgID = nextSVGID();\n\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"svg-wrapper\");\n    // TODO: Sanitization.\n    this.element.innerHTML = svgSource;\n\n    const svgElem = this.element.querySelector(\"svg\");\n    if (!svgElem) {\n      throw new Error(\"Could not get SVG element\");\n    }\n    if (xmlns !== svgElem.namespaceURI) {\n      throw new Error(\"Unexpected XML namespace\");\n    }\n    svgElem.style.maxWidth = \"100%\";\n    svgElem.style.maxHeight = \"100%\";\n    this.gradientDefs = document.createElementNS(xmlns, \"defs\");\n    svgElem.insertBefore(this.gradientDefs, svgElem.firstChild);\n\n    for (const orbitName in kpuzzle.definition.orbits) {\n      const orbitDefinition = kpuzzle.definition.orbits[orbitName];\n\n      for (let idx = 0; idx < orbitDefinition.numPieces; idx++) {\n        for (\n          let orientation = 0;\n          orientation < orbitDefinition.numOrientations;\n          orientation++\n        ) {\n          const id = this.elementID(orbitName, idx, orientation);\n          const elem = this.elementByID(id);\n          let originalColor: string = elem.style.fill;\n          /// TODO: Allow setting appearance dynamically.\n          if (experimentalAppearance) {\n            (() => {\n              // TODO: dedup with Cube3D,,factor out fallback calculations\n              const a = experimentalAppearance.orbits;\n              if (!a) {\n                return;\n              }\n              const orbitAppearance = a[orbitName];\n              if (!orbitAppearance) {\n                return;\n              }\n              const pieceAppearance = orbitAppearance.pieces[idx];\n              if (!pieceAppearance) {\n                return;\n              }\n              const faceletAppearance = pieceAppearance.facelets[orientation];\n              if (!faceletAppearance) {\n                return;\n              }\n              const appearance =\n                typeof faceletAppearance === \"string\"\n                  ? faceletAppearance\n                  : faceletAppearance?.appearance;\n              const colorMap = colorMaps[appearance];\n              if (colorMap) {\n                originalColor = colorMap[originalColor];\n              }\n            })();\n          } else {\n            originalColor = elem.style.fill;\n          }\n          this.originalColors[id] = originalColor;\n          this.gradients[id] = this.newGradient(id, originalColor);\n          this.gradientDefs.appendChild(this.gradients[id]);\n          elem.setAttribute(\"style\", `fill: url(#grad-${this.svgID}-${id})`);\n        }\n      }\n    }\n  }\n\n  public drawState(state: KState, nextState?: KState, fraction?: number): void {\n    this.draw(state, nextState, fraction);\n  }\n\n  // TODO: save definition in the constructor?\n  public draw(state: KState, nextState?: KState, fraction?: number): void {\n    const transformation = state.experimentalToTransformation();\n    const nextTransformation = nextState?.experimentalToTransformation();\n    if (!transformation) {\n      throw new Error(\"Distinguishable pieces are not handled for SVG yet!\");\n    }\n\n    for (const orbitName in transformation.kpuzzle.definition.orbits) {\n      const orbitDefinition =\n        transformation.kpuzzle.definition.orbits[orbitName];\n\n      const curTransformationOrbit =\n        transformation.transformationData[orbitName];\n      const nextTransformationOrbit = nextTransformation\n        ? nextTransformation.transformationData[orbitName]\n        : null;\n      for (let idx = 0; idx < orbitDefinition.numPieces; idx++) {\n        for (\n          let orientation = 0;\n          orientation < orbitDefinition.numOrientations;\n          orientation++\n        ) {\n          const id = this.elementID(orbitName, idx, orientation);\n          const fromCur = this.elementID(\n            orbitName,\n            curTransformationOrbit.permutation[idx],\n            (orbitDefinition.numOrientations -\n              curTransformationOrbit.orientation[idx] +\n              orientation) %\n              orbitDefinition.numOrientations,\n          );\n          let singleColor = false;\n          if (nextTransformationOrbit) {\n            const fromNext = this.elementID(\n              orbitName,\n              nextTransformationOrbit.permutation[idx],\n              (orbitDefinition.numOrientations -\n                nextTransformationOrbit.orientation[idx] +\n                orientation) %\n                orbitDefinition.numOrientations,\n            );\n            if (fromCur === fromNext) {\n              singleColor = true; // TODO: Avoid redundant work during move.\n            }\n            fraction = fraction || 0; // TODO Use the type system to tie this to nextState?\n            const easedBackwardsPercent =\n              100 * (1 - fraction * fraction * (2 - fraction * fraction)); // TODO: Move easing up the stack.\n            this.gradients[id].children[0].setAttribute(\n              \"stop-color\",\n              this.originalColors[fromCur],\n            );\n            this.gradients[id].children[1].setAttribute(\n              \"stop-color\",\n              this.originalColors[fromCur],\n            );\n            this.gradients[id].children[1].setAttribute(\n              \"offset\",\n              `${Math.max(easedBackwardsPercent - 5, 0)}%`,\n            );\n            this.gradients[id].children[2].setAttribute(\n              \"offset\",\n              `${Math.max(easedBackwardsPercent - 5, 0)}%`,\n            );\n            this.gradients[id].children[3].setAttribute(\n              \"offset\",\n              `${easedBackwardsPercent}%`,\n            );\n            this.gradients[id].children[4].setAttribute(\n              \"offset\",\n              `${easedBackwardsPercent}%`,\n            );\n            this.gradients[id].children[4].setAttribute(\n              \"stop-color\",\n              this.originalColors[fromNext],\n            );\n            this.gradients[id].children[5].setAttribute(\n              \"stop-color\",\n              this.originalColors[fromNext],\n            );\n          } else {\n            singleColor = true; // TODO: Avoid redundant work during move.\n          }\n          if (singleColor) {\n            this.gradients[id].children[0].setAttribute(\n              \"stop-color\",\n              this.originalColors[fromCur],\n            );\n            this.gradients[id].children[1].setAttribute(\n              \"stop-color\",\n              this.originalColors[fromCur],\n            );\n            this.gradients[id].children[1].setAttribute(\"offset\", `100%`);\n            this.gradients[id].children[2].setAttribute(\"offset\", `100%`);\n            this.gradients[id].children[3].setAttribute(\"offset\", `100%`);\n            this.gradients[id].children[4].setAttribute(\"offset\", `100%`);\n          }\n          // this.gradients[id]\n          // this.elementByID(id).style.fill = this.originalColors[from];\n        }\n      }\n    }\n  }\n\n  private newGradient(id: string, originalColor: string): SVGGradientElement {\n    const grad = document.createElementNS(\n      xmlns,\n      \"radialGradient\",\n    ) as SVGGradientElement;\n    grad.setAttribute(\"id\", `grad-${this.svgID}-${id}`);\n    grad.setAttribute(\"r\", `70.7107%`); // TODO: Adapt to puzzle.\n    const stopDefs = [\n      { offset: 0, color: originalColor },\n      { offset: 0, color: originalColor },\n      { offset: 0, color: \"black\" },\n      { offset: 0, color: \"black\" },\n      { offset: 0, color: originalColor },\n      { offset: 100, color: originalColor },\n    ];\n    for (const stopDef of stopDefs) {\n      const stop = document.createElementNS(xmlns, \"stop\");\n      stop.setAttribute(\"offset\", `${stopDef.offset}%`);\n      stop.setAttribute(\"stop-color\", stopDef.color);\n      stop.setAttribute(\"stop-opacity\", \"1\");\n      grad.appendChild(stop);\n    }\n    return grad;\n  }\n\n  private elementID(\n    orbitName: string,\n    idx: number,\n    orientation: number,\n  ): string {\n    return orbitName + \"-l\" + idx + \"-o\" + orientation;\n  }\n\n  private elementByID(id: string): HTMLElement {\n    // TODO: Use classes and scope selector to SVG element.\n    return this.element.querySelector(\"#\" + id) as HTMLElement;\n  }\n}\n","import type { PuzzleLoader } from \"../../../puzzles/PuzzleLoader\";\nimport type { PuzzleAppearance } from \"../../../puzzles/stickerings/appearance\";\nimport {\n  Direction,\n  PositionListener,\n  PuzzlePosition,\n} from \"../../controllers/AnimationTypes\";\nimport { RenderScheduler } from \"../../controllers/RenderScheduler\";\nimport { ManagedCustomElement } from \"../ManagedCustomElement\";\nimport { customElementsShim } from \"../node-custom-element-shims\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport { FreshListenerManager } from \"../../model/props/TwistyProp\";\nimport { twisty2DSVGCSS } from \"./Twisty2DPuzzle.css\";\nimport type { ExperimentalStickering, PuzzleID } from \"../..\";\nimport type { KPuzzle } from \"../../../kpuzzle\";\nimport { KPuzzleSVGWrapper } from \"./KPuzzleSVGWrapper\";\n\nexport interface Twisty2DPuzzleOptions {\n  experimentalStickering?: ExperimentalStickering;\n}\n\n// <twisty-2d-svg>\nexport class Twisty2DPuzzle\n  extends ManagedCustomElement\n  implements PositionListener\n{\n  public svg: KPuzzleSVGWrapper;\n  private scheduler = new RenderScheduler(this.render.bind(this));\n  #cachedPosition: PuzzlePosition | null = null; // TODO: pull when needed.\n  constructor(\n    private model?: TwistyPlayerModel,\n    private kpuzzle?: KPuzzle,\n    private svgSource?: string,\n    private options?: Twisty2DPuzzleOptions,\n    private puzzleLoader?: PuzzleLoader,\n  ) {\n    super();\n    this.addCSS(twisty2DSVGCSS);\n\n    this.resetSVG(); // TODO: do this in `connectedCallback()`?\n\n    this.#freshListenerManager.addListener(\n      this.model!.puzzleID,\n      (puzzleID: PuzzleID) => {\n        if (puzzleLoader?.id !== puzzleID) {\n          this.disconnect();\n        }\n      },\n    );\n\n    this.#freshListenerManager.addListener(\n      this.model!.legacyPosition,\n      this.onPositionChange.bind(this),\n    );\n\n    if (this.options?.experimentalStickering) {\n      this.experimentalSetStickering(this.options.experimentalStickering);\n    }\n  }\n\n  #freshListenerManager = new FreshListenerManager();\n  disconnect(): void {\n    this.#freshListenerManager.disconnect();\n  }\n\n  onPositionChange(position: PuzzlePosition): void {\n    try {\n      if (position.movesInProgress.length > 0) {\n        const move = position.movesInProgress[0].move;\n\n        let partialMove = move;\n        if (position.movesInProgress[0].direction === Direction.Backwards) {\n          partialMove = move.invert();\n        }\n        const newState = position.state.applyMove(partialMove);\n        // TODO: move to render()\n        this.svg.draw(\n          position.state,\n          newState,\n          position.movesInProgress[0].fraction,\n        );\n      } else {\n        this.svg.draw(position.state);\n        this.#cachedPosition = position;\n      }\n    } catch (e) {\n      console.warn(\n        \"Bad position (this doesn't necessarily mean something is wrong). Pre-emptively disconnecting:\",\n        this.puzzleLoader?.id,\n        e,\n      );\n      this.disconnect();\n    }\n  }\n\n  scheduleRender(): void {\n    this.scheduler.requestAnimFrame();\n  }\n\n  experimentalSetStickering(stickering: ExperimentalStickering): void {\n    (async () => {\n      if (!this.puzzleLoader?.appearance) {\n        return;\n      }\n      const appearance = await this.puzzleLoader.appearance(stickering);\n      this.resetSVG(appearance);\n    })();\n  }\n\n  // TODO: do this without constructing a new SVG.\n  private resetSVG(appearance?: PuzzleAppearance): void {\n    if (this.svg) {\n      this.removeElement(this.svg.element);\n    }\n    if (!this.kpuzzle) {\n      return; // TODO\n    }\n    this.svg = new KPuzzleSVGWrapper(this.kpuzzle, this.svgSource!, appearance); // TODO\n    this.addElement(this.svg.element);\n    if (this.#cachedPosition) {\n      this.onPositionChange(this.#cachedPosition);\n    }\n  }\n\n  private render(): void {\n    /*...*/\n  }\n}\n\ncustomElementsShim.define(\"twisty-2d-puzzle\", Twisty2DPuzzle);\n","import type { PuzzleLoader } from \"../../../puzzles\";\nimport type { ExperimentalStickering } from \"../../../twisty\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport { FreshListenerManager } from \"../../model/props/TwistyProp\";\nimport type { Schedulable } from \"../../controllers/RenderScheduler\";\nimport { Twisty2DPuzzle } from \"./Twisty2DPuzzle\";\n\nexport class Twisty2DPuzzleWrapper implements Schedulable {\n  constructor(\n    private model: TwistyPlayerModel,\n    public schedulable: Schedulable,\n    private puzzleLoader: PuzzleLoader,\n    private effectiveVisualization: \"2D\" | \"experimental-2D-LL\",\n  ) {\n    this.twisty2DPuzzle(); // Start constructing.\n\n    this.#freshListenerManager.addListener(\n      this.model.stickering,\n      async (stickering: ExperimentalStickering) => {\n        (await this.twisty2DPuzzle()).experimentalSetStickering(stickering);\n      },\n    );\n  }\n\n  #freshListenerManager = new FreshListenerManager();\n  disconnect(): void {\n    this.#freshListenerManager.disconnect();\n  }\n\n  // TODO: Hook this up nicely.\n  scheduleRender(): void {\n    // Nothing\n  }\n\n  #cachedTwisty2DPuzzle: Promise<Twisty2DPuzzle> | null = null;\n  // TODO: Stale dropper?\n  async twisty2DPuzzle(): Promise<Twisty2DPuzzle> {\n    return (this.#cachedTwisty2DPuzzle ??= (async () => {\n      const svgPromise =\n        this.effectiveVisualization === \"experimental-2D-LL\"\n          ? this.puzzleLoader.llSVG!()\n          : this.puzzleLoader.svg();\n      return new Twisty2DPuzzle(\n        this.model,\n        await this.puzzleLoader.kpuzzle(),\n        await svgPromise,\n        {},\n        this.puzzleLoader,\n      );\n    })());\n  }\n}\n","import type { Scene as ThreeScene } from \"three\";\nimport type { PuzzleLoader } from \"../../../puzzles\";\nimport { THREEJS } from \"../../heavy-code-imports/3d\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport { FreshListenerManager } from \"../../model/props/TwistyProp\";\nimport type { Schedulable } from \"../../controllers/RenderScheduler\";\nimport { ManagedCustomElement } from \"../ManagedCustomElement\";\nimport { customElementsShim } from \"../node-custom-element-shims\";\nimport { twistyViewerWrapperCSS } from \"../TwistyViewerWrapper.css\";\nimport { Twisty2DPuzzleWrapper } from \"./Twisty2DPuzzleWrapper\";\n\nexport class Twisty2DSceneWrapper\n  extends ManagedCustomElement\n  implements Schedulable\n{\n  #freshListenerManager = new FreshListenerManager();\n  disconnect(): void {\n    this.#freshListenerManager.disconnect();\n  }\n\n  constructor(\n    public model?: TwistyPlayerModel,\n    private effectiveVisualization?: \"2D\" | \"experimental-2D-LL\",\n  ) {\n    super();\n  }\n\n  async connectedCallback(): Promise<void> {\n    this.addCSS(twistyViewerWrapperCSS);\n    if (this.model) {\n      this.#freshListenerManager.addListener(\n        this.model.puzzleLoader,\n        this.onPuzzleLoader.bind(this),\n      );\n    }\n  }\n\n  #cachedScene: Promise<ThreeScene> | null;\n  async scene(): Promise<ThreeScene> {\n    return (this.#cachedScene ??= (async () => new (await THREEJS).Scene())());\n  }\n\n  scheduleRender(): void {\n    this.#currentTwisty2DPuzzleWrapper?.scheduleRender();\n  }\n\n  #currentTwisty2DPuzzleWrapper: Twisty2DPuzzleWrapper | null = null;\n  currentTwisty2DPuzzleWrapper(): Twisty2DPuzzleWrapper | null {\n    return this.#currentTwisty2DPuzzleWrapper;\n  }\n\n  // #oldTwisty3DPuzzleWrappers: Twisty3DPuzzleWrapper[] = []; // TODO: Animate these out.\n  async setCurrentTwisty2DPuzzleWrapper(\n    twisty2DPuzzleWrapper: Twisty2DPuzzleWrapper,\n  ): Promise<void> {\n    const old = this.#currentTwisty2DPuzzleWrapper;\n    this.#currentTwisty2DPuzzleWrapper = twisty2DPuzzleWrapper;\n    old?.disconnect(); // TODO: Disconnect properly.\n    const twisty2DPuzzlePromise = twisty2DPuzzleWrapper.twisty2DPuzzle();\n    this.contentWrapper.textContent = \"\"; // Clear existing ones.\n    this.addElement(await twisty2DPuzzlePromise);\n  }\n\n  async onPuzzleLoader(puzzleLoader: PuzzleLoader): Promise<void> {\n    this.#currentTwisty2DPuzzleWrapper?.disconnect();\n    const twisty2DPuzzleWrapper = new Twisty2DPuzzleWrapper(\n      this.model!,\n      this,\n      puzzleLoader,\n      this.effectiveVisualization!,\n    );\n\n    this.setCurrentTwisty2DPuzzleWrapper(twisty2DPuzzleWrapper);\n  }\n}\n\ncustomElementsShim.define(\"twisty-2d-scene-wrapper\", Twisty2DSceneWrapper);\n","import type { ManagedCustomElement } from \"./ManagedCustomElement\";\n\nexport class ClassListManager<SuffixType extends string> {\n  #currentClassName: string | null = null;\n  // The prefix should ideally end in a dash.\n  constructor(\n    private elem: ManagedCustomElement,\n    private prefix: string,\n    private validSuffixes: SuffixType[],\n  ) {}\n\n  // Does nothing if there was no value.\n  clearValue(): void {\n    if (this.#currentClassName) {\n      this.elem.contentWrapper.classList.remove(this.#currentClassName);\n    }\n    this.#currentClassName = null; // TODO: add test for this behaviour.\n  }\n\n  // Returns if the value changed\n  setValue(suffix: SuffixType): boolean {\n    if (!this.validSuffixes.includes(suffix)) {\n      throw new Error(`Invalid suffix: ${suffix}`);\n    }\n    const newClassName = `${this.prefix}${suffix}`;\n    const changed = this.#currentClassName !== newClassName;\n    if (changed) {\n      this.clearValue();\n      this.elem.contentWrapper.classList.add(newClassName);\n      this.#currentClassName = newClassName;\n    }\n    return changed;\n  }\n}\n","import type { Raycaster, Texture as ThreeTexture } from \"three\";\nimport { experimentalCubeAppearance, PuzzleLoader } from \"../../../puzzles\";\nimport type { ExperimentalStickering } from \"../../../twisty\";\nimport { proxy3D } from \"../../heavy-code-imports/3d\";\nimport type { FoundationDisplay } from \"../../model/props/puzzle/display/FoundationDisplayProp\";\nimport type { HintFaceletStyleWithAuto } from \"../../model/props/puzzle/display/HintFaceletProp\";\nimport { FreshListenerManager } from \"../../model/props/TwistyProp\";\nimport type { VisualizationStrategy } from \"../../model/props/viewer/VisualizationStrategyProp\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport type { PuzzlePosition } from \"../../controllers/AnimationTypes\";\nimport type { Schedulable } from \"../../controllers/RenderScheduler\";\nimport type { Twisty3DPuzzle } from \"./puzzles/Twisty3DPuzzle\";\nimport type { Cube3D } from \"./puzzles/Cube3D\";\nimport type { PG3D } from \"./puzzles/PG3D\";\n\nexport class Twisty3DPuzzleWrapper implements Schedulable {\n  constructor(\n    private model: TwistyPlayerModel,\n    public schedulable: Schedulable,\n    private puzzleLoader: PuzzleLoader,\n    private visualizationStrategy: VisualizationStrategy,\n  ) {\n    this.twisty3DPuzzle(); // Start constructing.\n\n    // TODO: Hook up listeners before loading the heavy code in the async constructor, so we get any intermediate updates?\n    // Repro: Switch to 40x40x40 a fraction of a second before animation finishes. When it's loaded the itmeline is at the end, but the 40x40x40 is rendered with an earlier position.\n\n    this.#freshListenerManager.addListener(\n      this.model.puzzleLoader,\n      (puzzleLoader: PuzzleLoader) => {\n        if (this.puzzleLoader.id !== puzzleLoader.id) {\n          this.disconnect();\n        }\n      },\n    );\n    this.#freshListenerManager.addListener(\n      this.model.legacyPosition,\n      async (position: PuzzlePosition) => {\n        try {\n          (await this.twisty3DPuzzle()).onPositionChange(position);\n          this.scheduleRender();\n        } catch (e) {\n          // TODO\n          // console.warn(\n          //   \"Bad position (this doesn't necessarily mean something is wrong). Pre-emptively disconnecting:\",\n          //   this.puzzleLoader.id,\n          //   e,\n          // );\n          this.disconnect();\n        }\n      },\n    );\n\n    this.#freshListenerManager.addListener(\n      this.model.hintFacelet,\n      async (hintFaceletStyle: HintFaceletStyleWithAuto) => {\n        (\n          (await this.twisty3DPuzzle()) as Cube3D | PG3D\n        ).experimentalUpdateOptions({\n          hintFacelets:\n            hintFaceletStyle === \"auto\" ? \"floating\" : hintFaceletStyle,\n        });\n        this.scheduleRender();\n      },\n    );\n    this.#freshListenerManager.addListener(\n      this.model.foundationDisplay,\n      async (foundationDisplay: FoundationDisplay) => {\n        (\n          (await this.twisty3DPuzzle()) as Cube3D | PG3D\n        ).experimentalUpdateOptions({\n          showFoundation: foundationDisplay !== \"none\",\n        });\n        this.scheduleRender();\n      },\n    );\n    this.#freshListenerManager.addListener(\n      this.model.stickering,\n      async (stickering: ExperimentalStickering) => {\n        if (\"setStickering\" in (await this.twisty3DPuzzle())) {\n          ((await this.twisty3DPuzzle()) as Cube3D).setStickering(stickering);\n          this.scheduleRender();\n        } else {\n          if (\n            [\n              \"experimental-global-custom-1\",\n              \"experimental-global-custom-2\",\n            ].includes(stickering)\n          ) {\n            const [twisty3D] = await Promise.all([this.twisty3DPuzzle()]);\n            (twisty3D as PG3D).experimentalSetAppearance(\n              await experimentalCubeAppearance(this.puzzleLoader, stickering),\n            );\n            this.scheduleRender();\n            return;\n          }\n\n          // TODO: create a prop to handle this.\n          if (\"appearance\" in this.puzzleLoader) {\n            const [twisty3D, appearancePromise] = await Promise.all([\n              this.twisty3DPuzzle(),\n              this.puzzleLoader.appearance!(stickering ?? \"full\"),\n            ]);\n            (twisty3D as PG3D).experimentalSetAppearance(appearancePromise);\n            this.scheduleRender();\n          }\n        }\n      },\n    );\n\n    this.#freshListenerManager.addMultiListener(\n      [this.model.foundationStickerSprite, this.model.hintStickerSprite],\n      async (\n        inputs: [\n          foundationSprite: ThreeTexture | null,\n          hintSprite: ThreeTexture | null,\n        ],\n      ) => {\n        if (\"experimentalUpdateTexture\" in (await this.twisty3DPuzzle())) {\n          ((await this.twisty3DPuzzle()) as PG3D).experimentalUpdateTexture(\n            true,\n            ...inputs,\n          );\n          this.scheduleRender();\n        }\n      },\n    );\n  }\n\n  #freshListenerManager = new FreshListenerManager();\n  disconnect(): void {\n    this.#freshListenerManager.disconnect();\n  }\n\n  scheduleRender(): void {\n    this.schedulable.scheduleRender();\n  }\n\n  #cachedTwisty3DPuzzle: Promise<Twisty3DPuzzle> | null = null;\n  async twisty3DPuzzle(): Promise<Twisty3DPuzzle> {\n    return (this.#cachedTwisty3DPuzzle ??= (async () => {\n      const proxyPromise = proxy3D();\n      if (\n        this.puzzleLoader.id === \"3x3x3\" &&\n        this.visualizationStrategy === \"Cube3D\"\n      ) {\n        // TODO: synchronize\n        const [foundationSprite, hintSprite, experimentalStickering] =\n          await Promise.all([\n            this.model.foundationStickerSprite.get(),\n            this.model.hintStickerSprite.get(),\n            this.model.stickering.get(),\n          ]);\n        return (await proxyPromise).cube3DShim({\n          foundationSprite,\n          hintSprite,\n          experimentalStickering,\n        });\n      } else {\n        const [hintFacelets, foundationSprite, hintSprite] = await Promise.all([\n          this.model.hintFacelet.get(),\n          this.model.foundationStickerSprite.get(),\n          this.model.hintStickerSprite.get(),\n        ]);\n        const pg3d = (await proxyPromise).pg3dShim(\n          this.puzzleLoader,\n          hintFacelets === \"auto\" ? \"floating\" : hintFacelets,\n        );\n        // TODO: Figure out how to do this in one place using the listener.\n        pg3d.then((p) =>\n          p.experimentalUpdateTexture(\n            true,\n            foundationSprite ?? undefined,\n            hintSprite ?? undefined,\n          ),\n        );\n        return pg3d;\n      }\n    })());\n  }\n\n  async raycastMove(\n    raycasterPromise: Promise<Raycaster>,\n    transformations: {\n      invert: boolean;\n      depth?: \"secondSlice\" | \"rotation\" | \"none\";\n    },\n  ): Promise<void> {\n    const puzzle = (await this.twisty3DPuzzle()) as Cube3D | PG3D;\n    // TODO: check this differently.\n    if (!(\"experimentalGetControlTargets\" in puzzle)) {\n      console.info(\"not PG3D! skipping raycast\");\n      return;\n    }\n\n    const targets = puzzle.experimentalGetControlTargets(); // TODO: sticker targets\n    const [raycaster] = await Promise.all([raycasterPromise]);\n\n    const intersects = raycaster.intersectObjects(targets);\n    if (intersects.length > 0) {\n      const closestMove = puzzle.getClosestMoveToAxis(\n        intersects[0].point,\n        transformations,\n      );\n      if (closestMove) {\n        this.model.experimentalAddMove(closestMove.move, {\n          coalesce: true,\n          mod: closestMove.order,\n        });\n      } else {\n        console.info(\"Skipping move!\");\n      }\n    }\n  }\n}\n","/**\n * @author mrdoob / http://mrdoob.com/\n * ESM conversion by Lucas Garron, 2021-12-21\n */\n\nconst performance:\n  | null\n  | (Performance & {\n      memory?: {\n        usedJSHeapSize: number;\n        jsHeapSizeLimit: number;\n      };\n    }) = globalThis.performance;\n\nexport class Stats {\n  mode = 0;\n\n  dom = document.createElement(\"div\");\n\n  constructor() {\n    this.dom.style.cssText =\n      \"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";\n    this.dom.addEventListener(\n      \"click\",\n      (event) => {\n        event.preventDefault();\n        this.showPanel(++this.mode % this.dom.children.length);\n      },\n      false,\n    );\n\n    this.showPanel(0);\n  }\n\n  addPanel(panel: StatsPanel): StatsPanel {\n    this.dom.appendChild(panel.dom);\n    return panel;\n  }\n\n  showPanel(id: number): void {\n    for (let i = 0; i < this.dom.children.length; i++) {\n      (this.dom.children[i] as HTMLElement).style.display =\n        i === id ? \"block\" : \"none\";\n    }\n\n    this.mode = id;\n  }\n\n  beginTime = (performance || Date).now();\n  prevTime = this.beginTime;\n  frames = 0;\n\n  fpsPanel = this.addPanel(new StatsPanel(\"FPS\", \"#0ff\", \"#002\"));\n  msPanel = this.addPanel(new StatsPanel(\"MS\", \"#0f0\", \"#020\"));\n  memPanel = performance?.memory\n    ? this.addPanel(new StatsPanel(\"MB\", \"#f08\", \"#201\"))\n    : null;\n  REVISION = 16;\n\n  begin() {\n    this.beginTime = (performance || Date).now();\n  }\n\n  end() {\n    this.frames++;\n\n    const time = (performance || Date).now();\n\n    this.msPanel.update(time - this.beginTime, 200);\n\n    if (time >= this.prevTime + 1000) {\n      this.fpsPanel.update((this.frames * 1000) / (time - this.prevTime), 100);\n\n      this.prevTime = time;\n      this.frames = 0;\n\n      if (this.memPanel) {\n        const memory = performance!.memory!;\n        this.memPanel.update(\n          memory.usedJSHeapSize / 1048576,\n          memory.jsHeapSizeLimit / 1048576,\n        );\n      }\n    }\n\n    return time;\n  }\n\n  update() {\n    this.beginTime = this.end();\n  }\n}\n\nconst PR = Math.round(globalThis?.window?.devicePixelRatio ?? 1);\n\nconst WIDTH = 80 * PR,\n  HEIGHT = 48 * PR,\n  TEXT_X = 3 * PR,\n  TEXT_Y = 2 * PR,\n  GRAPH_X = 3 * PR,\n  GRAPH_Y = 15 * PR,\n  GRAPH_WIDTH = 74 * PR,\n  GRAPH_HEIGHT = 30 * PR;\n\nexport class StatsPanel {\n  min = Infinity;\n  max = 0;\n  dom = document.createElement(\"canvas\");\n  context = this.dom.getContext(\"2d\")!;\n  constructor(private name: string, private fg: string, private bg: string) {\n    this.dom.width = WIDTH;\n    this.dom.height = HEIGHT;\n    this.dom.style.cssText = \"width:80px;height:48px\";\n\n    this.context.font = `bold ${9 * PR}px Helvetica,Arial,sans-serif`;\n    this.context.textBaseline = \"top\";\n\n    this.context.fillStyle = bg;\n    this.context.fillRect(0, 0, WIDTH, HEIGHT);\n\n    this.context.fillStyle = fg;\n    this.context.fillText(name, TEXT_X, TEXT_Y);\n    this.context.fillRect(GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT);\n\n    this.context.fillStyle = bg;\n    this.context.globalAlpha = 0.9;\n    this.context.fillRect(GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT);\n  }\n\n  update(value: number, maxValue: number) {\n    this.min = Math.min(this.min, value);\n    this.max = Math.max(this.max, value);\n\n    this.context.fillStyle = this.bg;\n    this.context.globalAlpha = 1;\n    this.context.fillRect(0, 0, WIDTH, GRAPH_Y);\n    this.context.fillStyle = this.fg;\n    this.context.fillText(\n      Math.round(value) +\n        \" \" +\n        this.name +\n        \" (\" +\n        Math.round(this.min) +\n        \"-\" +\n        Math.round(this.max) +\n        \")\",\n      TEXT_X,\n      TEXT_Y,\n    );\n\n    this.context.drawImage(\n      this.dom,\n      GRAPH_X + PR,\n      GRAPH_Y,\n      GRAPH_WIDTH - PR,\n      GRAPH_HEIGHT,\n      GRAPH_X,\n      GRAPH_Y,\n      GRAPH_WIDTH - PR,\n      GRAPH_HEIGHT,\n    );\n\n    this.context.fillRect(\n      GRAPH_X + GRAPH_WIDTH - PR,\n      GRAPH_Y,\n      PR,\n      GRAPH_HEIGHT,\n    );\n\n    this.context.fillStyle = this.bg;\n    this.context.globalAlpha = 0.9;\n    this.context.fillRect(\n      GRAPH_X + GRAPH_WIDTH - PR,\n      GRAPH_Y,\n      PR,\n      Math.round((1 - value / maxValue) * GRAPH_HEIGHT),\n    );\n  }\n}\n","let globalPixelRatioOverride: number | null = null;\nexport function setGlobalPixelRatioOverride(override: number | null): void {\n  globalPixelRatioOverride = override;\n}\n\n// TODO: Handle if you move across screens?\nexport function pixelRatio(): number {\n  return globalPixelRatioOverride ?? (devicePixelRatio || 1);\n}\n","import { CSSSource } from \"../ManagedCustomElement\";\n\n// The `position` values are a hack for a bug in Safari where the canvas either\n// grows infinitely, or takes up the full `fr` of any encompassing grid (making\n// the contents of that element e.g. over 100% of its height). `contain:\n// content` is a good fix for this, but there is no indication that Safari will\n// support it soon. https://developer.mozilla.org/en-US/docs/Web/CSS/contain\n\nexport const twisty3DVantageCSS = new CSSSource(`\n:host {\n  width: 384px;\n  height: 256px;\n  display: grid;\n}\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  overflow: hidden;\n  place-content: center;\n}\n\n.loading {\n  width: 4em;\n  height: 4em;\n  border-radius: 2.5em;\n  border: 0.5em solid rgba(0, 0, 0, 0);\n  border-top: 0.5em solid rgba(0, 0, 0, 0.7);\n  border-right: 0.5em solid rgba(0, 0, 0, 0.7);\n  animation: fade-in-delayed 4s, rotate 1s linear infinite;\n}\n\n@keyframes fade-in-delayed {\n  0% { opacity: 0; }\n  25% {opacity: 0; }\n  100% { opacity: 1; }\n}\n\n@keyframes rotate {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* TODO: This is due to stats hack. Replace with \\`canvas\\`. */\n.wrapper > canvas {\n  max-width: 100%;\n  max-height: 100%;\n  cursor: grab;\n  animation: fade-in 0.25s ease-in;\n}\n\n@keyframes fade-in {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.wrapper > canvas:active {\n  cursor: grabbing;\n}\n\n.wrapper.invisible {\n  opacity: 0;\n}\n`);\n","// export class Drag() {\n\n// }\n\ninterface DragInfo {\n  attachedInfo: Record<any, any>;\n  hasMoved: boolean;\n  lastClientX: number;\n  lastClientY: number;\n  lastTimeStamp: number;\n}\n\ntype PointerID = number;\n\nexport interface DragMovementInfo {\n  attachedInfo: Record<any, any>;\n  movementX: number;\n  movementY: number;\n  elapsedMs: number;\n}\n\nexport interface UpInfo {\n  attachedInfo: Record<any, any>;\n}\n\nexport interface PressInfo {\n  normalizedX: number;\n  normalizedY: number;\n  rightClick: boolean;\n  keys: {\n    // TODO: group these\n    altKey: boolean;\n    ctrlOrMetaKey: boolean;\n    shiftKey: boolean;\n  };\n}\n\n// Chrome can report movements as low as `0.0000152587890625` even if the cursor did not move at all. So we need a treshold insteadl.\nconst MOVEMENT_EPSILON = 0.1; // px\n\nexport class DragTracker extends EventTarget {\n  #dragInfoMap: Map<PointerID, DragInfo> = new Map();\n\n  constructor(public readonly target: HTMLElement) {\n    super();\n    target.addEventListener(\"pointerdown\", this.onPointerDown.bind(this));\n    // Prevent right-click on desktop (only tested on macOS Chrome/Safari/Firefox) so we can detect right-click moves.\n    // TODO: Can we do this selectively, e.g. only on the puzzle? That way we could allow right-click to download the canvas. Unfortunately, it would probably require a sync calculation.\n    this.target.addEventListener(\"contextmenu\", (e) => {\n      e.preventDefault();\n    });\n    // Prevent touch scrolling (preventing default on `pointermove` doesn't work).\n    this.target.addEventListener(\"touchmove\", (e) => e.preventDefault());\n    // Prevent zooming on double-tap (iOS).\n    // This is because `dblclick` works to zoom in, but does *not* work to zoom out. So the user can get stuck zoomed into the player without a way to zoom out.\n    this.target.addEventListener(\"dblclick\", (e) => e.preventDefault());\n  }\n\n  // This allows us to avoid getting a callback every time the pointer moves over the canvas, until we have a down event.\n  // TODO: Ideally we'd also support unregistering when we're certain there are no more active touches. But this means we need to properly handle every way a pointer \"click\" can end, which is tricky across environments (due to e.g. mouse vs. touch vs. stylues, canvas/viewport/window/scroll boundaries, right-click and other ways of losing focus, etc.), so we conservatively leave the listeners on.\n  #lazyListenersRegistered: boolean = false;\n  #registerLazyListeners(): void {\n    if (this.#lazyListenersRegistered) {\n      return;\n    }\n    this.target.addEventListener(\"pointermove\", this.onPointerMove.bind(this)); // TODO: only register this after pointer down.\n    this.target.addEventListener(\"pointerup\", this.onPointerUp.bind(this));\n    this.#lazyListenersRegistered = true;\n  }\n\n  #clear(e: PointerEvent): void {\n    this.#dragInfoMap.delete(e.pointerId);\n  }\n\n  // `null`: means: ignore this result (no movement, or not\n  #trackDrag(e: PointerEvent): {\n    movementInfo: DragMovementInfo | null;\n    hasMoved: boolean;\n  } {\n    // TODO: Find a way to detect if this is an active press, in a way that works cross-platform.\n    // if (e.buttons === 0) {\n    //   return { movementInfo: null, hasMoved: false };\n    // }\n    const existing = this.#dragInfoMap.get(e.pointerId);\n    if (!existing) {\n      return { movementInfo: null, hasMoved: false };\n    }\n    // We would try to use `e.movementX`/`e.movementY`, except Safari:\n    // - Does not have those values on i[Pad]OS.\n    // - Will always report `0` for these values on macOS.\n    // https://bugs.webkit.org/show_bug.cgi?id=220194\n    //\n    // The following are all insufficiently powerful for detecting the Safari `0` bug:\n    // - `\"movementX\" in e`\n    // - `e.movementX !== \"undefined\"`\n    // - `e.hasOwnProperty(\"movementX\")`\n\n    let movementInfo: DragMovementInfo;\n    if ((e.movementX ?? 0) !== 0 || (e.movementY ?? 0) !== 0) {\n      // We optimistically try to catch sub-pixel movements in Chrome.\n      movementInfo = {\n        attachedInfo: existing.attachedInfo,\n        movementX: e.movementX,\n        movementY: e.movementY,\n        elapsedMs: e.timeStamp - existing.lastTimeStamp,\n      };\n    } else {\n      movementInfo = {\n        attachedInfo: existing.attachedInfo,\n        movementX: e.clientX - existing.lastClientX,\n        movementY: e.clientY - existing.lastClientY,\n        elapsedMs: e.timeStamp - existing.lastTimeStamp,\n      };\n    }\n    existing.lastClientX = e.clientX;\n    existing.lastClientY = e.clientY;\n    existing.lastTimeStamp = e.timeStamp;\n    if (\n      Math.abs(movementInfo.movementX) < MOVEMENT_EPSILON &&\n      Math.abs(movementInfo.movementY) < MOVEMENT_EPSILON\n    ) {\n      return { movementInfo: null, hasMoved: existing.hasMoved };\n    } else {\n      existing.hasMoved = true;\n      return { movementInfo, hasMoved: existing.hasMoved };\n    }\n  }\n\n  private onPointerDown(e: PointerEvent) {\n    this.#registerLazyListeners();\n    const newDragInfo: DragInfo = {\n      attachedInfo: {},\n      hasMoved: false,\n      lastClientX: e.clientX,\n      lastClientY: e.clientY,\n      lastTimeStamp: e.timeStamp,\n    };\n    this.#dragInfoMap.set(e.pointerId, newDragInfo);\n    this.target.setPointerCapture(e.pointerId);\n  }\n\n  private onPointerMove(e: PointerEvent) {\n    const movementInfo = this.#trackDrag(e).movementInfo;\n    if (movementInfo) {\n      e.preventDefault();\n      this.dispatchEvent(\n        new CustomEvent(\"move\", {\n          detail: movementInfo,\n        }),\n      );\n    }\n  }\n\n  private onPointerUp(e: PointerEvent) {\n    const trackDragResult = this.#trackDrag(e);\n    const existing = this.#dragInfoMap.get(e.pointerId)!; // TODO\n    this.#clear(e);\n    this.target.releasePointerCapture(e.pointerId); // TODO: unnecessary?\n    let event: CustomEvent;\n    if (trackDragResult.hasMoved) {\n      // TODO: send proper movement/momentum since last move event.\n      event = new CustomEvent<UpInfo>(\"up\", {\n        detail: { attachedInfo: existing.attachedInfo },\n      });\n    } else {\n      const { altKey, ctrlKey, metaKey, shiftKey } = e;\n      event = new CustomEvent<PressInfo>(\"press\", {\n        detail: {\n          normalizedX: (e.offsetX / this.target.offsetWidth) * 2 - 1,\n          normalizedY: 1 - (e.offsetY / this.target.offsetHeight) * 2,\n          rightClick: !!(e.button & 2),\n          keys: {\n            altKey,\n            ctrlOrMetaKey: ctrlKey || metaKey,\n            shiftKey,\n          },\n        },\n      });\n    }\n    this.dispatchEvent(event);\n  }\n}\n","// TODO: https://stackoverflow.com/a/40443642\n\n// let shareAllNewRenderers: boolean = false;\n\n// // WARNING: The current shared renderer implementation is not every efficient.\n// // Avoid using for players that are likely to have dimensions approaching 1 megapixel or higher.\n// // TODO: use a dedicated renderer while fullscreen?\n// export function experimentalSetShareAllNewRenderers(share: boolean): void {\n//   shareAllNewRenderers = share;\n// }\n\n// const sharedRenderer: WebGLRenderer | null = null;\n\nimport { THREEJS } from \"../../heavy-code-imports/3d\";\nimport type { Camera, Scene, WebGLRenderer } from \"three\";\nimport { pixelRatio } from \"../canvas\";\n\nconst renderers: Promise<WebGLRenderer>[] = [];\n\n// let haveSet = false;\nexport async function renderPooled(\n  width: number,\n  height: number,\n  canvas: HTMLCanvasElement,\n  scene: Scene,\n  camera: Camera,\n): Promise<void> {\n  if (width === 0 || height === 0) {\n    return;\n  }\n  // At most one in the pool for now.\n  if (renderers.length === 0) {\n    renderers.push(newRenderer());\n  }\n  const renderer = await renderers[0];\n  // TODO: scissoring\n  renderer.setSize(width, height); // TODO: is it faster if we cache values and only call this when necessary?\n  renderer.render(scene, camera);\n\n  // TODO: Should we cache this? Seems to take about 0.0001ms to get.\n  const context = canvas.getContext(\"2d\")!;\n  context.clearRect(0, 0, canvas.width, canvas.height);\n  context.drawImage(renderer.domElement, 0, 0);\n}\n\nexport async function newRenderer(): Promise<WebGLRenderer> {\n  const rendererConstructor = (await THREEJS).WebGLRenderer;\n  const renderer = new rendererConstructor({\n    antialias: true,\n    alpha: true,\n  });\n  renderer.setPixelRatio(pixelRatio());\n  return renderer;\n}\n","import type { Vector3 } from \"three\";\nimport { RenderScheduler } from \"../../controllers/RenderScheduler\";\nimport { THREEJS } from \"../../heavy-code-imports/3d\";\nimport type { OrbitCoordinates } from \"../../model/props/viewer/OrbitCoordinatesRequestProp\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport type { DragMovementInfo, DragTracker } from \"./DragTracker\";\nimport { DEGREES_PER_RADIAN } from \"./TAU\";\n\nconst INERTIA_DEFAULT: boolean = true;\n\nconst INERTIA_DURATION_MS = 500;\n// If the first inertial render is this long after the last move, we assume the\n// user has halted the cursor and we consider inertia to have \"timed out\". We\n// never begin animating the inertia.\nconst INERTIA_TIMEOUT_MS = 50;\n\nconst VERTICAL_MOVEMENT_BASE_SCALE = 0.75;\n\n// progress is from 0 to 1.\nfunction momentumScale(progress: number) {\n  // This is the exponential curve flipped so that\n  // - The slope at progress = 0 is 1 (this corresponds to \"x = 1\" on the normal\n  //   curve).\n  // - The scale exponentially \"decays\" until progress = 1.\n  // This means the scale at the end will be about 0.418\n  return (Math.exp(1 - progress) - (1 - progress)) / (1 - Math.E) + 1;\n}\n\nclass Inertia {\n  private scheduler = new RenderScheduler(this.render.bind(this));\n  private lastTimestamp: number;\n  constructor(\n    private startTimestamp: number,\n    private momentumX: number,\n    private momentumY: number,\n    private callback: (movementX: number, movementY: number) => void,\n  ) {\n    this.scheduler.requestAnimFrame();\n    this.lastTimestamp = startTimestamp;\n  }\n\n  private render(now: DOMHighResTimeStamp) {\n    const progressBefore =\n      (this.lastTimestamp - this.startTimestamp) / INERTIA_DURATION_MS;\n    const progressAfter = Math.min(\n      1,\n      (now - this.startTimestamp) / INERTIA_DURATION_MS,\n    );\n\n    if (\n      progressBefore === 0 &&\n      progressAfter > INERTIA_TIMEOUT_MS / INERTIA_DURATION_MS\n    ) {\n      // The user has already paused for a while. Don't start any inertia.\n      return;\n    }\n\n    const delta = momentumScale(progressAfter) - momentumScale(progressBefore);\n\n    // TODO: For now, we only carry horizontal momentum. If this should stay, we\n    // can remove the plumbing for the Y dimension.\n    this.callback(this.momentumX * delta * 1000, this.momentumY * delta * 1000);\n\n    if (progressAfter < 1) {\n      this.scheduler.requestAnimFrame();\n    }\n    this.lastTimestamp = now;\n  }\n}\n\nexport async function positionToOrbitCoordinates(\n  position: Vector3,\n): Promise<OrbitCoordinates> {\n  const spherical = new (await THREEJS).Spherical();\n  spherical.setFromVector3(position);\n  return {\n    latitude: 90 - spherical.phi * DEGREES_PER_RADIAN,\n    longitude: spherical.theta * DEGREES_PER_RADIAN,\n    distance: spherical.radius,\n  };\n}\n\ninterface TwistyOrbitControlsDragAttachedInfo {\n  lastTemperedX: number;\n  lastTemperedY: number;\n  timestamp: number;\n}\n\n// TODO: change mouse cursor while moving.\nexport class TwistyOrbitControls {\n  /** @deprecated */\n  experimentalInertia: boolean = INERTIA_DEFAULT;\n  private onMovementBound = this.onMovement.bind(this);\n  public experimentalHasBeenMoved: boolean = false;\n  constructor(\n    private model: TwistyPlayerModel,\n    private mirror: boolean,\n    private canvas: HTMLCanvasElement,\n    private dragTracker: DragTracker,\n  ) {\n    this.dragTracker.addEventListener(\"move\", this.onMove.bind(this));\n    this.dragTracker.addEventListener(\"up\", this.onUp.bind(this));\n  }\n\n  // f is the fraction of the canvas traversed per ms.\n  temperMovement(f: number): number {\n    // This is scaled to be linear for small values, but to reduce large values\n    // by a significant factor.\n    return (Math.sign(f) * Math.log(Math.abs(f * 10) + 1)) / 6;\n  }\n\n  onMove(e: CustomEvent<DragMovementInfo>): void {\n    e.detail.attachedInfo ??= {};\n\n    const { temperedX, temperedY } = this.onMovement(\n      e.detail.movementX,\n      e.detail.movementY,\n    );\n    const attachedInfo = e.detail\n      .attachedInfo as TwistyOrbitControlsDragAttachedInfo;\n    attachedInfo.lastTemperedX = temperedX * 10;\n    attachedInfo.lastTemperedY = temperedY * 10;\n    attachedInfo.timestamp = e.timeStamp; // TODO\n  }\n\n  onMovement(\n    movementX: number,\n    movementY: number,\n  ): {\n    temperedX: number;\n    temperedY: number;\n  } {\n    const scale = this.mirror ? -1 : 1;\n\n    // TODO: refactor\n    const minDim = Math.min(this.canvas.offsetWidth, this.canvas.offsetHeight);\n\n    const temperedX = this.temperMovement(movementX / minDim);\n    const temperedY = this.temperMovement(\n      (movementY / minDim) * VERTICAL_MOVEMENT_BASE_SCALE,\n    );\n    this.model.orbitCoordinatesRequest.set(\n      (async () => {\n        const prevCoords = await this.model.orbitCoordinates.get();\n\n        const newCoords = {\n          latitude:\n            prevCoords.latitude + 2 * temperedY * DEGREES_PER_RADIAN * scale,\n          longitude: prevCoords.longitude - 2 * temperedX * DEGREES_PER_RADIAN,\n        };\n        return newCoords;\n      })(),\n    );\n    return { temperedX, temperedY };\n  }\n\n  onUp(e: CustomEvent<DragMovementInfo>): void {\n    e.preventDefault();\n    if (\n      \"lastTemperedX\" in e.detail.attachedInfo &&\n      \"lastTemperedY\" in e.detail.attachedInfo &&\n      \"timestamp\" in e.detail.attachedInfo &&\n      e.timeStamp - e.detail.attachedInfo.timestamp < 60 // TODO\n    ) {\n      new Inertia(\n        e.timeStamp, // TODO\n        (\n          e.detail.attachedInfo as TwistyOrbitControlsDragAttachedInfo\n        ).lastTemperedX,\n        (\n          e.detail.attachedInfo as TwistyOrbitControlsDragAttachedInfo\n        ).lastTemperedY,\n        this.onMovementBound,\n      ); // TODO: cancel inertia\n    }\n  }\n}\n","import type { PerspectiveCamera, WebGLRenderer } from \"three\";\nimport { Stats } from \"../../../vendor/three/examples/jsm/libs/stats.modified.module\";\nimport { THREEJS } from \"../../heavy-code-imports/3d\";\nimport { StaleDropper } from \"../../model/PromiseFreshener\";\nimport type { TwistyPropParent } from \"../../model/props/TwistyProp\";\nimport type { OrbitCoordinates } from \"../../model/props/viewer/OrbitCoordinatesRequestProp\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport { RenderScheduler } from \"../../controllers/RenderScheduler\";\nimport { ManagedCustomElement } from \"../ManagedCustomElement\";\nimport { customElementsShim } from \"../node-custom-element-shims\";\nimport { pixelRatio } from \"../canvas\";\nimport { twisty3DVantageCSS } from \"./Twisty3DVantage.css\";\nimport { DragTracker, PressInfo } from \"./DragTracker\";\nimport { newRenderer, renderPooled } from \"./RendererPool\";\nimport { DEGREES_PER_RADIAN } from \"./TAU\";\nimport type { Twisty3DSceneWrapper } from \"./Twisty3DSceneWrapper\";\nimport { TwistyOrbitControls } from \"./TwistyOrbitControls\";\n\nlet SHOW_STATS = false;\nexport function debugShowRenderStats(enable: boolean): void {\n  SHOW_STATS = enable;\n}\n\nexport async function setCameraFromOrbitCoordinates(\n  camera: PerspectiveCamera,\n  orbitCoordinates: OrbitCoordinates,\n  backView: boolean = false,\n): Promise<void> {\n  const spherical = new (await THREEJS).Spherical(\n    orbitCoordinates.distance,\n    (90 - (backView ? -1 : 1) * orbitCoordinates.latitude) / DEGREES_PER_RADIAN,\n    ((backView ? 180 : 0) + orbitCoordinates.longitude) / DEGREES_PER_RADIAN,\n  );\n  spherical.makeSafe();\n  camera.position.setFromSpherical(spherical);\n  camera.lookAt(0, 0, 0);\n}\n\nlet shareAllNewRenderers: boolean | null = null;\n\n// WARNING: The current shared renderer implementation is not every efficient.\n// Avoid using for players that are likely to have dimensions approaching 1 megapixel or higher.\n// TODO: use a dedicated renderer while fullscreen?\n// - true: Force all new (i.e. constructed in the future) renderers to be shared\n// - false: Force all new (i.e. constructed in the future) renderers to be dedicated\n// - null: Reset to the default heuristics.\nexport function experimentalForceNewRendererSharing(\n  share: boolean | null,\n): void {\n  shareAllNewRenderers = share;\n}\n\nlet dedicatedRenderersSoFar = 0;\nconst DEFAULT_MAX_DEDICATED_RENDERERS = 2; // This allows for a front view and a back view (or two separate front views).\nfunction shareRenderer(): boolean {\n  if (shareAllNewRenderers !== null) {\n    if (!shareAllNewRenderers) {\n      dedicatedRenderersSoFar++;\n    }\n    return shareAllNewRenderers;\n  }\n  if (dedicatedRenderersSoFar < DEFAULT_MAX_DEDICATED_RENDERERS) {\n    dedicatedRenderersSoFar++;\n    return false;\n  } else {\n    return true;\n  }\n}\n\nexport class Twisty3DVantage extends ManagedCustomElement {\n  scene: Twisty3DSceneWrapper | null = null;\n\n  stats: Stats | null = null;\n\n  private rendererIsShared: boolean = shareRenderer();\n\n  loadingElement: HTMLDivElement | null = null;\n  constructor(\n    private model?: TwistyPlayerModel,\n    scene?: Twisty3DSceneWrapper,\n    private options?: { backView?: boolean },\n  ) {\n    super();\n    this.scene = scene ?? null;\n\n    this.loadingElement = this.addElement(document.createElement(\"div\"));\n    this.loadingElement.classList.add(\"loading\");\n\n    if (SHOW_STATS) {\n      this.stats = new Stats();\n      this.stats.dom.style.position = \"absolute\";\n      this.contentWrapper.appendChild(this.stats.dom);\n    }\n  }\n\n  async connectedCallback(): Promise<void> {\n    this.addCSS(twisty3DVantageCSS);\n    this.addElement((await this.canvasInfo()).canvas);\n\n    this.#onResize();\n    const observer = new ResizeObserver(this.#onResize.bind(this));\n    observer.observe(this.contentWrapper);\n    this.orbitControls(); // TODO\n    this.#setupBasicPresses();\n\n    this.scheduleRender();\n  }\n\n  async #setupBasicPresses(): Promise<void> {\n    const dragTracker = await this.#dragTracker();\n    dragTracker.addEventListener(\"press\", async (e: CustomEvent<PressInfo>) => {\n      const movePressInput = await this.model!.movePressInput.get();\n      if (movePressInput !== \"basic\") {\n        return;\n      }\n      this.dispatchEvent(\n        new CustomEvent(\"press\", {\n          detail: {\n            pressInfo: e.detail,\n            cameraPromise: this.camera(),\n          },\n        }),\n      );\n    });\n  }\n\n  #onResizeStaleDropper = new StaleDropper<PerspectiveCamera>();\n\n  async clearCanvas(): Promise<void> {\n    if (this.rendererIsShared) {\n      const canvasInfo = await this.canvasInfo();\n      canvasInfo.context.clearRect(\n        0,\n        0,\n        canvasInfo.canvas.width,\n        canvasInfo.canvas.height,\n      );\n    } else {\n      const renderer = await this.renderer();\n      const context = renderer.getContext();\n      context.clear(context.COLOR_BUFFER_BIT);\n    }\n  }\n\n  // TODO: Why doesn't this work for the top-right back view height?\n  #width: number = 0;\n  #height: number = 0;\n  async #onResize(): Promise<void> {\n    const camera = await this.#onResizeStaleDropper.queue(this.camera());\n\n    const w = this.contentWrapper.clientWidth;\n    const h = this.contentWrapper.clientHeight;\n    this.#width = w;\n    this.#height = h;\n    const off = 0;\n    let yoff = 0;\n    let excess = 0;\n    if (h > w) {\n      excess = h - w;\n      yoff = -Math.floor(0.5 * excess);\n    }\n    camera.aspect = w / h;\n    camera.setViewOffset(w, h - excess, off, yoff, w, h);\n    camera.updateProjectionMatrix(); // TODO\n\n    this.clearCanvas();\n    if (this.rendererIsShared) {\n      const canvasInfo = await this.canvasInfo();\n\n      canvasInfo.canvas.width = w * pixelRatio();\n      canvasInfo.canvas.height = h * pixelRatio();\n      canvasInfo.canvas.style.width = w.toString();\n      canvasInfo.canvas.style.height = w.toString();\n    } else {\n      const renderer = await this.renderer();\n      renderer.setSize(w, h, true);\n    }\n\n    this.scheduleRender();\n  }\n\n  #cachedRenderer: Promise<WebGLRenderer> | null = null;\n  async renderer(): Promise<WebGLRenderer> {\n    if (this.rendererIsShared) {\n      throw new Error(\"renderer expected to be shared.\");\n    }\n    return (this.#cachedRenderer ??= newRenderer());\n  }\n\n  #cachedCanvas: Promise<{\n    canvas: HTMLCanvasElement;\n    context: CanvasRenderingContext2D;\n  }> | null = null;\n  async canvasInfo(): Promise<{\n    canvas: HTMLCanvasElement;\n    context: CanvasRenderingContext2D;\n  }> {\n    return (this.#cachedCanvas ??= (async () => {\n      let canvas: HTMLCanvasElement;\n      if (this.rendererIsShared) {\n        canvas = this.addElement(document.createElement(\"canvas\"));\n      } else {\n        const renderer = await this.renderer();\n        canvas = this.addElement(renderer.domElement);\n      }\n      this.loadingElement?.remove();\n      const context = canvas.getContext(\"2d\")!;\n      return { canvas, context };\n    })());\n  }\n\n  #cachedDragTracker: Promise<DragTracker> | null = null;\n  async #dragTracker(): Promise<DragTracker> {\n    return (this.#cachedDragTracker ??= (async () => {\n      return new DragTracker((await this.canvasInfo()).canvas);\n    })());\n  }\n\n  #cachedCamera: Promise<PerspectiveCamera> | null = null;\n  async camera(): Promise<PerspectiveCamera> {\n    return (this.#cachedCamera ??= (async () => {\n      const camera = new (await THREEJS).PerspectiveCamera(\n        20,\n        1, // We rely on the resize logic to handle this.\n        0.1,\n        20,\n      );\n      camera.position.copy(\n        new (await THREEJS).Vector3(2, 4, 4).multiplyScalar(\n          this.options?.backView ? -1 : 1,\n        ),\n      );\n      camera.lookAt(0, 0, 0);\n      // TODO: `TwistyOrbitControls` breaks isolateion\n      return camera;\n    })());\n  }\n\n  #cachedOrbitControls: Promise<TwistyOrbitControls> | null = null;\n  async orbitControls(): Promise<TwistyOrbitControls> {\n    return (this.#cachedOrbitControls ??= (async () => {\n      const orbitControls = new TwistyOrbitControls(\n        this.model!,\n        !!this.options?.backView,\n        (await this.canvasInfo()).canvas,\n        await this.#dragTracker(),\n      );\n\n      if (this.model) {\n        this.addListener(\n          this.model.orbitCoordinates,\n          async (orbitCoordinates: OrbitCoordinates) => {\n            const camera = await this.camera();\n            setCameraFromOrbitCoordinates(\n              camera,\n              orbitCoordinates,\n              this.options?.backView,\n            );\n            // TODO: Wrap in StaleDropper?\n\n            this.scheduleRender();\n          },\n        );\n      }\n\n      return orbitControls;\n    })());\n  }\n\n  addListener<T>(\n    prop: TwistyPropParent<T>,\n    listener: (value: T) => void,\n  ): void {\n    prop.addFreshListener(listener);\n    this.#disconnectionFunctions.push(() => {\n      prop.removeFreshListener(listener);\n      // disconnected = true; // TODO\n    });\n  }\n\n  #disconnectionFunctions: (() => void)[] = [];\n  disconnect(): void {\n    for (const fn of this.#disconnectionFunctions) {\n      fn();\n    }\n    this.#disconnectionFunctions = []; // TODO: Encapsulate this.\n  }\n\n  async render(): Promise<void> {\n    if (!this.scene) {\n      throw new Error(\"Attempted to render without a scene\");\n    }\n\n    this.stats?.begin();\n\n    const [scene, camera, canvas] = await Promise.all([\n      this.scene.scene(),\n      this.camera(),\n      this.canvasInfo(),\n    ]);\n    if (this.rendererIsShared) {\n      renderPooled(this.#width, this.#height, canvas.canvas, scene, camera);\n    } else {\n      (await this.renderer()).render(scene, camera);\n    }\n\n    this.stats?.end();\n  }\n\n  #scheduler = new RenderScheduler(this.render.bind(this));\n  scheduleRender(): void {\n    // console.log(\"scheduling\", this);\n    this.#scheduler.requestAnimFrame();\n  }\n}\n\ncustomElementsShim.define(\"twisty-3d-vantage\", Twisty3DVantage);\n","import type { PerspectiveCamera, Scene as ThreeScene } from \"three\";\nimport type { PuzzleLoader } from \"../../../puzzles\";\nimport type { Schedulable } from \"../../controllers/RenderScheduler\";\nimport { THREEJS } from \"../../heavy-code-imports/3d\";\nimport { StaleDropper } from \"../../model/PromiseFreshener\";\nimport { FreshListenerManager } from \"../../model/props/TwistyProp\";\nimport type {\n  BackViewLayout,\n  BackViewLayoutWithAuto,\n} from \"../../model/props/viewer/BackViewProp\";\nimport type { VisualizationStrategy } from \"../../model/props/viewer/VisualizationStrategyProp\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport { ClassListManager } from \"../ClassListManager\";\nimport { ManagedCustomElement } from \"../ManagedCustomElement\";\nimport { customElementsShim } from \"../node-custom-element-shims\";\nimport { twistyViewerWrapperCSS } from \"../TwistyViewerWrapper.css\";\nimport type { PressInfo } from \"./DragTracker\";\nimport { Twisty3DPuzzleWrapper } from \"./Twisty3DPuzzleWrapper\";\nimport { Twisty3DVantage } from \"./Twisty3DVantage\";\n\nexport class Twisty3DSceneWrapper\n  extends ManagedCustomElement\n  implements Schedulable\n{\n  #backViewClassListManager: ClassListManager<BackViewLayoutWithAuto> =\n    new ClassListManager(this, \"back-view-\", [\n      \"auto\",\n      \"none\",\n      \"side-by-side\",\n      \"top-right\",\n    ]);\n\n  #freshListenerManager = new FreshListenerManager();\n  disconnect(): void {\n    this.#freshListenerManager.disconnect();\n  }\n\n  constructor(public model?: TwistyPlayerModel) {\n    super();\n  }\n\n  async connectedCallback(): Promise<void> {\n    this.addCSS(twistyViewerWrapperCSS);\n    const vantage = new Twisty3DVantage(this.model, this);\n    this.addVantage(vantage);\n    if (this.model) {\n      this.#freshListenerManager.addMultiListener(\n        [this.model.puzzleLoader, this.model.visualizationStrategy],\n        this.onPuzzle.bind(this),\n      );\n      this.#freshListenerManager.addListener(\n        this.model.backView,\n        this.onBackView.bind(this),\n      );\n    }\n    this.scheduleRender();\n  }\n\n  #backViewVantage: Twisty3DVantage | null = null;\n  setBackView(backView: BackViewLayout): void {\n    const shouldHaveBackView = [\"side-by-side\", \"top-right\"].includes(backView);\n    const hasBackView = this.#backViewVantage !== null;\n\n    this.#backViewClassListManager.setValue(backView);\n    if (shouldHaveBackView) {\n      if (!hasBackView) {\n        this.#backViewVantage = new Twisty3DVantage(this.model, this, {\n          backView: true,\n        });\n        this.addVantage(this.#backViewVantage);\n        this.scheduleRender();\n      }\n    } else {\n      if (this.#backViewVantage) {\n        this.removeVantage(this.#backViewVantage);\n        this.#backViewVantage = null;\n      }\n    }\n  }\n\n  onBackView(backView: BackViewLayout): void {\n    this.setBackView(backView);\n  }\n\n  async onPress(\n    e: CustomEvent<{\n      pressInfo: PressInfo;\n      cameraPromise: Promise<PerspectiveCamera>;\n    }>,\n  ): Promise<void> {\n    const twisty3DPuzzleWrapper = this.#currentTwisty3DPuzzleWrapper;\n    if (!twisty3DPuzzleWrapper) {\n      console.info(\"no wrapper; skipping scene wrapper press!\");\n      return;\n    }\n\n    const raycasterPromise = (async () => {\n      const [camera, three] = await Promise.all([\n        e.detail.cameraPromise,\n        THREEJS,\n      ]);\n\n      const raycaster = new three.Raycaster();\n      const mouse = new (await THREEJS).Vector2(\n        e.detail.pressInfo.normalizedX,\n        e.detail.pressInfo.normalizedY,\n      );\n      raycaster.setFromCamera(mouse, camera);\n      return raycaster;\n    })();\n\n    twisty3DPuzzleWrapper.raycastMove(raycasterPromise, {\n      invert: !e.detail.pressInfo.rightClick,\n      depth: e.detail.pressInfo.keys.ctrlOrMetaKey\n        ? \"rotation\"\n        : e.detail.pressInfo.keys.shiftKey\n        ? \"secondSlice\"\n        : \"none\",\n    });\n  }\n\n  #cachedScene: Promise<ThreeScene> | null;\n  async scene(): Promise<ThreeScene> {\n    return (this.#cachedScene ??= (async () => new (await THREEJS).Scene())());\n  }\n\n  #vantages: Set<Twisty3DVantage> = new Set();\n  addVantage(vantage: Twisty3DVantage) {\n    vantage.addEventListener(\"press\", this.onPress.bind(this));\n    this.#vantages.add(vantage);\n    this.contentWrapper.appendChild(vantage);\n  }\n\n  removeVantage(vantage: Twisty3DVantage) {\n    this.#vantages.delete(vantage);\n    vantage.remove();\n    vantage.disconnect();\n    this.#currentTwisty3DPuzzleWrapper?.disconnect();\n  }\n\n  experimentalVantages(): Iterable<Twisty3DVantage> {\n    return this.#vantages.values();\n  }\n\n  scheduleRender(): void {\n    for (const vantage of this.#vantages) {\n      vantage.scheduleRender();\n    }\n  }\n\n  #currentTwisty3DPuzzleWrapper: Twisty3DPuzzleWrapper | null = null;\n  // #oldTwisty3DPuzzleWrappers: Twisty3DPuzzleWrapper[] = []; // TODO: Animate these out.\n  async setCurrentTwisty3DPuzzleWrapper(\n    scene: ThreeScene,\n    twisty3DPuzzleWrapper: Twisty3DPuzzleWrapper,\n  ): Promise<void> {\n    const old = this.#currentTwisty3DPuzzleWrapper;\n    try {\n      this.#currentTwisty3DPuzzleWrapper = twisty3DPuzzleWrapper;\n      old?.disconnect();\n      scene.add(await twisty3DPuzzleWrapper.twisty3DPuzzle());\n    } finally {\n      if (old) {\n        // We wait for the new puzzle to be in place before removing the old one.\n        scene.remove(await old.twisty3DPuzzle());\n      }\n    }\n  }\n\n  #twisty3DStaleDropper: StaleDropper<[ThreeScene, Twisty3DPuzzleWrapper]> =\n    new StaleDropper<[ThreeScene, Twisty3DPuzzleWrapper]>();\n\n  async onPuzzle(\n    inputs: [\n      puzzleLoader: PuzzleLoader,\n      visualizationStrategy: VisualizationStrategy,\n    ],\n  ): Promise<void> {\n    if (inputs[1] === \"2D\") {\n      // We are being asked to render with stale info. Ignore.\n      return;\n    }\n    this.#currentTwisty3DPuzzleWrapper?.disconnect();\n    const [scene, twisty3DPuzzleWrapper] =\n      await this.#twisty3DStaleDropper.queue(\n        Promise.all([\n          this.scene(),\n          new Twisty3DPuzzleWrapper(this.model!, this, inputs[0], inputs[1]), // TODO\n        ]),\n      );\n\n    this.setCurrentTwisty3DPuzzleWrapper(scene, twisty3DPuzzleWrapper);\n  }\n}\n\ncustomElementsShim.define(\"twisty-3d-scene-wrapper\", Twisty3DSceneWrapper);\n","import { CSSSource } from \"../ManagedCustomElement\";\n\nexport const buttonGridCSS = new CSSSource(`\n:host {\n  width: 384px;\n  height: 24px;\n  display: grid;\n}\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  overflow: hidden;\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n}\n\n.wrapper {\n  grid-auto-flow: column;\n}\n\n.viewer-link-none .twizzle-link-button {\n  display: none;\n}\n\n.wrapper twisty-button,\n.wrapper twisty-control-button {\n  width: inherit;\n  height: inherit;\n}\n`);\n\nexport const buttonCSS = new CSSSource(`\n:host:not([hidden]) {\n  display: grid;\n}\n\n:host {\n  width: 48px;\n  height: 24px;\n}\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n}\n\nbutton {\n  width: 100%;\n  height: 100%;\n  border: none;\n  \n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n\n  background-color: rgba(196, 196, 196, 0.75);\n}\n\nbutton:enabled {\n  background-color: rgba(196, 196, 196, 0.75)\n}\n\nbutton:disabled {\n  background-color: rgba(0, 0, 0, 0.4);\n  opacity: 0.25;\n  pointer-events: none;\n}\n\nbutton:enabled:hover {\n  background-color: rgba(255, 255, 255, 0.75);\n  box-shadow: 0 0 1em rgba(0, 0, 0, 0.25);\n  cursor: pointer;\n}\n\n/* TODO: fullscreen icons have too much padding?? */\n.svg-skip-to-start button,\nbutton.svg-skip-to-start {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNTg0IiBoZWlnaHQ9IjM1ODQiIHZpZXdCb3g9IjAgMCAzNTg0IDM1ODQiPjxwYXRoIGQ9Ik0yNjQzIDEwMzdxMTktMTkgMzItMTN0MTMgMzJ2MTQ3MnEwIDI2LTEzIDMydC0zMi0xM2wtNzEwLTcxMHEtOS05LTEzLTE5djcxMHEwIDI2LTEzIDMydC0zMi0xM2wtNzEwLTcxMHEtOS05LTEzLTE5djY3OHEwIDI2LTE5IDQ1dC00NSAxOUg5NjBxLTI2IDAtNDUtMTl0LTE5LTQ1VjEwODhxMC0yNiAxOS00NXQ0NS0xOWgxMjhxMjYgMCA0NSAxOXQxOSA0NXY2NzhxNC0xMSAxMy0xOWw3MTAtNzEwcTE5LTE5IDMyLTEzdDEzIDMydjcxMHE0LTExIDEzLTE5eiIvPjwvc3ZnPg==\");\n}\n\n.svg-skip-to-end button,\nbutton.svg-skip-to-end {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNTg0IiBoZWlnaHQ9IjM1ODQiIHZpZXdCb3g9IjAgMCAzNTg0IDM1ODQiPjxwYXRoIGQ9Ik05NDEgMjU0N3EtMTkgMTktMzIgMTN0LTEzLTMyVjEwNTZxMC0yNiAxMy0zMnQzMiAxM2w3MTAgNzEwcTggOCAxMyAxOXYtNzEwcTAtMjYgMTMtMzJ0MzIgMTNsNzEwIDcxMHE4IDggMTMgMTl2LTY3OHEwLTI2IDE5LTQ1dDQ1LTE5aDEyOHEyNiAwIDQ1IDE5dDE5IDQ1djE0MDhxMCAyNi0xOSA0NXQtNDUgMTloLTEyOHEtMjYgMC00NS0xOXQtMTktNDV2LTY3OHEtNSAxMC0xMyAxOWwtNzEwIDcxMHEtMTkgMTktMzIgMTN0LTEzLTMydi03MTBxLTUgMTAtMTMgMTl6Ii8+PC9zdmc+\");\n}\n\n.svg-step-forward button,\nbutton.svg-step-forward {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNTg0IiBoZWlnaHQ9IjM1ODQiIHZpZXdCb3g9IjAgMCAzNTg0IDM1ODQiPjxwYXRoIGQ9Ik0yNjg4IDE1NjhxMCAyNi0xOSA0NWwtNTEyIDUxMnEtMTkgMTktNDUgMTl0LTQ1LTE5cS0xOS0xOS0xOS00NXYtMjU2aC0yMjRxLTk4IDAtMTc1LjUgNnQtMTU0IDIxLjVxLTc2LjUgMTUuNS0xMzMgNDIuNXQtMTA1LjUgNjkuNXEtNDkgNDIuNS04MCAxMDF0LTQ4LjUgMTM4LjVxLTE3LjUgODAtMTcuNSAxODEgMCA1NSA1IDEyMyAwIDYgMi41IDIzLjV0Mi41IDI2LjVxMCAxNS04LjUgMjV0LTIzLjUgMTBxLTE2IDAtMjgtMTctNy05LTEzLTIydC0xMy41LTMwcS03LjUtMTctMTAuNS0yNC0xMjctMjg1LTEyNy00NTEgMC0xOTkgNTMtMzMzIDE2Mi00MDMgODc1LTQwM2gyMjR2LTI1NnEwLTI2IDE5LTQ1dDQ1LTE5cTI2IDAgNDUgMTlsNTEyIDUxMnExOSAxOSAxOSA0NXoiLz48L3N2Zz4=\");\n}\n\n.svg-step-backward button,\nbutton.svg-step-backward {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNTg0IiBoZWlnaHQ9IjM1ODQiIHZpZXdCb3g9IjAgMCAzNTg0IDM1ODQiPjxwYXRoIGQ9Ik0yNjg4IDIwNDhxMCAxNjYtMTI3IDQ1MS0zIDctMTAuNSAyNHQtMTMuNSAzMHEtNiAxMy0xMyAyMi0xMiAxNy0yOCAxNy0xNSAwLTIzLjUtMTB0LTguNS0yNXEwLTkgMi41LTI2LjV0Mi41LTIzLjVxNS02OCA1LTEyMyAwLTEwMS0xNy41LTE4MXQtNDguNS0xMzguNXEtMzEtNTguNS04MC0xMDF0LTEwNS41LTY5LjVxLTU2LjUtMjctMTMzLTQyLjV0LTE1NC0yMS41cS03Ny41LTYtMTc1LjUtNmgtMjI0djI1NnEwIDI2LTE5IDQ1dC00NSAxOXEtMjYgMC00NS0xOWwtNTEyLTUxMnEtMTktMTktMTktNDV0MTktNDVsNTEyLTUxMnExOS0xOSA0NS0xOXQ0NSAxOXExOSAxOSAxOSA0NXYyNTZoMjI0cTcxMyAwIDg3NSA0MDMgNTMgMTM0IDUzIDMzM3oiLz48L3N2Zz4=\");\n}\n\n.svg-pause button,\nbutton.svg-pause {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNTg0IiBoZWlnaHQ9IjM1ODQiIHZpZXdCb3g9IjAgMCAzNTg0IDM1ODQiPjxwYXRoIGQ9Ik0yNTYwIDEwODh2MTQwOHEwIDI2LTE5IDQ1dC00NSAxOWgtNTEycS0yNiAwLTQ1LTE5dC0xOS00NVYxMDg4cTAtMjYgMTktNDV0NDUtMTloNTEycTI2IDAgNDUgMTl0MTkgNDV6bS04OTYgMHYxNDA4cTAgMjYtMTkgNDV0LTQ1IDE5aC01MTJxLTI2IDAtNDUtMTl0LTE5LTQ1VjEwODhxMC0yNiAxOS00NXQ0NS0xOWg1MTJxMjYgMCA0NSAxOXQxOSA0NXoiLz48L3N2Zz4=\");\n}\n\n.svg-play button,\nbutton.svg-play {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNTg0IiBoZWlnaHQ9IjM1ODQiIHZpZXdCb3g9IjAgMCAzNTg0IDM1ODQiPjxwYXRoIGQ9Ik0yNDcyLjUgMTgyM2wtMTMyOCA3MzhxLTIzIDEzLTM5LjUgM3QtMTYuNS0zNlYxMDU2cTAtMjYgMTYuNS0zNnQzOS41IDNsMTMyOCA3MzhxMjMgMTMgMjMgMzF0LTIzIDMxeiIvPjwvc3ZnPg==\");\n}\n\n.svg-enter-fullscreen button,\nbutton.svg-enter-fullscreen {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgd2lkdGg9IjI4Ij48cGF0aCBkPSJNMiAyaDI0djI0SDJ6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTkgMTZIN3Y1aDV2LTJIOXYtM3ptLTItNGgyVjloM1Y3SDd2NXptMTIgN2gtM3YyaDV2LTVoLTJ2M3pNMTYgN3YyaDN2M2gyVjdoLTV6Ii8+PC9zdmc+\");\n}\n\n.svg-exit-fullscreen button,\nbutton.svg-exit-fullscreen {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgd2lkdGg9IjI4Ij48cGF0aCBkPSJNMiAyaDI0djI0SDJ6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTcgMThoM3YzaDJ2LTVIN3Yyem0zLThIN3YyaDVWN2gtMnYzem02IDExaDJ2LTNoM3YtMmgtNXY1em0yLTExVjdoLTJ2NWg1di0yaC0zeiIvPjwvc3ZnPg==\");\n}\n\n.svg-twizzle-tw button,\nbutton.svg-twizzle-tw {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODY0IiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMzk3LjU4MSAxNTEuMTh2NTcuMDg0aC04OS43MDN2MjQwLjM1MmgtNjYuOTU1VjIwOC4yNjRIMTUxLjIydi01Ny4wODNoMjQ2LjM2MXptNTQuMzEgNzEuNjc3bDcuNTEyIDMzLjY5MmMyLjcxOCAxMi4xNiA1LjU4IDI0LjY4IDguNTg0IDM3LjU1NWEyMTgwLjc3NSAyMTgwLjc3NSAwIDAwOS40NDIgMzguODQzIDEyNjYuMyAxMjY2LjMgMCAwMDEwLjA4NiAzNy41NTVjMy43Mi0xMi41OSA3LjM2OC0yNS40NjYgMTAuOTQ1LTM4LjYyOCAzLjU3Ni0xMy4xNjIgNy4wMS0yNi4xMSAxMC4zLTM4Ljg0M2w1Ljc2OS0yMi40NTZjMS4yNDgtNC44ODcgMi40NzItOS43MDUgMy42NzQtMTQuNDU1IDMuMDA0LTExLjg3NSA1LjY1MS0yMi45NjIgNy45NC0zMy4yNjNoNDYuMzU0bDIuMzg0IDEwLjU2M2EyMDAwLjc3IDIwMDAuNzcgMCAwMDMuOTM1IDE2LjgyOGw2LjcxMSAyNy43MWMxLjIxMyA0Ljk1NiAyLjQ1IDkuOTggMy43MDkgMTUuMDczYTMxMTkuNzc3IDMxMTkuNzc3IDAgMDA5Ljg3MSAzOC44NDMgMTI0OS4yMjcgMTI0OS4yMjcgMCAwMDEwLjczIDM4LjYyOCAxOTA3LjYwNSAxOTA3LjYwNSAwIDAwMTAuMzAxLTM3LjU1NSAxMzk3Ljk0IDEzOTcuOTQgMCAwMDkuNjU3LTM4Ljg0M2w0LjQtMTkuMDQ2Yy43MTUtMy4xMyAxLjQyMS02LjIzNiAyLjExOC05LjMyMWw5LjU3Ny00Mi44OGg2Ni41MjZhMjk4OC43MTggMjk4OC43MTggMCAwMS0xOS41MjkgNjYuMzExbC01LjcyOCAxOC40ODJhMzIzNy40NiAzMjM3LjQ2IDAgMDEtMTQuMDE1IDQzLjc1MmMtNi40MzggMTkuNi0xMi43MzMgMzcuNjk4LTE4Ljg4NSA1NC4yOTRsLTMuMzA2IDguODI1Yy00Ljg4NCAxMi44OTgtOS40MzMgMjQuMjYzLTEzLjY0NyAzNC4wOTVoLTQ5Ljc4N2E4NDE3LjI4OSA4NDE3LjI4OSAwIDAxLTIxLjAzMS02NC44MDkgMTI4OC42ODYgMTI4OC42ODYgMCAwMS0xOC44ODUtNjQuODEgMTk3Mi40NDQgMTk3Mi40NDQgMCAwMS0xOC4yNCA2NC44MSAyNTc5LjQxMiAyNTc5LjQxMiAwIDAxLTIwLjM4OCA2NC44MWgtNDkuNzg3Yy00LjY4Mi0xMC45MjYtOS43Mi0yMy43NDMtMTUuMTEtMzguNDUxbC0xLjYyOS00LjQ3Yy01LjI1OC0xNC41MjEtMTAuNjgtMzAuMTkyLTE2LjI2Ni00Ny4wMTRsLTIuNDA0LTcuMjhjLTYuNDM4LTE5LjYtMTMuMDItNDAuMzQ0LTE5Ljc0My02Mi4yMzRhMjk4OC43MDcgMjk4OC43MDcgMCAwMS0xOS41MjktNjYuMzExaDY3LjM4NXoiIGZpbGw9IiM0Mjg1RjQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==\");\n}\n`);\n\n// Sized against full-screen dimensions.\n// button.svg-twizzle-tw {\n//   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzc3IiBoZWlnaHQ9IjUxMyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMzU0LjU4MSAxMDcuMTh2NTcuMDg0aC04OS43MDN2MjQwLjM1MmgtNjYuOTU1VjE2NC4yNjRIMTA4LjIydi01Ny4wODNoMjQ2LjM2MXptNTQuMzEgNzEuNjc3bDcuNTEyIDMzLjY5MmMyLjcxOCAxMi4xNiA1LjU4IDI0LjY4IDguNTg0IDM3LjU1NWEyMTgwLjc3NSAyMTgwLjc3NSAwIDAwOS40NDIgMzguODQzIDEyNjYuMyAxMjY2LjMgMCAwMDEwLjA4NiAzNy41NTVjMy43Mi0xMi41OSA3LjM2OC0yNS40NjYgMTAuOTQ1LTM4LjYyOCAzLjU3Ni0xMy4xNjIgNy4wMS0yNi4xMSAxMC4zLTM4Ljg0M2w1Ljc2OS0yMi40NTZjMS4yNDgtNC44ODcgMi40NzItOS43MDUgMy42NzQtMTQuNDU1IDMuMDA0LTExLjg3NSA1LjY1MS0yMi45NjIgNy45NC0zMy4yNjNoNDYuMzU0bDIuMzg0IDEwLjU2M2EyMDAwLjc3IDIwMDAuNzcgMCAwMDMuOTM1IDE2LjgyOGw2LjcxMSAyNy43MWMxLjIxMyA0Ljk1NiAyLjQ1IDkuOTggMy43MDkgMTUuMDczYTMxMTkuNzc3IDMxMTkuNzc3IDAgMDA5Ljg3MSAzOC44NDMgMTI0OS4yMjcgMTI0OS4yMjcgMCAwMDEwLjczIDM4LjYyOCAxOTA3LjYwNSAxOTA3LjYwNSAwIDAwMTAuMzAxLTM3LjU1NSAxMzk3Ljk0IDEzOTcuOTQgMCAwMDkuNjU3LTM4Ljg0M2w0LjQtMTkuMDQ2Yy43MTUtMy4xMyAxLjQyMS02LjIzNiAyLjExOC05LjMyMWw5LjU3Ny00Mi44OGg2Ni41MjZhMjk4OC43MTggMjk4OC43MTggMCAwMS0xOS41MjkgNjYuMzExbC01LjcyOCAxOC40ODJhMzIzNy40NiAzMjM3LjQ2IDAgMDEtMTQuMDE1IDQzLjc1MmMtNi40MzggMTkuNi0xMi43MzMgMzcuNjk4LTE4Ljg4NSA1NC4yOTRsLTMuMzA2IDguODI1Yy00Ljg4NCAxMi44OTgtOS40MzMgMjQuMjYzLTEzLjY0NyAzNC4wOTVoLTQ5Ljc4N2E4NDE3LjI4OSA4NDE3LjI4OSAwIDAxLTIxLjAzMS02NC44MDkgMTI4OC42ODYgMTI4OC42ODYgMCAwMS0xOC44ODUtNjQuODEgMTk3Mi40NDQgMTk3Mi40NDQgMCAwMS0xOC4yNCA2NC44MSAyNTc5LjQxMiAyNTc5LjQxMiAwIDAxLTIwLjM4OCA2NC44MWgtNDkuNzg3Yy00LjY4Mi0xMC45MjYtOS43Mi0yMy43NDMtMTUuMTEtMzguNDUxbC0xLjYyOS00LjQ3Yy01LjI1OC0xNC41MjEtMTAuNjgtMzAuMTkyLTE2LjI2Ni00Ny4wMTRsLTIuNDA0LTcuMjhjLTYuNDM4LTE5LjYtMTMuMDItNDAuMzQ0LTE5Ljc0My02Mi4yMzRhMjk4OC43MDcgMjk4OC43MDcgMCAwMS0xOS41MjktNjYuMzExaDY3LjM4NXoiIGZpbGw9IiM0Mjg1RjQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==\");\n// }\n","// Use like this:\n// const enabled = globalSafeDocument?.fullscreenEnabled;\nexport const globalSafeDocument: Document | null =\n  typeof document === \"undefined\" ? null : document;\n","// Ponyfills for prefixing in Safari.\n\nimport { globalSafeDocument } from \"../document\";\n\ndeclare global {\n  interface Document {\n    webkitFullscreenEnabled?: boolean;\n    webkitExitFullscreen?: () => Promise<void>;\n    webkitFullscreenElement?: Element | null;\n  }\n\n  interface Element {\n    webkitRequestFullscreen: () => Promise<void>;\n  }\n}\n\n// TODO: Can `webkitFullscreenEnabled` change after it's cached at page load?\nexport const fullscreenEnabled: boolean =\n  globalSafeDocument?.fullscreenEnabled ||\n  !!globalSafeDocument?.webkitFullscreenEnabled;\n\nexport function documentExitFullscreen(): Promise<void> {\n  if (document.exitFullscreen) {\n    return document.exitFullscreen();\n  } else {\n    return document.webkitExitFullscreen!(); // YOLO\n  }\n}\n\nexport function documentFullscreenElement(): Element | null {\n  if (document.fullscreenElement) {\n    return document.fullscreenElement;\n  } else {\n    return document.webkitFullscreenElement ?? null;\n  }\n}\n\nexport function requestFullscreen(element: Element): Promise<void> {\n  if (element.requestFullscreen) {\n    return element.requestFullscreen();\n  } else {\n    return element.webkitRequestFullscreen();\n  }\n}\n","import type { ButtonCommand } from \"../../../views/control-panel/TwistyButtons\";\nimport { fullscreenEnabled } from \"../../../views/control-panel/webkit-fullscreen\";\nimport type { ViewerLinkPageWithAuto } from \"./ViewerLinkProp\";\nimport type { CoarseTimelineInfo as CoarseTimelineInfo } from \"../timeline/CoarseTimelineInfoProp\";\nimport { TwistyPropDerived } from \"../TwistyProp\";\n\nexport const buttonIcons = [\n  \"skip-to-start\",\n  \"skip-to-end\",\n  \"step-forward\",\n  \"step-backward\",\n  \"pause\",\n  \"play\",\n  \"enter-fullscreen\",\n  \"exit-fullscreen\",\n  \"twizzle-tw\",\n];\nexport type ButtonIcon = typeof buttonIcons[number];\n\ninterface ButtonAppearance {\n  enabled: boolean;\n  icon: ButtonIcon;\n  title: string;\n  hidden?: boolean;\n}\nexport type ButtonAppearances = Record<ButtonCommand, ButtonAppearance>;\n\n// TODO: reduce inputs to avoid unnecessary updates.\ninterface ButtonAppearancePropInputs {\n  coarseTimelineInfo: CoarseTimelineInfo;\n  viewerLink: ViewerLinkPageWithAuto;\n}\n\nexport class ButtonAppearanceProp extends TwistyPropDerived<\n  ButtonAppearancePropInputs,\n  ButtonAppearances\n> {\n  // TODO: This still seems to fire twice for play/pause?\n  derive(inputs: ButtonAppearancePropInputs): ButtonAppearances {\n    const buttonAppearances = {\n      \"fullscreen\": {\n        // TODO: Cache?// TODO: Cache?\n        enabled: fullscreenEnabled,\n        icon:\n          // TODO: Check against the expected element?\n          // TODO: This will *not* update when we enter/leave fullscreen. We need to work more closely with the controller.\n          document.fullscreenElement === null\n            ? \"enter-fullscreen\"\n            : \"exit-fullscreen\",\n        title: \"Enter fullscreen\",\n      },\n      \"jump-to-start\": {\n        enabled: !inputs.coarseTimelineInfo.atStart,\n        icon: \"skip-to-start\",\n        title: \"Restart\",\n      },\n      \"play-step-backwards\": {\n        enabled: !inputs.coarseTimelineInfo.atStart,\n        icon: \"step-backward\",\n        title: \"Step backward\",\n      },\n      \"play-pause\": {\n        enabled: !(\n          inputs.coarseTimelineInfo.atStart && inputs.coarseTimelineInfo.atEnd\n        ),\n        icon: inputs.coarseTimelineInfo.playing ? \"pause\" : \"play\",\n        title: inputs.coarseTimelineInfo.playing ? \"Pause\" : \"Play\",\n      },\n      \"play-step\": {\n        enabled: !inputs.coarseTimelineInfo.atEnd,\n        icon: \"step-forward\",\n        title: \"Step forward\",\n      },\n      \"jump-to-end\": {\n        enabled: !inputs.coarseTimelineInfo.atEnd,\n        icon: \"skip-to-end\",\n        title: \"Skip to End\",\n      },\n      \"twizzle-link\": {\n        enabled: true,\n        icon: \"twizzle-tw\",\n        title: \"View at Twizzle\",\n        hidden: inputs.viewerLink === \"none\",\n      },\n    };\n    return buttonAppearances;\n  }\n}\n","import { BoundaryType, Direction } from \"../../controllers/AnimationTypes\";\nimport { buttonCSS, buttonGridCSS } from \"./TwistyButtons.css\";\nimport { ClassListManager } from \"../ClassListManager\";\nimport { ManagedCustomElement } from \"../ManagedCustomElement\";\nimport { customElementsShim } from \"../node-custom-element-shims\";\nimport {\n  ButtonAppearances,\n  ButtonIcon,\n  buttonIcons,\n} from \"../../model/props/viewer/ButtonAppearanceProp\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport type { TwistyPlayerController } from \"../../controllers/TwistyPlayerController\";\nimport {\n  documentExitFullscreen,\n  documentFullscreenElement,\n  requestFullscreen,\n} from \"./webkit-fullscreen\";\n\nconst buttonCommands = {\n  \"fullscreen\": true,\n  \"jump-to-start\": true,\n  \"play-step-backwards\": true,\n  \"play-pause\": true,\n  \"play-step\": true,\n  \"jump-to-end\": true,\n  \"twizzle-link\": true,\n};\n\nexport type ButtonCommand = keyof typeof buttonCommands;\n\nexport class TwistyButtons extends ManagedCustomElement {\n  buttons: Record<ButtonCommand, TwistyButton> | null = null;\n\n  // TODO: Privacy\n  constructor(\n    public model?: TwistyPlayerModel,\n    public controller?: TwistyPlayerController,\n    private fullscreenElement?: HTMLElement,\n  ) {\n    super();\n  }\n\n  connectedCallback(): void {\n    this.addCSS(buttonGridCSS);\n    const buttons: Partial<Record<ButtonCommand, TwistyButton>> = {};\n    for (const command in buttonCommands) {\n      const button = new TwistyButton();\n      buttons[command as ButtonCommand] = button;\n      // Why does this still fire with the `disabled` attribute?\n      button.addEventListener(\"click\", () =>\n        this.#onCommand(command as ButtonCommand),\n      );\n      this.addElement(button);\n    }\n    this.buttons = buttons as Record<ButtonCommand, TwistyButton>;\n\n    this.model?.buttonAppearance.addFreshListener(this.update.bind(this));\n  }\n\n  #onCommand(command: ButtonCommand) {\n    switch (command) {\n      case \"fullscreen\":\n        this.onFullscreenButton();\n        break;\n      case \"jump-to-start\":\n        this.controller?.jumpToStart({ flash: true });\n        break;\n      case \"play-step-backwards\":\n        this.controller?.animationController.play({\n          direction: Direction.Backwards,\n          untilBoundary: BoundaryType.Move,\n        });\n        break;\n      case \"play-pause\":\n        this.controller?.togglePlay();\n        break;\n      case \"play-step\":\n        this.controller?.animationController.play({\n          direction: Direction.Forwards,\n          untilBoundary: BoundaryType.Move,\n        });\n        break;\n      case \"jump-to-end\":\n        this.controller?.jumpToEnd({ flash: true });\n        break;\n      case \"twizzle-link\":\n        this.controller?.visitTwizzleLink();\n        break;\n      default:\n        throw new Error(\"Missing command\");\n    }\n  }\n\n  // TODO: Should we have a prop, or a way to query if we're fullscreen?\n  // https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullScreen\n  async onFullscreenButton(): Promise<void> {\n    if (!this.fullscreenElement) {\n      throw new Error(\"Attempted to go fullscreen without an element.\");\n    }\n\n    if (documentFullscreenElement() === this.fullscreenElement) {\n      documentExitFullscreen();\n    } else {\n      // TODO: Propagate button info to `ButtonAppearanceProp`.\n      this.buttons?.fullscreen.setIcon(\"exit-fullscreen\");\n\n      requestFullscreen(this.fullscreenElement);\n\n      const onFullscreen = (): void => {\n        if (documentFullscreenElement() !== this.fullscreenElement) {\n          this.buttons?.fullscreen.setIcon(\"enter-fullscreen\");\n          window.removeEventListener(\"fullscreenchange\", onFullscreen);\n        }\n      };\n      window.addEventListener(\"fullscreenchange\", onFullscreen);\n    }\n  }\n\n  async update(buttonAppearances: ButtonAppearances): Promise<void> {\n    // TODO: Check that we have every command?\n    for (const command in buttonCommands) {\n      // TODO: Why doesn't `command` have the type `ButtonCommand`?\n      const button = this.buttons![command as ButtonCommand];\n      // TODO: track individual changes?\n      const info = buttonAppearances[command as ButtonCommand];\n      button.button.disabled = !info.enabled;\n      button.button.title = info.title;\n      button.setIcon(info.icon);\n      button.hidden = !!info.hidden;\n      // button.textContent = info.icon;\n    }\n  }\n}\n\ncustomElementsShim.define(\"twisty-buttons\", TwistyButtons);\n\nclass TwistyButton extends ManagedCustomElement {\n  button: HTMLButtonElement = document.createElement(\"button\"); // TODO: async?\n\n  connectedCallback() {\n    this.addCSS(buttonCSS);\n    this.addElement(this.button);\n  }\n\n  #iconManager: ClassListManager<ButtonIcon> = new ClassListManager(\n    this,\n    \"svg-\",\n    buttonIcons,\n  );\n\n  setIcon(iconName: ButtonIcon): void {\n    this.#iconManager.setValue(iconName);\n  }\n}\n\ncustomElementsShim.define(\"twisty-button\", TwistyButton);\n","import { CSSSource } from \"../ManagedCustomElement\";\n\nexport const twistyScrubberCSS = new CSSSource(`\n:host {\n  width: 384px;\n  height: 16px;\n  display: grid;\n}\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  overflow: hidden;\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n  background: rgba(196, 196, 196, 0.75)\n}\n\ninput:not(:disabled) {\n  cursor: ew-resize;\n}\n`);\n","import { twistyScrubberCSS } from \"./TwistyScrubber.css\";\nimport { ManagedCustomElement } from \"../ManagedCustomElement\";\nimport { customElementsShim } from \"../node-custom-element-shims\";\nimport type { DetailedTimelineInfo } from \"../../model/props/timeline/DetailedTimelineInfoProp\";\nimport type { TwistyPlayerModel } from \"../../model/TwistyPlayerModel\";\nimport { globalSafeDocument } from \"../document\";\n\nconst SLOW_DOWN_SCRUBBING = false;\n\nlet isMouseDown = false;\n\nglobalSafeDocument?.addEventListener(\n  \"mousedown\",\n  function (event) {\n    if (event.which) {\n      isMouseDown = true;\n    }\n  },\n  true,\n);\n\nglobalSafeDocument?.addEventListener(\n  \"mouseup\",\n  function (event) {\n    if (event.which) {\n      isMouseDown = false;\n    }\n  },\n  true,\n);\n\n// var x = 0;\nlet y = 0;\nlet clickNum = 0;\n\nglobalSafeDocument?.addEventListener(\n  \"mousedown\",\n  () => {\n    clickNum++;\n  },\n  false,\n);\n\nglobalSafeDocument?.addEventListener(\"mousemove\", onMouseUpdate, false);\nglobalSafeDocument?.addEventListener(\"mouseenter\", onMouseUpdate, false);\n\nfunction onMouseUpdate(e: MouseEvent) {\n  // x = e.pageX;\n  y = e.pageY;\n  // console.log(x, y);\n}\n\nconst lastVal = 0;\nlet lastPreval = 0;\nlet scaling: boolean = false;\nlet currentClickNum = 0;\n\n// Values are integers.\nexport class TwistyScrubber extends ManagedCustomElement {\n  constructor(public model?: TwistyPlayerModel) {\n    super();\n  }\n\n  async onDetailedTimelineInfo(\n    detailedTimelineInfo: DetailedTimelineInfo,\n  ): Promise<void> {\n    // TODO: is this efficient enough?\n    const inputElem = await this.inputElem();\n    inputElem.min = detailedTimelineInfo.timeRange.start.toString();\n    inputElem.max = detailedTimelineInfo.timeRange.end.toString();\n    inputElem.disabled = inputElem.min === inputElem.max;\n    inputElem.value = detailedTimelineInfo.timestamp.toString();\n  }\n\n  async connectedCallback(): Promise<void> {\n    this.addCSS(twistyScrubberCSS);\n    this.addElement(await this.inputElem());\n  }\n\n  #inputElem: Promise<HTMLInputElement> | null = null;\n  async inputElem(): Promise<HTMLInputElement> {\n    // console.log(\"inputElem\", this.#inputElem);\n    return (this.#inputElem ??= (async () => {\n      const elem = document.createElement(\"input\");\n      elem.type = \"range\";\n      elem.disabled = true;\n\n      // console.log(\"1\");\n      this.model?.detailedTimelineInfo.addFreshListener(\n        this.onDetailedTimelineInfo.bind(this),\n      );\n      // console.log(\"3\");\n      elem.addEventListener(\"input\", this.onInput.bind(this));\n\n      return elem;\n    })());\n  }\n\n  async onInput(e: Event): Promise<void> {\n    if (scaling) {\n      return; // TODO\n    }\n    const inputElem = await this.inputElem();\n    await this.slowDown(e, inputElem); // TODO\n\n    const value = parseInt(inputElem.value);\n    // console.log(\"on input\", value);\n    this.model?.playingInfo.set({ playing: false });\n    this.model?.timestampRequest.set(value);\n  }\n\n  async slowDown(e: Event, inputElem: HTMLInputElement): Promise<void> {\n    if (!SLOW_DOWN_SCRUBBING) {\n      return; // TODO\n    }\n\n    if (isMouseDown) {\n      const rect = inputElem.getBoundingClientRect();\n      const sliderY = rect.top + rect.height / 2;\n      console.log(sliderY, e, y, isMouseDown);\n\n      const yDist = Math.abs(sliderY - y);\n      let scale = 1;\n      if (yDist > 64) {\n        scale = Math.max(Math.pow(2, -(yDist - 64) / 64), 1 / 32);\n      }\n      const preVal = parseInt(inputElem.value);\n      console.log(\"cl\", currentClickNum, clickNum, preVal);\n      if (currentClickNum === clickNum) {\n        const delta = (preVal - lastPreval) * scale;\n        console.log(\"delta\", delta, yDist);\n        scaling = true;\n        let newVal = preVal;\n        newVal =\n          lastVal +\n          delta * scale +\n          (preVal - lastVal) *\n            Math.min(1, Math.pow(1 / 2, (yDist * yDist) / 64));\n        inputElem.value = newVal.toString();\n        console.log(scale);\n        scaling = false;\n        this.contentWrapper.style.opacity = scale.toString();\n      } else {\n        currentClickNum = clickNum;\n      }\n      lastPreval = preVal;\n    }\n  }\n}\n\ncustomElementsShim.define(\"twisty-scrubber\", TwistyScrubber);\n","import type { PerspectiveCamera } from \"three\";\nimport { THREEJS } from \"../heavy-code-imports/3d\";\nimport type { TwistyPlayerModel } from \"../model/TwistyPlayerModel\";\nimport { Twisty3DPuzzleWrapper } from \"./3D/Twisty3DPuzzleWrapper\";\nimport { setCameraFromOrbitCoordinates } from \"./3D/Twisty3DVantage\";\n\nexport interface TwistyPlayerScreenshot {\n  dataURL: string;\n  download: (filename?: string) => Promise<void>;\n}\n\n// TODO: cache\nlet cachedCamera: PerspectiveCamera | null = null;\nexport async function screenshot(\n  model: TwistyPlayerModel,\n  options?: { width: number; height: number },\n): Promise<TwistyPlayerScreenshot> {\n  // TODO: improve async caching\n\n  const width = options?.width ?? 2048;\n  const height = options?.height ?? 2048;\n  const aspectRatio = width / height;\n  const camera = (cachedCamera ??= await (async () => {\n    return new (await THREEJS).PerspectiveCamera(20, aspectRatio, 0.1, 20);\n  })());\n\n  const scene = new (await THREEJS).Scene();\n\n  const twisty3DWrapper = new Twisty3DPuzzleWrapper(\n    model,\n    { scheduleRender: () => {} },\n    await model.puzzleLoader.get(),\n    await model.visualizationStrategy.get(),\n  );\n\n  // TODO: Pass the stickering to the constructor so we don't have to wait..\n  await model.stickering.get();\n  await new Promise((resolve) => setTimeout(resolve, 1000));\n\n  // TODO: Find a more robust way to do this.\n  await model.legacyPosition.get(); // Force the 3D puzzle listeners for the state to fire.\n\n  scene.add(await twisty3DWrapper.twisty3DPuzzle());\n\n  const orbitCoordinates = await model.orbitCoordinates.get();\n  await setCameraFromOrbitCoordinates(camera, orbitCoordinates);\n\n  const renderer = new (await THREEJS).WebGLRenderer({\n    antialias: true,\n    alpha: true,\n  });\n  renderer.setSize(width, height);\n\n  renderer.render(scene, camera);\n  const dataURL = renderer.domElement.toDataURL();\n\n  const defaultFilename = await getDefaultFilename(model);\n\n  return {\n    dataURL,\n    download: async (filename?: string) => {\n      downloadURL(dataURL, filename ?? defaultFilename);\n    },\n  };\n}\n\nexport async function getDefaultFilename(\n  model: TwistyPlayerModel,\n): Promise<string> {\n  const [puzzleID, algWithIssues] = await Promise.all([\n    model.puzzleID.get(),\n    model.alg.get(),\n  ]);\n  return `[${puzzleID}]${\n    algWithIssues.alg.experimentalNumUnits() === 0\n      ? \"\"\n      : \" \" + algWithIssues.alg.toString()\n  }`;\n}\n\nexport function downloadURL(\n  url: string,\n  name: string,\n  extension: string = \"png\",\n): void {\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = `${name}.${extension}`;\n  a.click();\n}\n","import { CSSSource } from \"./ManagedCustomElement\";\n\n// TODO: figure out why `:host(twisty-player):fullscreen { background-color: white }` doesn't work.\nexport const twistyPlayerCSS = new CSSSource(`\n:host {\n  width: 384px;\n  height: 256px;\n  display: grid;\n\n  -webkit-user-select: none;\n  user-select: none;\n}\n\n.wrapper {\n  display: grid;\n  overflow: hidden;\n  grid-template-rows: 7fr minmax(1.5em, 0.5fr) minmax(2em, 1fr);\n}\n\n.wrapper > * {\n  width: inherit;\n  height: inherit;\n  overflow: hidden;\n}\n\n.wrapper.controls-none {\n  grid-template-rows: 7fr;\n}\n\n.wrapper.controls-none twisty-scrubber,\n.wrapper.controls-none twisty-control-button-panel ,\n.wrapper.controls-none twisty-scrubber,\n.wrapper.controls-none twisty-buttons {\n  display: none;\n}\n\ntwisty-scrubber {\n  background: rgba(196, 196, 196, 0.5);\n}\n\n.wrapper.checkered {\n  background-color: #EAEAEA;\n  background-image: linear-gradient(45deg, #DDD 25%, transparent 25%, transparent 75%, #DDD 75%, #DDD),\n    linear-gradient(45deg, #DDD 25%, transparent 25%, transparent 75%, #DDD 75%, #DDD);\n  background-size: 32px 32px;\n  background-position: 0 0, 16px 16px;\n}\n\n.visualization-wrapper > * {\n  width: 100%;\n  height: 100%;\n}\n\n.error-elem {\n  width: 100%;\n  height: 100%;\n  display: none;\n  place-content: center;\n  font-family: sans-serif;\n  box-shadow: inset 0 0 2em rgb(255, 0, 0);\n  color: red;\n  text-shadow: 0 0 0.2em white;\n  background: rgba(255, 255, 255, 0.25);\n}\n\n.wrapper.error .visualization-wrapper {\n  display: none;\n}\n\n.wrapper.error .error-elem {\n  display: grid;\n}\n`);\n","import { Alg } from \"../../../../../alg\";\nimport { arrayEquals } from \"../../../helpers\";\nimport { TwistyPropSource } from \"../../TwistyProp\";\n\nexport class AlgIssues {\n  // TODO: (string | Error)[]\n\n  readonly warnings: readonly string[];\n  readonly errors: readonly string[];\n\n  constructor(issues?: { warnings?: string[]; errors?: string[] }) {\n    // TODO: clone inputs?\n    this.warnings = Object.freeze(issues?.warnings ?? []);\n    this.errors = Object.freeze(issues?.errors ?? []);\n    Object.freeze(this);\n  }\n\n  add(issues?: { warnings?: string[]; errors?: string[] }) {\n    return new AlgIssues({\n      warnings: this.warnings.concat(issues?.warnings ?? []),\n      errors: this.errors.concat(issues?.errors ?? []),\n    });\n  }\n\n  /** @deprecated */\n  log() {\n    if (this.errors.length > 0) {\n      console.error(`🚨 ${this.errors[0]}`);\n    } else if (this.warnings.length > 0) {\n      console.warn(`⚠️ ${this.warnings[0]}`);\n    } else {\n      console.info(\"😎 No issues!\");\n    }\n  }\n}\n\nexport interface AlgWithIssues {\n  alg: Alg;\n  issues: AlgIssues;\n}\n\nexport function algWithIssuesFromString(s: string): AlgWithIssues {\n  try {\n    const alg = Alg.fromString(s); // TODO: is this safe?\n    const warnings = [];\n    if (alg.toString() !== s) {\n      // TODO: Push this check into the parser and return semantic info (so they can be e.g. highlighted).\n      warnings.push(`Alg is non-canonical!`);\n    }\n    return {\n      alg,\n      issues: new AlgIssues({ warnings }),\n    };\n  } catch (e) {\n    return {\n      alg: new Alg(),\n      issues: new AlgIssues({\n        errors: [`Malformed alg: ${(e as Error).toString()}`],\n      }),\n    };\n  }\n}\n\nfunction algWithIssuesEquals(a1: AlgWithIssues, a2: AlgWithIssues): boolean {\n  return (\n    a1.alg.isIdentical(a2.alg) &&\n    arrayEquals(a1.issues.warnings, a2.issues.warnings) &&\n    arrayEquals(a1.issues.errors, a2.issues.errors)\n  );\n}\n\nexport class AlgProp extends TwistyPropSource<AlgWithIssues, Alg | string> {\n  getDefaultValue(): AlgWithIssues {\n    return { alg: new Alg(), issues: new AlgIssues() };\n  }\n\n  canReuseValue(v1: AlgWithIssues, v2: AlgWithIssues) {\n    return algWithIssuesEquals(v1, v2);\n  }\n\n  async derive(newAlg: Alg | string): Promise<AlgWithIssues> {\n    if (typeof newAlg === \"string\") {\n      return algWithIssuesFromString(newAlg);\n    } else {\n      return {\n        alg: newAlg,\n        issues: new AlgIssues(),\n      };\n    }\n  }\n}\n","import { SimpleTwistyPropSource } from \"../TwistyProp\";\n\nexport const backgroundThemes = {\n  checkered: true, // default\n  none: true,\n};\nexport type BackgroundTheme = keyof typeof backgroundThemes;\n\nexport type BackgroundThemeWithAuto = BackgroundTheme | \"auto\";\n\nexport class BackgroundProp extends SimpleTwistyPropSource<BackgroundThemeWithAuto> {\n  getDefaultValue(): BackgroundThemeWithAuto {\n    return \"auto\";\n  }\n}\n","import { SimpleTwistyPropSource } from \"../TwistyProp\";\n\nexport const backViewLayouts = {\n  \"none\": true, // default\n  \"side-by-side\": true,\n  \"top-right\": true,\n};\nexport type BackViewLayout = keyof typeof backViewLayouts;\n\nexport type BackViewLayoutWithAuto = BackViewLayout | \"auto\";\n\nexport class BackViewProp extends SimpleTwistyPropSource<BackViewLayoutWithAuto> {\n  getDefaultValue(): BackViewLayoutWithAuto {\n    return \"auto\";\n  }\n}\n","import { SimpleTwistyPropSource } from \"../../TwistyProp\";\n\nexport const indexerStrategyNames = {\n  auto: true,\n  simple: true,\n  tree: true,\n  simultaneous: true,\n};\nexport type IndexerStrategyName = keyof typeof indexerStrategyNames;\n\nexport class IndexerConstructorRequestProp extends SimpleTwistyPropSource<IndexerStrategyName> {\n  getDefaultValue(): IndexerStrategyName {\n    return \"auto\";\n  }\n}\n","import { SimpleTwistyPropSource } from \"../TwistyProp\";\nimport type { CoordinateDegrees } from \"./OrbitCoordinatesRequestProp\";\n\n// Similar to https://alg.cubing.net/\nconst DEFAULT_LATITUDE_LIMIT = 35;\n\nexport class LatitudeLimitProp extends SimpleTwistyPropSource<CoordinateDegrees> {\n  getDefaultValue(): CoordinateDegrees {\n    return DEFAULT_LATITUDE_LIMIT;\n  }\n}\n","import { mod } from \"../../helpers\";\nimport { TwistyPropSource } from \"../TwistyProp\";\n\nexport type CoordinateDegrees = number;\n\nexport interface OrbitCoordinates {\n  latitude: CoordinateDegrees;\n  longitude: CoordinateDegrees;\n  distance: number;\n}\n\nexport function orbitCoordinatesEqual(\n  c1: OrbitCoordinates,\n  c2: OrbitCoordinates,\n): boolean {\n  return (\n    c1.latitude === c2.latitude &&\n    c1.longitude === c2.longitude &&\n    c1.distance === c2.distance\n  );\n}\n\n// TOOD: Check if freezing affects perf.\n// const DEFAULT_COORDINATES = Object.freeze({\n//   latitude: 35,\n//   longitude: 30,\n//   distance: 6,\n// });\n\nexport type OrbitCoordinatesRequest = Partial<OrbitCoordinates> | \"auto\";\n\n// TODO: Put the \"auto\" calculations in a separate place.\nexport class OrbitCoordinatesRequestProp extends TwistyPropSource<\n  OrbitCoordinatesRequest,\n  Partial<OrbitCoordinates> | \"auto\"\n> {\n  getDefaultValue(): OrbitCoordinatesRequest {\n    return \"auto\";\n  }\n\n  canReuseValue(v1: OrbitCoordinates, v2: OrbitCoordinates) {\n    return v1 === v2 || orbitCoordinatesEqual(v1, v2);\n  }\n\n  async derive(\n    newCoordinates: Partial<OrbitCoordinates> | \"auto\",\n    oldValuePromise: Promise<OrbitCoordinatesRequest>,\n  ): Promise<OrbitCoordinatesRequest> {\n    if (newCoordinates === \"auto\") {\n      return \"auto\";\n    }\n\n    let oldValue = await oldValuePromise;\n    if (oldValue === \"auto\") {\n      oldValue = {};\n    }\n\n    const newValue: Partial<OrbitCoordinates> = Object.assign({}, oldValue);\n    Object.assign(newValue, newCoordinates);\n\n    if (typeof newValue.latitude !== \"undefined\") {\n      newValue.latitude = Math.min(Math.max(newValue.latitude, -90), 90);\n    }\n    if (typeof newValue.longitude !== \"undefined\") {\n      newValue.longitude = mod(newValue.longitude, 360, 180);\n    }\n    return newValue;\n  }\n}\n","import { BoundaryType, Direction } from \"../../../controllers/AnimationTypes\";\nimport { TwistyPropSource } from \"../TwistyProp\";\n\nexport type SimpleDirection = Direction.Forwards | Direction.Backwards;\n\nexport interface PlayingInfo {\n  playing: boolean;\n  direction: SimpleDirection;\n  untilBoundary: BoundaryType; // TODO: allows this to be optional in the setter?\n  // TODO: Is `loop` responsible to add at this point? Maybe we should wait until we've figured out autoplay?\n  // TODO: Combine `loop` into something with BoundaryType?\n  loop: boolean;\n}\n\n// TODO: direction,\nexport class PlayingInfoProp extends TwistyPropSource<\n  PlayingInfo,\n  Partial<PlayingInfo>\n> {\n  async getDefaultValue(): Promise<PlayingInfo> {\n    return {\n      direction: Direction.Forwards,\n      playing: false,\n      untilBoundary: BoundaryType.EntireTimeline,\n      loop: false,\n    };\n  }\n\n  async derive(\n    newInfo: Partial<PlayingInfo>,\n    oldValuePromise: Promise<PlayingInfo>,\n  ): Promise<PlayingInfo> {\n    const oldValue = await oldValuePromise;\n\n    const newValue: PlayingInfo = Object.assign({}, oldValue);\n    Object.assign(newValue, newInfo);\n    return newValue;\n  }\n\n  canReuseValue(v1: PlayingInfo, v2: PlayingInfo) {\n    return (\n      v1.direction === v2.direction &&\n      v1.playing === v2.playing &&\n      v1.untilBoundary === v2.untilBoundary &&\n      v1.loop === v2.loop\n    );\n  }\n}\n","import type { PuzzleDescriptionString } from \"../../../../../puzzle-geometry/PGPuzzles\";\nimport {\n  NoValueType,\n  NO_VALUE,\n  SimpleTwistyPropSource,\n} from \"../../TwistyProp\";\n\nexport class PGPuzzleDescriptionStringProp extends SimpleTwistyPropSource<\n  PuzzleDescriptionString | NoValueType\n> {\n  getDefaultValue(): PuzzleDescriptionString | NoValueType {\n    return NO_VALUE;\n  }\n}\n","import {\n  NoValueType,\n  NO_VALUE,\n  SimpleTwistyPropSource,\n} from \"../../TwistyProp\";\n\nexport const puzzleIDs = {\n  \"3x3x3\": true, // default\n  \"custom\": true,\n  \"2x2x2\": true,\n  \"4x4x4\": true,\n  \"5x5x5\": true,\n  \"6x6x6\": true,\n  \"7x7x7\": true,\n  \"40x40x40\": true,\n  \"megaminx\": true,\n  \"pyraminx\": true,\n  \"square1\": true,\n  \"clock\": true,\n  \"skewb\": true,\n  \"fto\": true,\n  \"gigaminx\": true,\n  \"master_tetraminx\": true,\n  \"kilominx\": true,\n  \"redi_cube\": true,\n};\nexport type PuzzleID = keyof typeof puzzleIDs;\n\n// TODO: Ideally we'd use `null` to mean \"no value\", but `null` has a special meaning\n// for `TwistyProp` and might mess with caching.\n// https://github.com/cubing/cubing.js/blob/63b0a55b83963f68410bb117a2e481052a07e086/src/cubing/twisty/model/TwistyProp.ts#L189-L189\nexport class PuzzleIDRequestProp extends SimpleTwistyPropSource<\n  PuzzleID | NoValueType\n> {\n  getDefaultValue(): PuzzleID | NoValueType {\n    return NO_VALUE;\n  }\n}\n","import type { PuzzleDescriptionString } from \"../../../../../puzzle-geometry/PGPuzzles\";\nimport {\n  cube3x3x3,\n  experimentalCustomPGPuzzleLoader,\n  PuzzleLoader,\n  puzzles,\n} from \"../../../../../puzzles\";\nimport { NoValueType, NO_VALUE, TwistyPropDerived } from \"../../TwistyProp\";\nimport type { PuzzleID } from \"./PuzzleIDRequestProp\";\n8;\ninterface PuzzleLoaderPropInputs {\n  puzzleIDRequest: PuzzleID | NoValueType;\n  puzzleDescriptionRequest: PuzzleDescriptionString | NoValueType;\n}\n\nexport class PuzzleLoaderProp extends TwistyPropDerived<\n  PuzzleLoaderPropInputs,\n  PuzzleLoader\n> {\n  derive(inputs: PuzzleLoaderPropInputs): PuzzleLoader {\n    if (inputs.puzzleIDRequest && inputs.puzzleIDRequest !== NO_VALUE) {\n      const puzzleLoader = puzzles[inputs.puzzleIDRequest];\n      if (!puzzleLoader) {\n        this.userVisibleErrorTracker!.set({\n          errors: [`Invalid puzzle ID: ${inputs.puzzleIDRequest}`],\n        });\n      }\n      return puzzleLoader;\n    }\n    if (\n      inputs.puzzleDescriptionRequest &&\n      inputs.puzzleDescriptionRequest !== NO_VALUE\n    ) {\n      return experimentalCustomPGPuzzleLoader(inputs.puzzleDescriptionRequest);\n    }\n    return cube3x3x3;\n  }\n}\n","import { SimpleTwistyPropSource } from \"../../TwistyProp\";\n\n// TODO: turn these maps into lists?\nexport const setupToLocations = {\n  start: true, // default // TODO: \"beginning\"\n  end: true,\n};\nexport type SetupToLocation = keyof typeof setupToLocations;\n\nexport class SetupAnchorProp extends SimpleTwistyPropSource<SetupToLocation> {\n  getDefaultValue(): SetupToLocation {\n    return \"start\";\n  }\n}\n","import { TwistyPropSource } from \"../TwistyProp\";\n\n// TODO: Pick a better name. `speed` is probably good, although that could mean\n// something else (e.g. shorter, faster moves but still with the same spacing).\nexport class TempoScaleProp extends TwistyPropSource<number, number> {\n  getDefaultValue(): number {\n    return 1;\n  }\n\n  derive(v: number): number {\n    return v < 0 ? 1 : v;\n  }\n}\n","import type { MillisecondTimestamp } from \"../../../controllers/AnimationTypes\";\nimport { SimpleTwistyPropSource } from \"../TwistyProp\";\n\nconst smartTimestamps = {\n  \"start\": true,\n  \"end\": true,\n  \"anchor\": true,\n  \"opposite-anchor\": true,\n};\n\nexport type TimestampRequest =\n  | MillisecondTimestamp\n  | keyof typeof smartTimestamps;\n\nexport class TimestampRequestProp extends SimpleTwistyPropSource<TimestampRequest> {\n  getDefaultValue(): TimestampRequest {\n    return \"opposite-anchor\";\n  }\n\n  // TODO: Support `Promise`\n  set(v: TimestampRequest) {\n    if (!this.validInput(v)) {\n      // TODO: Generalize this to more props. How do we surface this? Throw an error and catch it from sync setters that call into this?\n      return;\n    }\n    super.set(v);\n  }\n\n  validInput(v: TimestampRequest): boolean {\n    if (typeof v === \"number\") {\n      return true;\n    }\n    if (smartTimestamps[v]) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { TwistyPropSource } from \"../TwistyProp\";\n\nexport class URLProp extends TwistyPropSource<URL | null, URL | string | null> {\n  getDefaultValue(): URL | null {\n    return null;\n  }\n\n  derive(input: URL | string | null): URL | null {\n    if (typeof input === \"string\") {\n      return new URL(input, location.href); // TODO\n    }\n    return input;\n  }\n}\n","import { SimpleTwistyPropSource } from \"../TwistyProp\";\n\nexport const viewerLinkPages = {\n  \"twizzle\": true, // default\n  \"experimental-twizzle-explorer\": true,\n  \"none\": true,\n};\nexport type ViewerLinkPage = keyof typeof viewerLinkPages;\nexport type ViewerLinkPageWithAuto = ViewerLinkPage | \"auto\";\n\nexport class ViewerLinkProp extends SimpleTwistyPropSource<ViewerLinkPageWithAuto> {\n  getDefaultValue(): ViewerLinkPageWithAuto {\n    return \"auto\";\n  }\n}\n","import { SimpleTwistyPropSource } from \"../TwistyProp\";\n\n// TODO: turn these maps into lists?\nexport const visualizationFormats = {\n  \"3D\": true, // default\n  \"2D\": true,\n  \"experimental-2D-LL\": true, // TODO\n  \"PG3D\": true,\n};\nexport type VisualizationFormat = keyof typeof visualizationFormats;\nexport type VisualizationFormatWithAuto = VisualizationFormat | \"auto\";\n\nexport class VisualizationFormatProp extends SimpleTwistyPropSource<VisualizationFormatWithAuto> {\n  getDefaultValue(): VisualizationFormatWithAuto {\n    return \"auto\";\n  }\n}\n","import { DEGREES_PER_RADIAN } from \"../../../views/3D/TAU\";\nimport type { PuzzleID } from \"../puzzle/structure/PuzzleIDRequestProp\";\nimport { TwistyPropDerived } from \"../TwistyProp\";\nimport {\n  CoordinateDegrees,\n  OrbitCoordinates,\n  orbitCoordinatesEqual,\n  OrbitCoordinatesRequest,\n} from \"./OrbitCoordinatesRequestProp\";\nimport type { VisualizationStrategy } from \"./VisualizationStrategyProp\";\n\ninterface OrbitCoordinatesPropInputs {\n  orbitCoordinatesRequest: OrbitCoordinatesRequest;\n  latitudeLimit: CoordinateDegrees;\n  puzzleID: PuzzleID;\n  strategy: VisualizationStrategy;\n}\n\nexport class OrbitCoordinatesProp extends TwistyPropDerived<\n  OrbitCoordinatesPropInputs,\n  OrbitCoordinates\n> {\n  canReuseValue(v1: OrbitCoordinates, v2: OrbitCoordinates) {\n    return orbitCoordinatesEqual(v1, v2);\n  }\n\n  async derive(inputs: OrbitCoordinatesPropInputs): Promise<OrbitCoordinates> {\n    if (inputs.orbitCoordinatesRequest === \"auto\") {\n      return defaultCameraOrbitCoordinates(inputs.puzzleID, inputs.strategy);\n    }\n\n    const req: OrbitCoordinates = Object.assign(\n      Object.assign(\n        {},\n        defaultCameraOrbitCoordinates(inputs.puzzleID, inputs.strategy),\n        inputs.orbitCoordinatesRequest,\n      ),\n    );\n\n    if (Math.abs(req.latitude) <= inputs.latitudeLimit) {\n      return req;\n    } else {\n      const { latitude, longitude, distance } = req;\n      // TODO: Should we re-normalize the request, so we don't depend on normalization in the input?\n      return {\n        latitude: inputs.latitudeLimit * Math.sign(latitude),\n        longitude,\n        distance,\n      };\n    }\n  }\n}\n\n// const DEFAULT_CAMERA_Z = 5;\n// // Golden ratio is perfect for FTO and Megaminx.\n// const DEFAULT_CAMERA_Y = DEFAULT_CAMERA_Z * (2 / (1 + Math.sqrt(5)));\nexport const centeredCameraOrbitCoordinates: OrbitCoordinates = {\n  latitude: 31.717474411461005,\n  longitude: 0,\n  distance: 5.877852522924731,\n};\n\n// This is tuned so that the hint facelets for 3x3x3 always fit in the canvas.\nexport const cubeCube3DCameraOrbitCoordinates: OrbitCoordinates = {\n  latitude: 35,\n  longitude: 30,\n  distance: 6,\n};\n\n// This is tuned so that the hint facelets always fit in the canvas.\nexport const cubePG3DCameraOrbitCoordinates: OrbitCoordinates = {\n  latitude: 35,\n  longitude: 30,\n  distance: 6.25,\n};\n\nexport const megaminxCameraOrbitCoordinates: OrbitCoordinates = {\n  latitude: Math.atan(1 / 2) * DEGREES_PER_RADIAN,\n  longitude: 0,\n  distance: 6.7,\n};\n\nexport const pyraminxCameraOrbitCoordinates: OrbitCoordinates = {\n  latitude: 26.56505117707799,\n  longitude: 0,\n  distance: 6,\n};\n\nexport const cornerCameraOrbitCoordinates: OrbitCoordinates = {\n  latitude: 35.264389682754654,\n  longitude: 45,\n  distance: 6.928203230275509,\n};\n\n// TODO\nexport function defaultCameraOrbitCoordinates(\n  puzzleID: PuzzleID,\n  strategy: VisualizationStrategy,\n): OrbitCoordinates {\n  if (puzzleID[1] === \"x\") {\n    if (strategy === \"Cube3D\") {\n      return cubeCube3DCameraOrbitCoordinates;\n    } else {\n      return cubePG3DCameraOrbitCoordinates;\n    }\n  } else {\n    switch (puzzleID) {\n      case \"megaminx\":\n      case \"gigaminx\":\n        return megaminxCameraOrbitCoordinates;\n      case \"pyraminx\":\n      case \"master_tetraminx\":\n        return pyraminxCameraOrbitCoordinates;\n      case \"skewb\":\n        return cubePG3DCameraOrbitCoordinates;\n      default:\n        return centeredCameraOrbitCoordinates;\n    }\n  }\n}\n// TODO: templatize\nexport interface ManagedAttribute<K> {\n  string: string;\n  value: K;\n  setString(s: string): boolean;\n  setValue(v: K): boolean;\n}\n","import type { PuzzleLoader } from \"../../../../../puzzles\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport type { PuzzleID } from \"./PuzzleIDRequestProp\";\n\nexport class PuzzleIDProp extends TwistyPropDerived<\n  { puzzleLoader: PuzzleLoader },\n  PuzzleID\n> {\n  async derive(inputs: { puzzleLoader: PuzzleLoader }): Promise<PuzzleID> {\n    return inputs.puzzleLoader.id as PuzzleID;\n  }\n}\n","import type { Texture, TextureLoader } from \"three\";\nimport { THREEJS } from \"../../../../heavy-code-imports/3d\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\n\nlet cachedLoader: TextureLoader | null = null;\nasync function loader(): Promise<TextureLoader> {\n  return (cachedLoader ??= new (await THREEJS).TextureLoader());\n}\n\ntype SpritePropInputs = {\n  spriteURL: URL | null;\n};\n\n// TODO: Find a way to make the 3D elements own this, instead of the main `TwistyPlayerModel`.\nexport class SpriteProp extends TwistyPropDerived<\n  SpritePropInputs,\n  Texture | null\n> {\n  async derive(inputs: SpritePropInputs): Promise<Texture | null> {\n    const { spriteURL: textureURL } = inputs;\n    if (textureURL === null) {\n      return null;\n    }\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise(async (resolve, _reject) => {\n      const onLoadingError = (): void => {\n        console.warn(\"Could not load sprite:\", textureURL.toString());\n        resolve(null);\n      };\n      // TODO: provide a way to listen for errors?\n      try {\n        (await loader()).load(\n          textureURL.toString(),\n          resolve,\n          onLoadingError,\n          onLoadingError,\n        );\n      } catch (e) {\n        onLoadingError();\n      }\n    });\n  }\n}\n","import type { VisualizationFormatWithAuto } from \"./VisualizationProp\";\nimport { TwistyPropDerived } from \"../TwistyProp\";\nimport type { PuzzleID } from \"../../..\";\n\ntype VisualizationStrategyPropInputs = {\n  visualizationRequest: VisualizationFormatWithAuto;\n  puzzleID: PuzzleID;\n};\n\nexport type VisualizationStrategy =\n  | \"Cube3D\"\n  | \"2D\"\n  | \"experimental-2D-LL\"\n  | \"PG3D\";\n\nexport class VisualizationStrategyProp extends TwistyPropDerived<\n  VisualizationStrategyPropInputs,\n  VisualizationStrategy\n> {\n  derive(inputs: VisualizationStrategyPropInputs): VisualizationStrategy {\n    switch (inputs.puzzleID) {\n      case \"clock\":\n      case \"square1\":\n      case \"kilominx\":\n      case \"redi_cube\":\n        return \"2D\";\n      case \"3x3x3\":\n        switch (inputs.visualizationRequest) {\n          case \"auto\":\n          case \"3D\":\n            return \"Cube3D\";\n          default:\n            return inputs.visualizationRequest;\n        }\n      default:\n        switch (inputs.visualizationRequest) {\n          case \"auto\":\n          case \"3D\":\n            return \"PG3D\";\n          case \"experimental-2D-LL\":\n            return \"2D\";\n          default:\n            return inputs.visualizationRequest;\n        }\n    }\n  }\n}\n","import {\n  Alg,\n  Grouping,\n  LineComment,\n  Commutator,\n  Conjugate,\n  Move,\n  Newline,\n  Pause,\n  TraversalUp,\n} from \"../../../alg\";\nimport type { Duration } from \"../AnimationTypes\";\n\nexport function constantDurationForAmount(_amount: number): Duration {\n  return 1000;\n}\n\nexport function defaultDurationForAmount(amount: number): Duration {\n  switch (Math.abs(amount)) {\n    case 0:\n      return 0;\n    case 1:\n      return 1000;\n    case 2:\n      return 1500;\n    default:\n      return 2000;\n  }\n}\n// eslint-disable-next-line no-inner-declarations\nexport function ExperimentalScaledDefaultDurationForAmount(\n  scale: number,\n  amount: number,\n): Duration {\n  switch (Math.abs(amount)) {\n    case 0:\n      return 0;\n    case 1:\n      return scale * 1000;\n    case 2:\n      return scale * 1500;\n    default:\n      return scale * 2000;\n  }\n}\n\nexport class AlgDuration extends TraversalUp<Duration> {\n  // TODO: Pass durationForAmount as Down type instead?\n  constructor(\n    public durationForAmount: (\n      amount: number,\n    ) => Duration = defaultDurationForAmount,\n  ) {\n    super();\n  }\n\n  public traverseAlg(alg: Alg): Duration {\n    let total = 0;\n    for (const unit of alg.units()) {\n      total += this.traverseUnit(unit);\n    }\n    return total;\n  }\n\n  public traverseGrouping(grouping: Grouping): Duration {\n    return grouping.amount * this.traverseAlg(grouping.alg);\n  }\n\n  public traverseMove(move: Move): Duration {\n    return this.durationForAmount(move.amount);\n  }\n\n  public traverseCommutator(commutator: Commutator): Duration {\n    return (\n      2 * (this.traverseAlg(commutator.A) + this.traverseAlg(commutator.B))\n    );\n  }\n\n  public traverseConjugate(conjugate: Conjugate): Duration {\n    return 2 * this.traverseAlg(conjugate.A) + this.traverseAlg(conjugate.B);\n  }\n\n  public traversePause(_pause: Pause): Duration {\n    return this.durationForAmount(1);\n  }\n\n  public traverseNewline(_newline: Newline): Duration {\n    return this.durationForAmount(1);\n  }\n\n  public traverseLineComment(_comment: LineComment): Duration {\n    return this.durationForAmount(0);\n  }\n}\n","import {\n  LineComment,\n  Commutator,\n  Conjugate,\n  Pause,\n  TraversalUp,\n  Move,\n  Alg,\n  Grouping,\n  Newline,\n} from \"../../../../alg\";\nimport type { MillisecondTimestamp } from \"../../AnimationTypes\";\nimport { defaultDurationForAmount } from \"../AlgDuration\";\n\nexport type AnimatedLeafUnit = Move | Pause;\nexport interface LocalAnimLeavesWithRange {\n  animLeafUnit: AnimatedLeafUnit;\n  msUntilNext: MillisecondTimestamp;\n  duration: MillisecondTimestamp;\n}\n\nexport interface AnimLeafWithRange {\n  animLeaf: AnimatedLeafUnit;\n  start: MillisecondTimestamp;\n  end: MillisecondTimestamp;\n}\n\nconst axisLookup: Record<string, \"x\" | \"y\" | \"z\"> = {\n  u: \"y\",\n  l: \"x\",\n  f: \"z\",\n  r: \"x\",\n  b: \"z\",\n  d: \"y\",\n  m: \"x\",\n  e: \"y\",\n  s: \"z\",\n  x: \"x\",\n  y: \"y\",\n  z: \"z\",\n};\n\nfunction isSameAxis(move1: Move, move2: Move): boolean {\n  return (\n    axisLookup[move1.family[0].toLowerCase()] ===\n    axisLookup[move2.family[0].toLowerCase()]\n  );\n}\n\n// TODO: Replace this with an optimized implementation.\n// TODO: Consider `(x U)` and `(U x F)` to be simultaneous.\nexport class LocalSimulMoves extends TraversalUp<LocalAnimLeavesWithRange[]> {\n  public traverseAlg(alg: Alg): LocalAnimLeavesWithRange[] {\n    const processed: LocalAnimLeavesWithRange[][] = [];\n    for (const nestedUnit of alg.units()) {\n      processed.push(this.traverseUnit(nestedUnit));\n    }\n    return Array.prototype.concat(...processed) as LocalAnimLeavesWithRange[];\n  }\n\n  public traverseGroupingOnce(alg: Alg): LocalAnimLeavesWithRange[] {\n    if (alg.experimentalIsEmpty()) {\n      return [];\n    }\n\n    for (const unit of alg.units()) {\n      if (!unit.is(Move)) {\n        // TODO: define the type statically on the class?\n        return this.traverseAlg(alg);\n      }\n    }\n\n    const moves = Array.from(alg.units()) as Move[];\n    let maxSimulDur = defaultDurationForAmount(moves[0].amount);\n    for (let i = 0; i < moves.length - 1; i++) {\n      for (let j = 1; j < moves.length; j++) {\n        if (!isSameAxis(moves[i], moves[j])) {\n          return this.traverseAlg(alg);\n        }\n      }\n      maxSimulDur = Math.max(\n        maxSimulDur,\n        defaultDurationForAmount(moves[i].amount),\n      );\n    }\n\n    const localMovesWithRange: LocalAnimLeavesWithRange[] = moves.map(\n      (blockMove): LocalAnimLeavesWithRange => {\n        return {\n          animLeafUnit: blockMove,\n          msUntilNext: 0,\n          duration: maxSimulDur,\n        };\n      },\n    );\n    localMovesWithRange[localMovesWithRange.length - 1].msUntilNext =\n      maxSimulDur;\n    return localMovesWithRange;\n  }\n\n  public traverseGrouping(grouping: Grouping): LocalAnimLeavesWithRange[] {\n    const processed: LocalAnimLeavesWithRange[][] = [];\n\n    const segmentOnce: Alg =\n      grouping.amount > 0 ? grouping.alg : grouping.alg.invert();\n    for (let i = 0; i < Math.abs(grouping.amount); i++) {\n      processed.push(this.traverseGroupingOnce(segmentOnce));\n    }\n    return Array.prototype.concat(...processed) as LocalAnimLeavesWithRange[];\n  }\n\n  public traverseMove(move: Move): LocalAnimLeavesWithRange[] {\n    const duration = defaultDurationForAmount(move.amount);\n    return [\n      {\n        animLeafUnit: move,\n        msUntilNext: duration,\n        duration,\n      },\n    ];\n  }\n\n  public traverseCommutator(\n    commutator: Commutator,\n  ): LocalAnimLeavesWithRange[] {\n    const processed: LocalAnimLeavesWithRange[][] = [];\n    const segmentsOnce: Alg[] = [\n      commutator.A,\n      commutator.B,\n      commutator.A.invert(),\n      commutator.B.invert(),\n    ];\n    for (const segment of segmentsOnce) {\n      processed.push(this.traverseGroupingOnce(segment));\n    }\n    return Array.prototype.concat(...processed) as LocalAnimLeavesWithRange[];\n  }\n\n  public traverseConjugate(conjugate: Conjugate): LocalAnimLeavesWithRange[] {\n    const processed: LocalAnimLeavesWithRange[][] = [];\n    const segmentsOnce: Alg[] = [\n      conjugate.A,\n      conjugate.B,\n      conjugate.A.invert(),\n    ];\n    for (const segment of segmentsOnce) {\n      processed.push(this.traverseGroupingOnce(segment));\n    }\n    return Array.prototype.concat(...processed) as LocalAnimLeavesWithRange[];\n  }\n\n  public traversePause(pause: Pause): LocalAnimLeavesWithRange[] {\n    const duration = defaultDurationForAmount(1);\n    return [\n      {\n        animLeafUnit: pause,\n        msUntilNext: duration, // TODO\n        duration,\n      },\n    ];\n  }\n\n  public traverseNewline(_newline: Newline): LocalAnimLeavesWithRange[] {\n    return [];\n  }\n\n  public traverseLineComment(\n    _comment: LineComment,\n  ): LocalAnimLeavesWithRange[] {\n    return [];\n  }\n}\n\nconst localSimulMovesInstance = new LocalSimulMoves();\n\nconst localSimulMoves = localSimulMovesInstance.traverseAlg.bind(\n  localSimulMovesInstance,\n) as (a: Alg) => LocalAnimLeavesWithRange[];\n\nexport function simulMoves(a: Alg): AnimLeafWithRange[] {\n  let timestamp = 0;\n  const l = localSimulMoves(a).map(\n    (localSimulMove: LocalAnimLeavesWithRange): AnimLeafWithRange => {\n      const leafWithRange = {\n        animLeaf: localSimulMove.animLeafUnit,\n        start: timestamp,\n        end: timestamp + localSimulMove.duration,\n      };\n      timestamp += localSimulMove.msUntilNext;\n      return leafWithRange;\n    },\n  );\n  return l;\n}\n","import { Alg, Move } from \"../../../../alg\";\nimport type { KPuzzle, KTransformation } from \"../../../../kpuzzle\";\nimport type { KState } from \"../../../../kpuzzle/KState\";\nimport {\n  Direction,\n  Duration,\n  PuzzlePosition,\n  Timestamp,\n} from \"../../AnimationTypes\";\nimport type { CurrentMove, CurrentMoveInfo } from \"../AlgIndexer\";\nimport { AnimatedLeafUnit, AnimLeafWithRange, simulMoves } from \"./simul-moves\";\n\nconst demos: Record<string, AnimLeafWithRange[]> = {\n  \"y' y' U' E D R2 r2 F2 B2 U E D' R2 L2' z2 S2 U U D D S2 F2' B2\": [\n    { animLeaf: new Move(\"y\", -1), start: 0, end: 1000 },\n    { animLeaf: new Move(\"y\", -1), start: 1000, end: 2000 },\n    { animLeaf: new Move(\"U\", -1), start: 1000, end: 1600 },\n    { animLeaf: new Move(\"E\", 1), start: 1200, end: 1800 },\n    { animLeaf: new Move(\"D\"), start: 1400, end: 2000 },\n    { animLeaf: new Move(\"R\", 2), start: 2000, end: 3500 },\n    { animLeaf: new Move(\"r\", 2), start: 2000, end: 3500 },\n    { animLeaf: new Move(\"F\", 2), start: 3500, end: 4200 },\n    { animLeaf: new Move(\"B\", 2), start: 3800, end: 4500 },\n    { animLeaf: new Move(\"U\", 1), start: 4500, end: 5500 },\n    { animLeaf: new Move(\"E\", 1), start: 4500, end: 5500 },\n    { animLeaf: new Move(\"D\", -1), start: 4500, end: 5500 },\n    { animLeaf: new Move(\"R\", 2), start: 5500, end: 6500 },\n    { animLeaf: new Move(\"L\", -2), start: 5500, end: 6500 },\n    { animLeaf: new Move(\"z\", 2), start: 5500, end: 6500 },\n    { animLeaf: new Move(\"S\", 2), start: 6500, end: 7500 },\n    { animLeaf: new Move(\"U\"), start: 7500, end: 8000 },\n    { animLeaf: new Move(\"D\"), start: 7750, end: 8250 },\n    { animLeaf: new Move(\"U\"), start: 8000, end: 8500 },\n    { animLeaf: new Move(\"D\"), start: 8250, end: 8750 },\n    { animLeaf: new Move(\"S\", 2), start: 8750, end: 9250 },\n    { animLeaf: new Move(\"F\", -2), start: 8750, end: 10000 },\n    { animLeaf: new Move(\"B\", 2), start: 8750, end: 10000 },\n  ],\n  \"M' R' U' D' M R\": [\n    { animLeaf: new Move(\"M\", -1), start: 0, end: 1000 },\n    { animLeaf: new Move(\"R\", -1), start: 0, end: 1000 },\n    { animLeaf: new Move(\"U\", -1), start: 1000, end: 2000 },\n    { animLeaf: new Move(\"D\", -1), start: 1000, end: 2000 },\n    { animLeaf: new Move(\"M\"), start: 2000, end: 3000 },\n    { animLeaf: new Move(\"R\"), start: 2000, end: 3000 },\n  ],\n  \"U' E' r E r2' E r U E\": [\n    { animLeaf: new Move(\"U\", -1), start: 0, end: 1000 },\n    { animLeaf: new Move(\"E\", -1), start: 0, end: 1000 },\n    { animLeaf: new Move(\"r\"), start: 1000, end: 2500 },\n    { animLeaf: new Move(\"E\"), start: 2500, end: 3500 },\n    { animLeaf: new Move(\"r\", -2), start: 3500, end: 5000 },\n    { animLeaf: new Move(\"E\"), start: 5000, end: 6000 },\n    { animLeaf: new Move(\"r\"), start: 6000, end: 7000 },\n    { animLeaf: new Move(\"U\"), start: 7000, end: 8000 },\n    { animLeaf: new Move(\"E\"), start: 7000, end: 8000 },\n  ],\n};\n\nexport class SimultaneousMoveIndexer {\n  private animLeaves: AnimLeafWithRange[];\n  // TODO: Allow custom `durationFn`.\n\n  constructor(private kpuzzle: KPuzzle, alg: Alg) {\n    this.animLeaves = demos[alg.toString()] ?? simulMoves(alg);\n    // TODO: Avoid assuming all base moves are block moves.\n  }\n\n  public getAnimLeaf(index: number): AnimatedLeafUnit | null {\n    return (\n      this.animLeaves[Math.min(index, this.animLeaves.length - 1)]?.animLeaf ??\n      null\n    );\n  }\n\n  private getAnimLeafWithRange(index: number): AnimLeafWithRange {\n    return this.animLeaves[Math.min(index, this.animLeaves.length - 1)];\n  }\n\n  public indexToMoveStartTimestamp(index: number): Timestamp {\n    let start = 0;\n    if (this.animLeaves.length > 0) {\n      start =\n        this.animLeaves[Math.min(index, this.animLeaves.length - 1)].start;\n    }\n    return start;\n  }\n\n  public timestampToIndex(timestamp: Timestamp): number {\n    let i = 0;\n    for (i = 0; i < this.animLeaves.length; i++) {\n      if (this.animLeaves[i].start >= timestamp) {\n        return Math.max(0, i - 1);\n      }\n    }\n    return Math.max(0, i - 1);\n  }\n\n  public timestampToPosition(\n    timestamp: Timestamp,\n    startState?: KState,\n  ): PuzzlePosition {\n    const currentMoveInfo = this.currentMoveInfo(timestamp);\n\n    let state = startState ?? this.kpuzzle.identityTransformation().toKState();\n    for (const leafWithRange of this.animLeaves.slice(\n      0,\n      currentMoveInfo.stateIndex,\n    )) {\n      const move = leafWithRange.animLeaf.as(Move);\n      if (move !== null) {\n        state = state.applyMove(move);\n      }\n    }\n\n    return {\n      state,\n      movesInProgress: currentMoveInfo.currentMoves,\n    };\n  }\n\n  // TODO: Caching\n  public currentMoveInfo(timestamp: Timestamp): CurrentMoveInfo {\n    // The starting timestamp of the earliest active move.\n    let windowEarliestTimestamp = Infinity;\n    for (const leafWithRange of this.animLeaves) {\n      if (leafWithRange.start <= timestamp && leafWithRange.end >= timestamp) {\n        windowEarliestTimestamp = Math.min(\n          windowEarliestTimestamp,\n          leafWithRange.start,\n        );\n      } else if (leafWithRange.start > timestamp) {\n        break;\n      }\n    }\n\n    const currentMoves: CurrentMove[] = [];\n    const movesStarting: CurrentMove[] = [];\n    const movesFinishing: CurrentMove[] = [];\n    const movesFinished: CurrentMove[] = [];\n    let latestStart: number = -Infinity; // TODO: is there a better way to accumulate this?\n    let earliestEnd: number = Infinity; // TODO: is there a better way to accumulate this?\n\n    let stateIndex: number = 0;\n    for (const leafWithRange of this.animLeaves) {\n      if (leafWithRange.end <= windowEarliestTimestamp) {\n        stateIndex++;\n      } else if (leafWithRange.start > timestamp) {\n        break;\n      } else {\n        const move = leafWithRange.animLeaf.as(Move);\n        if (move !== null) {\n          let fraction =\n            (timestamp - leafWithRange.start) /\n            (leafWithRange.end - leafWithRange.start);\n          let moveFinished = false;\n          if (fraction > 1) {\n            fraction = 1;\n            moveFinished = true;\n          }\n          const currentMove = {\n            move: move,\n            direction: Direction.Forwards,\n            fraction: fraction,\n            startTimestamp: leafWithRange.start,\n            endTimestamp: leafWithRange.end,\n          };\n          switch (fraction) {\n            case 0:\n              movesStarting.push(currentMove);\n              break;\n            case 1:\n              // Generalize this to avoid reordering commuting moves.\n              if (moveFinished) {\n                movesFinished.push(currentMove);\n              } else {\n                movesFinishing.push(currentMove);\n              }\n              break;\n            default:\n              currentMoves.push(currentMove);\n              latestStart = Math.max(latestStart, leafWithRange.start);\n              earliestEnd = Math.min(earliestEnd, leafWithRange.end);\n          }\n        }\n      }\n    }\n    return {\n      stateIndex,\n      currentMoves,\n      latestStart,\n      earliestEnd,\n      movesStarting,\n      movesFinishing,\n      movesFinished,\n    };\n  }\n\n  public stateAtIndex(index: number, startState?: KState): KState {\n    let state = startState ?? this.kpuzzle.startState();\n    for (let i = 0; i < this.animLeaves.length && i < index; i++) {\n      const leafWithRange = this.animLeaves[i];\n      const move = leafWithRange.animLeaf.as(Move);\n      if (move !== null) {\n        state = state.applyMove(move);\n      }\n    }\n    return state;\n  }\n\n  public transformationAtIndex(index: number): KTransformation {\n    let transformation = this.kpuzzle.identityTransformation();\n    for (const leafWithRange of this.animLeaves.slice(0, index)) {\n      const move = leafWithRange.animLeaf.as(Move);\n      if (move !== null) {\n        transformation = transformation.applyMove(move);\n      }\n    }\n    return transformation;\n  }\n\n  public algDuration(): Duration {\n    let max = 0;\n    for (const leafWithRange of this.animLeaves) {\n      max = Math.max(max, leafWithRange.end);\n    }\n    return max;\n  }\n\n  public numAnimatedLeaves(): number {\n    // TODO: Cache internally once performance matters.\n    return this.animLeaves.length;\n  }\n\n  public moveDuration(index: number): number {\n    const move = this.getAnimLeafWithRange(index);\n    return move.end - move.start;\n  }\n}\n","import {\n  Alg,\n  Commutator,\n  Conjugate,\n  experimentalDirectedGenerator,\n  ExperimentalIterationDirection,\n  Grouping,\n  LineComment,\n  Move,\n  Newline,\n  Pause,\n  TraversalDownUp,\n  TraversalUp,\n  Unit,\n} from \"../../../../alg\";\nimport type { KPuzzle, KTransformation } from \"../../../../kpuzzle\";\nimport type { Duration } from \"../../AnimationTypes\";\nimport { AlgDuration, defaultDurationForAmount } from \"../AlgDuration\";\n\nexport class AlgPartDecoration {\n  constructor(\n    public moveCount: number,\n    public duration: number,\n    public forward: KTransformation,\n    public backward: KTransformation,\n    public children: Array<AlgPartDecoration> = [],\n  ) {}\n}\nexport class DecoratorConstructor extends TraversalUp<AlgPartDecoration> {\n  private identity: KTransformation;\n  private dummyLeaf: AlgPartDecoration;\n  private durationFn: TraversalUp<Duration> = new AlgDuration(\n    defaultDurationForAmount,\n  );\n\n  private cache: { [key: string]: AlgPartDecoration } = {};\n\n  constructor(private kpuzzle: KPuzzle) {\n    super();\n    this.identity = kpuzzle.identityTransformation();\n    this.dummyLeaf = new AlgPartDecoration(\n      0,\n      0,\n      this.identity,\n      this.identity,\n      [],\n    );\n  }\n\n  public traverseAlg(alg: Alg): AlgPartDecoration {\n    let moveCount = 0;\n    let duration = 0;\n    let transformation = this.identity;\n    const child: Array<AlgPartDecoration> = [];\n    for (const unit of alg.units()) {\n      const apd = this.traverseUnit(unit);\n      moveCount += apd.moveCount;\n      duration += apd.duration;\n      if (transformation === this.identity) {\n        transformation = apd.forward;\n      } else {\n        transformation = transformation.applyTransformation(apd.forward);\n      }\n      child.push(apd);\n    }\n    return new AlgPartDecoration(\n      moveCount,\n      duration,\n      transformation,\n      transformation.invert(),\n      child,\n    );\n  }\n\n  public traverseGrouping(grouping: Grouping): AlgPartDecoration {\n    const dec = this.traverseAlg(grouping.alg);\n    return this.mult(dec, grouping.amount, [dec]);\n  }\n\n  public traverseMove(move: Move): AlgPartDecoration {\n    const key = move.toString();\n    let r: AlgPartDecoration | undefined = this.cache[key];\n    if (r) {\n      return r;\n    }\n    const transformation = this.kpuzzle.moveToTransformation(move);\n    r = new AlgPartDecoration(\n      1,\n      this.durationFn.traverseUnit(move),\n      transformation,\n      transformation.invert(),\n    );\n    this.cache[key] = r;\n    return r;\n  }\n\n  public traverseCommutator(commutator: Commutator): AlgPartDecoration {\n    const decA = this.traverseAlg(commutator.A);\n    const decB = this.traverseAlg(commutator.B);\n    const AB = decA.forward.applyTransformation(decB.forward);\n    const ApBp = decA.backward.applyTransformation(decB.backward);\n    const ABApBp = AB.applyTransformation(ApBp);\n    const dec = new AlgPartDecoration(\n      2 * (decA.moveCount + decB.moveCount),\n      2 * (decA.duration + decB.duration),\n      ABApBp,\n      ABApBp.invert(),\n      [decA, decB],\n    );\n    return this.mult(dec, 1, [dec, decA, decB]);\n  }\n\n  public traverseConjugate(conjugate: Conjugate): AlgPartDecoration {\n    const decA = this.traverseAlg(conjugate.A);\n    const decB = this.traverseAlg(conjugate.B);\n    const AB = decA.forward.applyTransformation(decB.forward);\n    const ABAp = AB.applyTransformation(decA.backward);\n    const dec = new AlgPartDecoration(\n      2 * decA.moveCount + decB.moveCount,\n      2 * decA.duration + decB.duration,\n      ABAp,\n      ABAp.invert(),\n      [decA, decB],\n    );\n    return this.mult(dec, 1, [dec, decA, decB]);\n  }\n\n  public traversePause(pause: Pause): AlgPartDecoration {\n    return new AlgPartDecoration(\n      1,\n      this.durationFn.traverseUnit(pause),\n      this.identity,\n      this.identity,\n    );\n  }\n\n  public traverseNewline(_newline: Newline): AlgPartDecoration {\n    return this.dummyLeaf;\n  }\n\n  public traverseLineComment(_comment: LineComment): AlgPartDecoration {\n    return this.dummyLeaf;\n  }\n\n  private mult(\n    apd: AlgPartDecoration,\n    n: number,\n    child: Array<AlgPartDecoration>,\n  ): AlgPartDecoration {\n    const absn = Math.abs(n);\n    const st = apd.forward.selfMultiply(n);\n    return new AlgPartDecoration(\n      apd.moveCount * absn,\n      apd.duration * absn,\n      st,\n      st.invert(),\n      child,\n    );\n  }\n}\nclass WalkerDown {\n  constructor(public apd: AlgPartDecoration, public back: boolean) {\n    /**/\n  }\n}\nexport class AlgWalker extends TraversalDownUp<WalkerDown, boolean> {\n  public move?: Unit;\n  public moveDuration: number;\n  public back: boolean;\n  public st: KTransformation;\n  public root: WalkerDown;\n  public i: number;\n  public dur: number;\n  private goali: number;\n  private goaldur: number;\n  constructor(\n    public kpuzzle: KPuzzle,\n    public algOrUnit: Alg | Unit, // TODO: can we keep these separate?\n    public apd: AlgPartDecoration,\n  ) {\n    super();\n    this.i = -1;\n    this.dur = -1;\n    this.goali = -1;\n    this.goaldur = -1;\n    this.move = undefined;\n    this.back = false;\n    this.moveDuration = 0;\n    this.st = this.kpuzzle.identityTransformation();\n    this.root = new WalkerDown(this.apd, false);\n  }\n\n  public moveByIndex(loc: number): boolean {\n    if (this.i >= 0 && this.i === loc) {\n      return this.move !== undefined;\n    }\n    return this.dosearch(loc, Infinity);\n  }\n\n  public moveByDuration(dur: number): boolean {\n    if (\n      this.dur >= 0 &&\n      this.dur < dur &&\n      this.dur + this.moveDuration >= dur\n    ) {\n      return this.move !== undefined;\n    }\n    return this.dosearch(Infinity, dur);\n  }\n\n  public dosearch(loc: number, dur: number): boolean {\n    this.goali = loc;\n    this.goaldur = dur;\n    this.i = 0;\n    this.dur = 0;\n    this.move = undefined;\n    this.moveDuration = 0;\n    this.back = false;\n    this.st = this.kpuzzle.identityTransformation();\n    const r = this.algOrUnit.is(Alg)\n      ? this.traverseAlg(this.algOrUnit as Alg, this.root)\n      : this.traverseUnit(this.algOrUnit as Unit, this.root); // TODO\n    return r;\n  }\n\n  public traverseAlg(alg: Alg, wd: WalkerDown): boolean {\n    if (!this.firstcheck(wd)) {\n      return false;\n    }\n    let i = wd.back ? alg.experimentalNumUnits() - 1 : 0;\n    for (const unit of experimentalDirectedGenerator(\n      alg.units(),\n      wd.back\n        ? ExperimentalIterationDirection.Backwards\n        : ExperimentalIterationDirection.Forwards,\n    )) {\n      if (\n        this.traverseUnit(unit, new WalkerDown(wd.apd.children[i], wd.back))\n      ) {\n        return true;\n      }\n      i += wd.back ? -1 : 1;\n    }\n    return false;\n  }\n\n  public traverseGrouping(grouping: Grouping, wd: WalkerDown): boolean {\n    if (!this.firstcheck(wd)) {\n      return false;\n    }\n    const back = this.domult(wd, grouping.amount);\n    return this.traverseAlg(\n      grouping.alg,\n      new WalkerDown(wd.apd.children[0], back),\n    );\n  }\n\n  public traverseMove(move: Move, wd: WalkerDown): boolean {\n    if (!this.firstcheck(wd)) {\n      return false;\n    }\n    this.move = move;\n    this.moveDuration = wd.apd.duration;\n    this.back = wd.back;\n    return true;\n  }\n\n  public traverseCommutator(commutator: Commutator, wd: WalkerDown): boolean {\n    if (!this.firstcheck(wd)) {\n      return false;\n    }\n    const back = this.domult(wd, 1);\n    if (back) {\n      return (\n        this.traverseAlg(\n          commutator.B,\n          new WalkerDown(wd.apd.children[2], !back),\n        ) ||\n        this.traverseAlg(\n          commutator.A,\n          new WalkerDown(wd.apd.children[1], !back),\n        ) ||\n        this.traverseAlg(\n          commutator.B,\n          new WalkerDown(wd.apd.children[2], back),\n        ) ||\n        this.traverseAlg(commutator.A, new WalkerDown(wd.apd.children[1], back))\n      );\n    } else {\n      return (\n        this.traverseAlg(\n          commutator.A,\n          new WalkerDown(wd.apd.children[1], back),\n        ) ||\n        this.traverseAlg(\n          commutator.B,\n          new WalkerDown(wd.apd.children[2], back),\n        ) ||\n        this.traverseAlg(\n          commutator.A,\n          new WalkerDown(wd.apd.children[1], !back),\n        ) ||\n        this.traverseAlg(\n          commutator.B,\n          new WalkerDown(wd.apd.children[2], !back),\n        )\n      );\n    }\n  }\n\n  public traverseConjugate(conjugate: Conjugate, wd: WalkerDown): boolean {\n    if (!this.firstcheck(wd)) {\n      return false;\n    }\n    const back = this.domult(wd, 1);\n    if (back) {\n      return (\n        this.traverseAlg(\n          conjugate.A,\n          new WalkerDown(wd.apd.children[1], !back),\n        ) ||\n        this.traverseAlg(\n          conjugate.B,\n          new WalkerDown(wd.apd.children[2], back),\n        ) ||\n        this.traverseAlg(conjugate.A, new WalkerDown(wd.apd.children[1], back))\n      );\n    } else {\n      return (\n        this.traverseAlg(\n          conjugate.A,\n          new WalkerDown(wd.apd.children[1], back),\n        ) ||\n        this.traverseAlg(\n          conjugate.B,\n          new WalkerDown(wd.apd.children[2], back),\n        ) ||\n        this.traverseAlg(conjugate.A, new WalkerDown(wd.apd.children[1], !back))\n      );\n    }\n  }\n\n  public traversePause(pause: Pause, wd: WalkerDown): boolean {\n    if (!this.firstcheck(wd)) {\n      return false;\n    }\n    this.move = pause;\n    this.moveDuration = wd.apd.duration;\n    this.back = wd.back;\n    return true;\n  }\n\n  public traverseNewline(_newline: Newline, _wd: WalkerDown): boolean {\n    return false;\n  }\n\n  public traverseLineComment(\n    _lineComment: LineComment,\n    _wd: WalkerDown,\n  ): boolean {\n    return false;\n  }\n\n  private firstcheck(wd: WalkerDown): boolean {\n    if (\n      wd.apd.moveCount + this.i <= this.goali &&\n      wd.apd.duration + this.dur < this.goaldur\n    ) {\n      return this.keepgoing(wd);\n    }\n    return true;\n  }\n\n  private domult(wd: WalkerDown, amount: number): boolean {\n    let back = wd.back;\n    if (amount === 0) {\n      // I don't believe this will ever happen\n      return back;\n    }\n    if (amount < 0) {\n      back = !back;\n      amount = -amount;\n    }\n    const base = wd.apd.children[0];\n    const full = Math.min(\n      Math.floor((this.goali - this.i) / base.moveCount),\n      Math.ceil((this.goaldur - this.dur) / base.duration - 1),\n    );\n    if (full > 0) {\n      this.keepgoing(new WalkerDown(base, back), full);\n    }\n    return back;\n  }\n\n  private keepgoing(wd: WalkerDown, mul: number = 1): boolean {\n    this.i += mul * wd.apd.moveCount;\n    this.dur += mul * wd.apd.duration;\n    if (mul !== 1) {\n      if (wd.back) {\n        this.st = this.st.applyTransformation(\n          wd.apd.backward.selfMultiply(mul),\n        );\n      } else {\n        this.st = this.st.applyTransformation(wd.apd.forward.selfMultiply(mul));\n      }\n    } else {\n      if (wd.back) {\n        this.st = this.st.applyTransformation(wd.apd.backward);\n      } else {\n        this.st = this.st.applyTransformation(wd.apd.forward);\n      }\n    }\n    return false;\n  }\n}\n","import {\n  Alg,\n  Commutator,\n  Conjugate,\n  Grouping,\n  LineComment,\n  Move,\n  Newline,\n  Pause,\n  TraversalUp,\n  Unit,\n} from \"../../../../alg\";\nimport { AlgBuilder } from \"../../../../alg\";\n\nconst MIN_CHUNKING_THRESHOLD = 16;\n\nfunction chunkifyAlg(alg: Alg, chunkMaxLength: number): Alg {\n  const mainAlgBuilder = new AlgBuilder();\n  const chunkAlgBuilder = new AlgBuilder();\n  for (const unit of alg.units()) {\n    chunkAlgBuilder.push(unit);\n    if (chunkAlgBuilder.experimentalNumUnits() >= chunkMaxLength) {\n      mainAlgBuilder.push(new Grouping(chunkAlgBuilder.toAlg()));\n      chunkAlgBuilder.reset();\n    }\n  }\n  mainAlgBuilder.push(new Grouping(chunkAlgBuilder.toAlg()));\n  return mainAlgBuilder.toAlg();\n}\n\nclass ChunkAlgs extends TraversalUp<Alg, Unit> {\n  traverseAlg(alg: Alg): Alg {\n    const algLength = alg.experimentalNumUnits();\n    if (algLength < MIN_CHUNKING_THRESHOLD) {\n      return alg;\n    }\n    return chunkifyAlg(alg, Math.ceil(Math.sqrt(algLength)));\n  }\n\n  traverseGrouping(grouping: Grouping): Unit {\n    return new Grouping(\n      this.traverseAlg(grouping.alg),\n      grouping.amount, // TODO\n    );\n  }\n\n  traverseMove(move: Move): Unit {\n    return move;\n  }\n\n  traverseCommutator(commutator: Commutator): Unit {\n    return new Conjugate(\n      this.traverseAlg(commutator.A),\n      this.traverseAlg(commutator.B),\n    );\n  }\n\n  traverseConjugate(conjugate: Conjugate): Unit {\n    return new Conjugate(\n      this.traverseAlg(conjugate.A),\n      this.traverseAlg(conjugate.B),\n    );\n  }\n\n  traversePause(pause: Pause): Unit {\n    return pause;\n  }\n\n  traverseNewline(newline: Newline): Unit {\n    return newline;\n  }\n\n  traverseLineComment(comment: LineComment): Unit {\n    return comment;\n  }\n}\n\nconst chunkAlgsInstance = new ChunkAlgs();\nexport const chunkAlgs = chunkAlgsInstance.traverseAlg.bind(\n  chunkAlgsInstance,\n) as (alg: Alg) => Alg;\n","import type {\n  MillisecondTimestamp,\n  TimeRange,\n} from \"../../../controllers/AnimationTypes\";\nimport type { TimestampRequest } from \"./TimestampRequestProp\";\nimport { TwistyPropDerived } from \"../TwistyProp\";\nimport type { SetupToLocation } from \"../puzzle/state/SetupAnchorProp\";\n\ninterface DetailedTimelineInfoInputs {\n  timestampRequest: TimestampRequest;\n  timeRange: TimeRange;\n  setupAnchor: SetupToLocation;\n}\n\nexport interface DetailedTimelineInfo {\n  timestamp: MillisecondTimestamp;\n  timeRange: TimeRange; // TODO: Don't incluede this, and let fresh listeners listen to multiple inputs?\n  // Note: `atStart` and `atEnd` can both be true. This is the case with the\n  // default (empty) alg, which has a duration of 0 ms.\n  atStart: boolean;\n  atEnd: boolean;\n}\n\nexport class DetailedTimelineInfoProp extends TwistyPropDerived<\n  DetailedTimelineInfoInputs,\n  DetailedTimelineInfo\n> {\n  derive(inputs: DetailedTimelineInfoInputs): DetailedTimelineInfo {\n    let timestamp = this.#requestedTimestampToMilliseconds(inputs);\n    let atStart: boolean = false;\n    let atEnd: boolean = false;\n    if (timestamp >= inputs.timeRange.end) {\n      atEnd = true;\n      timestamp = Math.min(inputs.timeRange.end, timestamp);\n    }\n    if (timestamp <= inputs.timeRange.start) {\n      atStart = true;\n      timestamp = Math.max(inputs.timeRange.start, timestamp);\n    }\n    return {\n      timestamp,\n      timeRange: inputs.timeRange,\n      atStart,\n      atEnd,\n    };\n  }\n\n  #requestedTimestampToMilliseconds(\n    inputs: DetailedTimelineInfoInputs,\n  ): MillisecondTimestamp {\n    switch (inputs.timestampRequest) {\n      case \"start\":\n        return inputs.timeRange.start;\n      case \"end\":\n        return inputs.timeRange.end;\n      case \"anchor\":\n        return inputs.setupAnchor === \"start\"\n          ? inputs.timeRange.start\n          : inputs.timeRange.end;\n      case \"opposite-anchor\":\n        return inputs.setupAnchor === \"start\"\n          ? inputs.timeRange.end\n          : inputs.timeRange.start;\n      default:\n        return inputs.timestampRequest;\n    }\n  }\n\n  canReuse(v1: DetailedTimelineInfo, v2: DetailedTimelineInfo) {\n    return (\n      v1.timestamp === v2.timestamp &&\n      v1.timeRange.start === v2.timeRange.start &&\n      v1.timeRange.end === v2.timeRange.end &&\n      v1.atStart === v2.atStart &&\n      v1.atEnd === v2.atEnd\n    );\n  }\n}\n","import type { Alg, Move } from \"../../../../alg\";\nimport type { KPuzzle, KTransformation } from \"../../../../kpuzzle\";\nimport type { KState } from \"../../../../kpuzzle/KState\";\nimport type { Duration, Timestamp } from \"../../AnimationTypes\";\nimport type { AlgIndexer } from \"../AlgIndexer\";\nimport {\n  AlgPartDecoration,\n  AlgWalker,\n  DecoratorConstructor,\n} from \"./AlgWalker\";\nimport { chunkAlgs } from \"./chunkAlgs\";\n\nexport class TreeAlgIndexer implements AlgIndexer {\n  private decoration: AlgPartDecoration;\n  private walker: AlgWalker;\n  constructor(private kpuzzle: KPuzzle, alg: Alg) {\n    const deccon = new DecoratorConstructor(this.kpuzzle);\n\n    const chunkedAlg = chunkAlgs(alg);\n\n    this.decoration = deccon.traverseAlg(chunkedAlg);\n    this.walker = new AlgWalker(this.kpuzzle, chunkedAlg, this.decoration);\n  }\n\n  public getAnimLeaf(index: number): Move | null {\n    // FIXME need to support Pause\n    if (this.walker.moveByIndex(index)) {\n      if (!this.walker.move) {\n        throw new Error(\"`this.walker.mv` missing\");\n      }\n      const move = this.walker.move as Move;\n      // TODO: this type of negation needs to be in alg\n      if (this.walker.back) {\n        return move.invert();\n      }\n      return move;\n    }\n    return null;\n  }\n\n  public indexToMoveStartTimestamp(index: number): Timestamp {\n    if (this.walker.moveByIndex(index) || this.walker.i === index) {\n      return this.walker.dur;\n    }\n    throw new Error(`Out of algorithm: index ${index}`);\n  }\n\n  public indexToMovesInProgress(index: number): Timestamp {\n    if (this.walker.moveByIndex(index) || this.walker.i === index) {\n      return this.walker.dur;\n    }\n    throw new Error(`Out of algorithm: index ${index}`);\n  }\n\n  public stateAtIndex(index: number, startState?: KState): KState {\n    this.walker.moveByIndex(index);\n    return (startState ?? this.kpuzzle.startState()).applyTransformation(\n      this.walker.st,\n    );\n  }\n\n  // TransformAtIndex does not reflect the start state; it only reflects\n  // the change from the start state to the current move index.  If you\n  // want the actual state, use stateAtIndex.\n  public transformationAtIndex(index: number): KTransformation {\n    this.walker.moveByIndex(index);\n    return this.walker.st;\n  }\n\n  public numAnimatedLeaves(): number {\n    return this.decoration.moveCount;\n  }\n\n  public timestampToIndex(timestamp: Timestamp): number {\n    this.walker.moveByDuration(timestamp);\n    return this.walker.i;\n  }\n\n  public algDuration(): Duration {\n    return this.decoration.duration;\n  }\n\n  public moveDuration(index: number): number {\n    this.walker.moveByIndex(index);\n    return this.walker.moveDuration;\n  }\n}\n","import type { AlgIndexer } from \"../../../..\";\nimport type { Alg } from \"../../../../../alg\";\nimport type { KPuzzle } from \"../../../../../kpuzzle\";\nimport { experimentalCountMoves } from \"../../../../../notation\";\nimport { SimpleAlgIndexer } from \"../../../../controllers/indexer/SimpleAlgIndexer\";\nimport { SimultaneousMoveIndexer } from \"../../../../controllers/indexer/simultaneous-moves/SimultaneousMoveIndexer\";\nimport { TreeAlgIndexer } from \"../../../../controllers/indexer/tree/TreeAlgIndexer\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport type { VisualizationStrategy } from \"../../viewer/VisualizationStrategyProp\";\nimport type { PuzzleID } from \"../structure/PuzzleIDRequestProp\";\nimport type { AlgWithIssues } from \"./AlgProp\";\nimport type { IndexerStrategyName } from \"./IndexerConstructorRequestProp\";\n\nexport type IndexerConstructor = new (kpuzzle: KPuzzle, alg: Alg) => AlgIndexer;\n\ninterface IndexerConstructorPropInputs {\n  puzzle: PuzzleID;\n  alg: AlgWithIssues;\n  visualizationStrategy: VisualizationStrategy;\n  indexerConstructorRequest: IndexerStrategyName;\n}\n\n// TODO: Also handle PG3D vs. 3D\nexport class IndexerConstructorProp extends TwistyPropDerived<\n  IndexerConstructorPropInputs,\n  IndexerConstructor\n> {\n  derive(inputs: IndexerConstructorPropInputs): IndexerConstructor {\n    switch (inputs.indexerConstructorRequest) {\n      case \"auto\":\n        if (\n          experimentalCountMoves(inputs.alg.alg) < 100 &&\n          inputs.puzzle === \"3x3x3\" &&\n          inputs.visualizationStrategy === \"Cube3D\"\n        ) {\n          return SimultaneousMoveIndexer;\n        } else {\n          return TreeAlgIndexer;\n        }\n      case \"tree\":\n        return TreeAlgIndexer;\n      case \"simple\":\n        return SimpleAlgIndexer;\n      case \"simultaneous\":\n        return SimultaneousMoveIndexer;\n      default:\n        throw new Error(\"Invalid indexer request!\");\n    }\n  }\n}\n","import { Alg, Move, TraversalUp } from \"../../../alg\";\nimport type { KPuzzle, KTransformation } from \"../../../kpuzzle\";\nimport type { KState } from \"../../../kpuzzle/KState\";\nimport { experimentalCountAnimatedLeaves } from \"../../../notation\";\nimport type { Duration, Timestamp } from \"../AnimationTypes\";\nimport { AlgDuration, defaultDurationForAmount } from \"./AlgDuration\";\nimport type { AlgIndexer } from \"./AlgIndexer\";\n\nexport class SimpleAlgIndexer implements AlgIndexer {\n  private moves: Alg;\n  // TODO: Allow custom `durationFn`.\n  private durationFn: TraversalUp<Duration> = new AlgDuration(\n    defaultDurationForAmount,\n  );\n\n  constructor(private kpuzzle: KPuzzle, alg: Alg) {\n    // TODO: Avoid assuming all base moves are block moves.\n    this.moves = new Alg(alg.experimentalExpand());\n  }\n\n  public getAnimLeaf(index: number): Move {\n    return Array.from(this.moves.units())[index] as Move; // TODO: perf\n  }\n\n  public indexToMoveStartTimestamp(index: number): Timestamp {\n    const alg = new Alg(Array.from(this.moves.units()).slice(0, index)); // TODO\n    return this.durationFn.traverseAlg(alg);\n  }\n\n  public timestampToIndex(timestamp: Timestamp): number {\n    let cumulativeTime = 0;\n    let i;\n    for (i = 0; i < this.numAnimatedLeaves(); i++) {\n      cumulativeTime += this.durationFn.traverseMove(this.getAnimLeaf(i));\n      if (cumulativeTime >= timestamp) {\n        return i;\n      }\n    }\n    return i;\n  }\n\n  public stateAtIndex(index: number): KState {\n    return this.kpuzzle\n      .startState()\n      .applyTransformation(this.transformationAtIndex(index));\n  }\n\n  public transformationAtIndex(index: number): KTransformation {\n    let state = this.kpuzzle.identityTransformation();\n    for (const move of Array.from(this.moves.units()).slice(0, index)) {\n      // TODO\n      state = state.applyMove(move as Move);\n    }\n    return state;\n  }\n\n  public algDuration(): Duration {\n    return this.durationFn.traverseAlg(this.moves);\n  }\n\n  public numAnimatedLeaves(): number {\n    // TODO: Cache internally once performance matters.\n    return experimentalCountAnimatedLeaves(this.moves);\n  }\n\n  public moveDuration(index: number): number {\n    return this.durationFn.traverseMove(this.getAnimLeaf(index));\n  }\n}\n","import { Alg } from \"../../../../../alg\";\nimport type { KPuzzle } from \"../../../../../kpuzzle\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport { AlgIssues, AlgWithIssues } from \"./AlgProp\";\n\nlet validate: boolean = true;\nexport function experimentalSetPuzzleAlgValidation(newValidate: boolean): void {\n  validate = newValidate;\n}\n\nexport class PuzzleAlgProp extends TwistyPropDerived<\n  { algWithIssues: AlgWithIssues; kpuzzle: KPuzzle },\n  AlgWithIssues\n> {\n  async derive(inputs: {\n    algWithIssues: AlgWithIssues;\n    kpuzzle: KPuzzle;\n  }): Promise<AlgWithIssues> {\n    try {\n      if (validate) {\n        inputs.kpuzzle.algToTransformation(inputs.algWithIssues.alg);\n      }\n\n      // Looks like we could apply the alg!\n      return inputs.algWithIssues;\n    } catch (e) {\n      return {\n        alg: new Alg(),\n        issues: new AlgIssues({\n          errors: [`Invalid alg for puzzle: ${(e as Error).toString()}`],\n        }),\n      };\n    }\n  }\n}\n","import type { KPuzzle, KTransformation } from \"../../../../../kpuzzle\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport type { AlgWithIssues } from \"./AlgProp\";\n\ntype AlgTransformationPropInputs = {\n  setupAlg: AlgWithIssues;\n  kpuzzle: KPuzzle;\n};\n\nexport class AlgTransformationProp extends TwistyPropDerived<\n  AlgTransformationPropInputs,\n  KTransformation\n> {\n  derive(input: AlgTransformationPropInputs): KTransformation {\n    return input.kpuzzle.algToTransformation(input.setupAlg.alg);\n  }\n}\n","import type { KPuzzle } from \"../../../../../kpuzzle\";\nimport type { AlgIndexer } from \"../../../../controllers/indexer/AlgIndexer\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport type { AlgWithIssues } from \"./AlgProp\";\nimport type { IndexerConstructor } from \"./IndexerConstructorProp\";\n\ntype IndexerPropInputs = {\n  indexerConstructor: IndexerConstructor;\n  algWithIssues: AlgWithIssues;\n  kpuzzle: KPuzzle;\n};\nexport class IndexerProp extends TwistyPropDerived<\n  IndexerPropInputs,\n  AlgIndexer\n> {\n  derive(input: IndexerPropInputs): AlgIndexer {\n    return new input.indexerConstructor(input.kpuzzle, input.algWithIssues.alg);\n  }\n}\n","import type { KTransformation } from \"../../../../../kpuzzle\";\nimport type { AlgIndexer } from \"../../../../controllers/indexer/AlgIndexer\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport type { SetupToLocation } from \"./SetupAnchorProp\";\n\ninterface AnchorTransformationPropInputs {\n  setupTransformation: KTransformation | null;\n  setupAnchor: SetupToLocation;\n  setupAlgTransformation: KTransformation;\n  indexer: AlgIndexer;\n}\n\nexport class AnchorTransformationProp extends TwistyPropDerived<\n  AnchorTransformationPropInputs,\n  KTransformation\n> {\n  derive(inputs: AnchorTransformationPropInputs): KTransformation {\n    if (inputs.setupTransformation) {\n      return inputs.setupTransformation;\n    }\n    switch (inputs.setupAnchor) {\n      case \"start\":\n        return inputs.setupAlgTransformation;\n      case \"end\": {\n        const algTransformation = inputs.indexer.transformationAtIndex(\n          inputs.indexer.numAnimatedLeaves(),\n        );\n        const inverseAlgTransformation = algTransformation.invert();\n        return inputs.setupAlgTransformation.applyTransformation(\n          inverseAlgTransformation,\n        );\n      }\n      default:\n        throw new Error(\"Unimplemented!\");\n    }\n  }\n}\n","import type { TimeRange } from \"../../../controllers/AnimationTypes\";\nimport type { AlgIndexer } from \"../../../controllers/indexer/AlgIndexer\";\nimport { TwistyPropDerived } from \"../TwistyProp\";\n\nexport class TimeRangeProp extends TwistyPropDerived<\n  { indexer: AlgIndexer },\n  TimeRange\n> {\n  derive(inputs: { indexer: AlgIndexer }): TimeRange {\n    return {\n      start: 0,\n      end: inputs.indexer.algDuration(),\n    };\n  }\n}\n","import type { ButtonCommand } from \"../../../views/control-panel/TwistyButtons\";\nimport type { PlayingInfo } from \"./PlayingInfoProp\";\nimport type { DetailedTimelineInfo } from \"./DetailedTimelineInfoProp\";\nimport { TwistyPropDerived } from \"../TwistyProp\";\n\ninterface ButtonAppearance {\n  enabled: boolean;\n  icon: string;\n  title: string;\n}\nexport type ButtonAppearances = Record<ButtonCommand, ButtonAppearance>;\n\ninterface CoarseTimelineInfoInputs {\n  playingInfo: PlayingInfo;\n  detailedTimelineInfo: DetailedTimelineInfo;\n}\n\nexport interface CoarseTimelineInfo {\n  playing: boolean;\n  atStart: boolean;\n  atEnd: boolean;\n}\n\n// This started as a version of `EffectiveTimestamp` without the actual\n// timestamp, to enable easier caching.\nexport class CoarseTimelineInfoProp extends TwistyPropDerived<\n  CoarseTimelineInfoInputs,\n  CoarseTimelineInfo\n> {\n  derive(inputs: CoarseTimelineInfoInputs): CoarseTimelineInfo {\n    return {\n      playing: inputs.playingInfo.playing,\n      atStart: inputs.detailedTimelineInfo.atStart,\n      atEnd: inputs.detailedTimelineInfo.atEnd,\n    };\n  }\n\n  canReuseValue(v1: CoarseTimelineInfo, v2: CoarseTimelineInfo): boolean {\n    return (\n      v1.playing === v2.playing &&\n      v1.atStart === v2.atStart &&\n      v1.atEnd === v2.atEnd\n    );\n  }\n}\n","import { Move } from \"../../../../../alg\";\nimport { Direction } from \"../../../../controllers/AnimationTypes\";\nimport type {\n  AlgIndexer,\n  CurrentMoveInfo,\n} from \"../../../../controllers/indexer/AlgIndexer\";\nimport type { DetailedTimelineInfo } from \"../../timeline/DetailedTimelineInfoProp\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport type { CatchUpMove } from \"./CatchUpMoveProp\";\n\ninterface PositionPropInputs {\n  indexer: AlgIndexer;\n  detailedTimelineInfo: DetailedTimelineInfo;\n  catchUpMove: CatchUpMove;\n}\n\n// TODO: Rename \"current\" (implies a single one) to \"active\"?\nexport class CurrentMoveInfoProp extends TwistyPropDerived<\n  PositionPropInputs,\n  CurrentMoveInfo\n> {\n  derive(inputs: PositionPropInputs): CurrentMoveInfo {\n    function addCatchUpMove(currentMoveInfo: CurrentMoveInfo): CurrentMoveInfo {\n      if (\n        inputs.detailedTimelineInfo.atEnd &&\n        inputs.catchUpMove.move !== null\n      ) {\n        currentMoveInfo.currentMoves.push({\n          move: inputs.catchUpMove.move,\n          direction: Direction.Backwards,\n          fraction: 1 - inputs.catchUpMove.amount,\n          startTimestamp: -1, // TODO\n          endTimestamp: -1, // TODO\n        });\n      }\n      return currentMoveInfo;\n    }\n\n    // Copied from AlgCursor\n    if (inputs.indexer.currentMoveInfo) {\n      return addCatchUpMove(\n        inputs.indexer.currentMoveInfo(inputs.detailedTimelineInfo.timestamp),\n      );\n    } else {\n      const idx = inputs.indexer.timestampToIndex(\n        inputs.detailedTimelineInfo.timestamp,\n      );\n      const currentMoveInfo: CurrentMoveInfo = {\n        stateIndex: idx,\n        currentMoves: [],\n        movesFinishing: [],\n        movesFinished: [],\n        movesStarting: [],\n        latestStart: -Infinity,\n        earliestEnd: Infinity,\n      };\n\n      if (inputs.indexer.numAnimatedLeaves() > 0) {\n        const move = inputs.indexer.getAnimLeaf(idx)?.as(Move);\n        if (!move) {\n          return addCatchUpMove(currentMoveInfo);\n        }\n        const start = inputs.indexer.indexToMoveStartTimestamp(idx);\n        const duration = inputs.indexer.moveDuration(idx);\n        const fraction =\n          (inputs.detailedTimelineInfo.timestamp - start) / duration;\n        const end = start + duration;\n        const currentMove = {\n          move,\n          direction: Direction.Forwards,\n          fraction,\n          startTimestamp: start,\n          endTimestamp: end,\n        };\n        if (fraction === 0) {\n          currentMoveInfo.movesStarting.push(currentMove);\n          // // TODO: push this into the indexer\n          // position.state = combineTransformations(\n          //   inputs.def,\n          //   state,\n          //   transformationForMove(inputs.def, move),\n          // ) as Transformation;\n        } else if (fraction === 1) {\n          currentMoveInfo.movesFinishing.push(currentMove);\n          // // TODO: push this into the indexer\n          // position.state = combineTransformations(\n          //   inputs.def,\n          //   state,\n          //   transformationForMove(inputs.def, move),\n          // ) as Transformation;\n        } else {\n          // TODO\n          currentMoveInfo.currentMoves.push(currentMove);\n          currentMoveInfo.latestStart = Math.max(\n            currentMoveInfo.latestStart,\n            start,\n          );\n          currentMoveInfo.earliestEnd = Math.min(\n            currentMoveInfo.earliestEnd,\n            end,\n          );\n        }\n        // }\n        // }\n      }\n      return addCatchUpMove(currentMoveInfo);\n    }\n  }\n}\n","import type { Move } from \"../../../../../alg\";\nimport type { CurrentMoveInfo } from \"../../../../controllers/indexer/AlgIndexer\";\nimport { arrayEqualsCompare } from \"../../../helpers\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\n\ninterface CurrentLeavesSimplifiedPropInputs {\n  currentMoveInfo: CurrentMoveInfo;\n}\n\nexport interface CurrentLeavesSimplified {\n  stateIndex: number;\n  movesFinishing: Move[];\n  movesFinished: Move[];\n}\n\n// This started as a version of `CurrentLeaves` without highly timestamp-sensitive info like fractions, to enable easier caching.\nexport class CurrentLeavesSimplifiedProp extends TwistyPropDerived<\n  CurrentLeavesSimplifiedPropInputs,\n  CurrentLeavesSimplified\n> {\n  derive(inputs: CurrentLeavesSimplifiedPropInputs): CurrentLeavesSimplified {\n    return {\n      stateIndex: inputs.currentMoveInfo.stateIndex,\n      movesFinishing: inputs.currentMoveInfo.movesFinishing.map(\n        (currentMoveInfo) => currentMoveInfo.move,\n      ),\n      movesFinished: inputs.currentMoveInfo.movesFinished.map(\n        (currentMoveInfo) => currentMoveInfo.move,\n      ),\n    };\n  }\n\n  canReuse(v1: CurrentLeavesSimplified, v2: CurrentLeavesSimplified): boolean {\n    return (\n      v1.stateIndex === v2.stateIndex &&\n      arrayEqualsCompare(\n        v1.movesFinishing,\n        v2.movesFinishing,\n        (m1: Move, m2: Move) => m1.isIdentical(m2),\n      ) &&\n      arrayEqualsCompare(\n        v1.movesFinished,\n        v2.movesFinished,\n        (m1: Move, m2: Move) => m1.isIdentical(m2),\n      )\n    );\n  }\n}\n","import type { KTransformation } from \"../../../../../kpuzzle\";\nimport type { KState } from \"../../../../../kpuzzle/KState\";\nimport type { AlgIndexer } from \"../../../../controllers/indexer/AlgIndexer\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport type { CurrentLeavesSimplified } from \"./CurrentLeavesSimplified\";\n\ninterface CurrentTransformationPropInputs {\n  anchoredStart: KTransformation; // kpuzzle todo: KState?\n  currentLeavesSimplified: CurrentLeavesSimplified;\n  indexer: AlgIndexer;\n}\n\n// TODO: Make this so we don't have to handle the finishing moves?\nexport class CurrentStateProp extends TwistyPropDerived<\n  CurrentTransformationPropInputs,\n  KState\n> {\n  derive(inputs: CurrentTransformationPropInputs): KState {\n    let transformation: KTransformation = inputs.indexer.transformationAtIndex(\n      inputs.currentLeavesSimplified.stateIndex,\n    );\n    transformation = inputs.anchoredStart.applyTransformation(transformation);\n\n    // TODO: handle non-commutative finished/finishing/current moves.\n    for (const finishingMove of inputs.currentLeavesSimplified.movesFinishing) {\n      transformation = transformation.applyMove(finishingMove);\n    }\n    for (const finishedMove of inputs.currentLeavesSimplified.movesFinished) {\n      transformation = transformation.applyMove(finishedMove);\n    }\n    return transformation.toKState(); // kpuzzle todo\n  }\n}\n","import type { KState } from \"../../../../../kpuzzle/KState\";\nimport type { PuzzlePosition } from \"../../../../controllers/AnimationTypes\";\nimport type { CurrentMoveInfo } from \"../../../../controllers/indexer/AlgIndexer\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\n\nexport interface LegacyPositionPropInputs {\n  currentMoveInfo: CurrentMoveInfo;\n  state: KState;\n}\n\n// TODO: This exist as a convenience for old `Twisty3D` implementations. Get rid of this.\nexport class LegacyPositionProp extends TwistyPropDerived<\n  LegacyPositionPropInputs,\n  PuzzlePosition\n> {\n  derive(inputs: LegacyPositionPropInputs): PuzzlePosition {\n    return {\n      state: inputs.state,\n      movesInProgress: inputs.currentMoveInfo.currentMoves,\n    };\n  }\n}\n","import type { KPuzzle } from \"../../../../../kpuzzle\";\nimport type { PuzzleLoader } from \"../../../../../puzzles\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\n\nexport class KPuzzleProp extends TwistyPropDerived<\n  { puzzleLoader: PuzzleLoader },\n  KPuzzle\n> {\n  async derive(inputs: { puzzleLoader: PuzzleLoader }): Promise<KPuzzle> {\n    return inputs.puzzleLoader.kpuzzle();\n  }\n}\n","import { arrayEquals } from \"./helpers\";\nimport { SimpleTwistyPropSource } from \"./props/TwistyProp\";\n\ninterface UserVisibleError {\n  errors: string[];\n}\n\nconst EMPTY_ERRORS = { errors: [] };\n\nexport class UserVisibleErrorTracker extends SimpleTwistyPropSource<UserVisibleError> {\n  override getDefaultValue(): UserVisibleError {\n    return EMPTY_ERRORS;\n  }\n\n  reset() {\n    this.set(this.getDefaultValue());\n  }\n\n  canReuseValue(_v1: UserVisibleError, _v2: UserVisibleError): boolean {\n    return arrayEquals(_v1.errors, _v2.errors);\n  }\n}\n","import type { Move } from \"../../../../../alg\";\nimport { SimpleTwistyPropSource } from \"../../TwistyProp\";\n\nexport interface CatchUpMove {\n  move: Move | null;\n  amount: number;\n}\n\nexport class CatchUpMoveProp extends SimpleTwistyPropSource<CatchUpMove> {\n  getDefaultValue(): CatchUpMove {\n    return { move: null, amount: 0 };\n  }\n\n  canReuseValue(v1: CatchUpMove, v2: CatchUpMove) {\n    return v1.move === v2.move && v1.amount === v2.amount;\n  }\n}\n","import { experimentalCountMoves } from \"../../../../../notation\";\nimport { TwistyPropDerived } from \"../../TwistyProp\";\nimport type { AlgWithIssues } from \"./AlgProp\";\n\ninterface NaiveMoveCountPropInputs {\n  alg: AlgWithIssues;\n}\n\n// TODO: handle metrics\nexport class NaiveMoveCountProp extends TwistyPropDerived<\n  NaiveMoveCountPropInputs,\n  number | null\n> {\n  derive(inputs: NaiveMoveCountPropInputs): number | null {\n    if (inputs.alg.issues.errors.length > 0) {\n      return null;\n    }\n    return experimentalCountMoves(inputs.alg.alg);\n  }\n}\n","import { SimpleTwistyPropSource } from \"../../TwistyProp\";\n\nexport const movePressInputNames = {\n  auto: true,\n  none: true,\n  basic: true,\n};\nexport type MovePressInput = keyof typeof movePressInputNames;\n\nexport class MovePressInputProp extends SimpleTwistyPropSource<MovePressInput> {\n  getDefaultValue(): MovePressInput {\n    return \"auto\";\n  }\n}\n","import { SimpleTwistyPropSource } from \"../../TwistyProp\";\n\nexport type FoundationDisplay = \"auto\" | \"opaque\" | \"none\";\n\nexport class FoundationDisplayProp extends SimpleTwistyPropSource<FoundationDisplay> {\n  getDefaultValue(): FoundationDisplay {\n    return \"auto\";\n  }\n}\n","import type { KTransformation } from \"../../../../../kpuzzle\";\nimport { SimpleTwistyPropSource } from \"../../TwistyProp\";\n\nexport class SetupTransformationProp extends SimpleTwistyPropSource<KTransformation | null> {\n  getDefaultValue(): KTransformation | null {\n    return null;\n  }\n}\n","import { SimpleTwistyPropSource } from \"../TwistyProp\";\n\nexport class ArbitraryStringProp extends SimpleTwistyPropSource<string | null> {\n  getDefaultValue(): string | null {\n    return null;\n  }\n}\n","import type { Alg } from \"../../alg\";\nimport type { PuzzleDescriptionString } from \"../../puzzle-geometry/PGPuzzles\";\nimport type { ExperimentalStickering, PuzzleID } from \"../../twisty\";\nimport type { BackgroundThemeWithAuto } from \"../model/props/viewer/BackgroundProp\";\nimport type { BackViewLayoutWithAuto } from \"../model/props/viewer/BackViewProp\";\nimport type { ControlPanelThemeWithAuto } from \"../model/props/viewer/ControlPanelProp\";\nimport type { HintFaceletStyleWithAuto } from \"../model/props/puzzle/display/HintFaceletProp\";\nimport type { IndexerStrategyName } from \"../model/props/puzzle/state/IndexerConstructorRequestProp\";\nimport type { TimestampRequest } from \"../model/props/timeline/TimestampRequestProp\";\nimport type { ViewerLinkPageWithAuto } from \"../model/props/viewer/ViewerLinkProp\";\nimport type { VisualizationFormatWithAuto } from \"../model/props/viewer/VisualizationProp\";\nimport { TwistyPlayerModel } from \"../model/TwistyPlayerModel\";\nimport type { MillisecondTimestamp } from \"../controllers/AnimationTypes\";\nimport { ManagedCustomElement } from \"./ManagedCustomElement\";\nimport type { MovePressInput } from \"../model/props/puzzle/state/MovePressInputProp\";\nimport type { SetupToLocation } from \"../model/props/puzzle/state/SetupAnchorProp\";\n\nfunction err(propName: string): Error {\n  return new Error(\n    `Cannot get \\`.${propName}\\` directly from a \\`TwistyPlayer\\`.`,\n  );\n}\n\n// prettier-ignore\nexport abstract class TwistyPlayerSettable extends ManagedCustomElement {\n  experimentalModel: TwistyPlayerModel = new TwistyPlayerModel();\n\n  set alg(newAlg: Alg | string) { this.experimentalModel.alg.set(newAlg); }\n  get alg(): never { throw err(\"alg\"); }\n\n  set experimentalSetupAlg(newSetup: Alg | string) { this.experimentalModel.setupAlg.set(newSetup); }\n  get experimentalSetupAlg(): never { throw err(\"setup\"); }\n\n  set experimentalSetupAnchor(anchor: SetupToLocation) { this.experimentalModel.setupAnchor.set(anchor); }\n  get experimentalSetupAnchor(): never { throw err(\"anchor\"); }\n\n  set puzzle(puzzleID: PuzzleID) { this.experimentalModel.puzzleIDRequest.set(puzzleID); }\n  get puzzle(): never { throw err(\"puzzle\"); }\n\n  set experimentalPuzzleDescription(puzzleDescription: PuzzleDescriptionString) { this.experimentalModel.puzzleDescriptionRequest.set(puzzleDescription); }\n  get experimentalPuzzleDescription(): never { throw err(\"experimentalPuzzleDescription\"); }\n\n  set timestamp(timestamp: TimestampRequest) { this.experimentalModel.timestampRequest.set(timestamp); }\n  get timestamp(): never { throw err(\"timestamp\"); }\n\n  set hintFacelets(hintFaceletStyle: HintFaceletStyleWithAuto) { this.experimentalModel.hintFacelet.set(hintFaceletStyle); }\n  get hintFacelets(): never { throw err(\"hintFacelets\"); }\n\n  set experimentalStickering(stickering: ExperimentalStickering) { this.experimentalModel.stickering.set(stickering); }\n  get experimentalStickering(): never { throw err(\"stickering\"); }\n\n  set backView(backView: BackViewLayoutWithAuto) { this.experimentalModel.backView.set(backView); }\n  get backView(): never { throw err(\"backView\"); }\n\n  set background(backgroundTheme: BackgroundThemeWithAuto) { this.experimentalModel.background.set(backgroundTheme); }\n  get background(): never { throw err(\"background\"); }\n\n  set controlPanel(newControlPanel: ControlPanelThemeWithAuto) { this.experimentalModel.controlPanel.set(newControlPanel); }\n  get controlPanel(): never { throw err(\"controlPanel\"); }\n\n  set visualization(visualizationFormat: VisualizationFormatWithAuto) { this.experimentalModel.visualizationFormat.set(visualizationFormat); }\n  get visualization(): never { throw err(\"visualization\"); }\n\n  set experimentalTitle(title: string | null) { this.experimentalModel.title.set(title); }\n  get experimentalTitle(): never { throw err(\"experimentalTitle\"); }\n\n  set experimentalVideoURL(videoURL: string | null) { this.experimentalModel.videoURL.set(videoURL); }\n  get experimentalVideoURL(): never { throw err(\"experimentalVideoURL\"); }\n\n  set experimentalCompetitionID(competitionID: string | null) { this.experimentalModel.competitionID.set(competitionID); }\n  get experimentalCompetitionID(): never { throw err(\"experimentalCompetitionID\"); }\n\n  set viewerLink(viewerLinkPage: ViewerLinkPageWithAuto) { this.experimentalModel.viewerLink.set(viewerLinkPage); }\n  get viewerLink(): never { throw err(\"viewerLink\"); }\n\n  set experimentalMovePressInput(movePressInput: MovePressInput) { this.experimentalModel.movePressInput.set(movePressInput); }\n  get experimentalMovePressInput(): never { throw err(\"experimentalMovePressInput\"); }\n\n  set cameraLatitude(latitude: number) { this.experimentalModel.orbitCoordinatesRequest.set({ latitude }); }\n  get cameraLatitude(): never { throw err(\"cameraLatitude\"); }\n\n  set cameraLongitude(longitude: number) { this.experimentalModel.orbitCoordinatesRequest.set({ longitude }); }\n  get cameraLongitude(): never { throw err(\"cameraLongitude\"); }\n\n  set cameraDistance(distance: number) { this.experimentalModel.orbitCoordinatesRequest.set({ distance }); }\n  get cameraDistance(): never { throw err(\"cameraDistance\"); }\n\n  set cameraLatitudeLimit(latitudeLimit: number) { this.experimentalModel.latitudeLimit.set(latitudeLimit); }\n  get cameraLatitudeLimit(): never { throw err(\"cameraLatitudeLimit\"); }\n\n  set indexer(indexer: IndexerStrategyName) { this.experimentalModel.indexerConstructorRequest.set(indexer); }\n  get indexer(): never { throw err(\"indexer\"); }\n\n  set tempoScale(newTempoScale: number) { this.experimentalModel.tempoScale.set(newTempoScale); }\n  get tempoScale(): never { throw err(\"tempoScale\"); }\n\n  set experimentalSprite(url: string | URL) { this.experimentalModel.foundationStickerSpriteURL.set(url); }\n  get experimentalSprite(): never { throw err(\"experimentalSprite\"); }\n\n  set experimentalHintSprite(url: string | URL) { this.experimentalModel.hintStickerSpriteURL.set(url); }\n  get experimentalHintSprite(): never { throw err(\"experimentalHintSprite\"); }\n\n  experimentalGet = new ExperimentalGetters(this.experimentalModel)\n}\n\nclass ExperimentalGetters {\n  constructor(private model: TwistyPlayerModel) {}\n\n  async alg(): Promise<Alg> {\n    return (await this.model.alg.get()).alg;\n  }\n\n  async setupAlg(): Promise<Alg> {\n    return (await this.model.setupAlg.get()).alg;\n  }\n\n  puzzleID(): Promise<PuzzleID> {\n    return this.model.puzzleID.get();\n  }\n\n  async timestamp(): Promise<MillisecondTimestamp> {\n    return (await this.model.detailedTimelineInfo.get()).timestamp;\n  }\n}\n","import type { ExperimentalStickering } from \"..\";\nimport type { Alg, Move } from \"../../alg\";\nimport type { PuzzleDescriptionString } from \"../../puzzle-geometry/PGPuzzles\";\nimport type { TwistyAnimationControllerDelegate } from \"../controllers/TwistyAnimationController\";\nimport { TwistyPlayerController } from \"../controllers/TwistyPlayerController\";\nimport type { HintFaceletStyleWithAuto } from \"../model/props/puzzle/display/HintFaceletProp\";\nimport type { MovePressInput } from \"../model/props/puzzle/state/MovePressInputProp\";\nimport type { SetupToLocation } from \"../model/props/puzzle/state/SetupAnchorProp\";\nimport type { PuzzleID } from \"../model/props/puzzle/structure/PuzzleIDRequestProp\";\nimport type { BackgroundThemeWithAuto } from \"../model/props/viewer/BackgroundProp\";\nimport type { BackViewLayoutWithAuto } from \"../model/props/viewer/BackViewProp\";\nimport {\n  ControlPanelThemeWithAuto,\n  controlsLocations,\n} from \"../model/props/viewer/ControlPanelProp\";\nimport type { ViewerLinkPageWithAuto } from \"../model/props/viewer/ViewerLinkProp\";\nimport type { VisualizationFormatWithAuto } from \"../model/props/viewer/VisualizationProp\";\nimport type { VisualizationStrategy } from \"../model/props/viewer/VisualizationStrategyProp\";\nimport { Twisty2DSceneWrapper } from \"./2D/Twisty2DSceneWrapper\";\nimport type { PG3D } from \"./3D/puzzles/PG3D\";\nimport { Twisty3DSceneWrapper } from \"./3D/Twisty3DSceneWrapper\";\nimport { ClassListManager } from \"./ClassListManager\";\nimport { TwistyButtons } from \"./control-panel/TwistyButtons\";\nimport { TwistyScrubber } from \"./control-panel/TwistyScrubber\";\nimport { customElementsShim } from \"./node-custom-element-shims\";\nimport { downloadURL, getDefaultFilename, screenshot } from \"./screenshot\";\nimport { twistyPlayerCSS } from \"./TwistyPlayer.css\";\nimport { TwistyPlayerSettable } from \"./TwistyPlayerSettable\";\n\n// TODO: I couldn't figure out how to use use more specific types. Ideally, we'd\n// enforce consistency with the model.\nexport const twistyPlayerAttributeMap = {\n  // TODO: We assume each of these can be set using a string or will be automatically converted by JS (e.g. numbers). Can we enforce\n  // that with types? Do we need to add a translation mechanism for things we\n  // don't want to leave settable as strings?\n  // TODO: Enum validation.\n\n  // Alg\n  \"alg\": \"alg\",\n  \"experimental-setup-alg\": \"experimentalSetupAlg\",\n\n  // String-based\n  \"experimental-setup-anchor\": \"experimentalSetupAnchor\",\n  \"puzzle\": \"puzzle\",\n  \"experimental-puzzle-description\": \"experimentalPuzzleDescription\",\n  \"visualization\": \"visualization\",\n  \"hint-facelets\": \"hintFacelets\",\n  \"experimental-stickering\": \"experimentalStickering\",\n  \"background\": \"background\",\n  \"control-panel\": \"controlPanel\",\n  \"back-view\": \"backView\",\n  // \"indexer\": \"indexer\",\n  \"viewer-link\": \"viewerLink\",\n  \"experimental-move-press-input\": \"experimentalMovePressInput\",\n\n  // Metadata\n  \"experimental-title\": \"experimentalTitle\",\n  \"experimental-video-url\": \"experimentalVideoURL\",\n  \"experimental-competition-id\": \"experimentalCompetitionID\",\n\n  // Number-based\n  \"camera-latitude\": \"cameraLatitude\",\n  \"camera-longitude\": \"cameraLongitude\",\n  \"camera-distance\": \"cameraDistance\",\n  \"camera-latitude-limit\": \"cameraLatitudeLimit\",\n  \"tempo-scale\": \"tempoScale\",\n\n  // URL-based\n  \"experimental-sprite\": \"experimentalSprite\",\n  \"experimental-hint-sprite\": \"experimentalHintSprite\",\n};\n\nexport type TwistyPlayerAttribute = keyof typeof twistyPlayerAttributeMap;\n\nconst configKeys: Record<TwistyPlayerAttribute, true> = Object.fromEntries(\n  Object.values(twistyPlayerAttributeMap).map((s) => [s, true]),\n) as any;\n\n// TODO: Find a way to share this def with `attributeMap`.\nexport interface TwistyPlayerConfig {\n  // Alg\n  alg?: Alg | string;\n  experimentalSetupAlg?: Alg | string;\n\n  // String-based\n  experimentalSetupAnchor?: SetupToLocation; // TODO: \"auto\"\n  puzzle?: PuzzleID;\n  experimentalPuzzleDescription?: PuzzleDescriptionString;\n  visualization?: VisualizationFormatWithAuto;\n  hintFacelets?: HintFaceletStyleWithAuto;\n  experimentalStickering?: ExperimentalStickering;\n  background?: BackViewLayoutWithAuto;\n  controlPanel?: ControlPanelThemeWithAuto;\n  backView?: BackViewLayoutWithAuto;\n  // \"indexer\"?: \"indexer\";\n  viewerLink?: ViewerLinkPageWithAuto;\n  experimentalMovePressInput?: MovePressInput;\n\n  // Metadata\n  experimentalTitle?: string;\n  experimentalVideoURL?: string;\n  experimentalCompetitionID?: string;\n\n  // Number-based\n  cameraLatitude?: number;\n  cameraLongitude?: number;\n  cameraDistance?: number;\n  cameraLatitudeLimit?: number;\n  tempoScale?: number;\n\n  // URL-based\n  experimentalSprite?: string | null;\n  experimentalHintSprite?: string | null;\n}\n\n/**\n * TwistyPlayer is the heart of `cubing.js`. It can be used to display a puzzle on a web page like this:\n *\n *     <script src=\"path/to/cubing/twisty\" type=\"module\"></script>\n *     <twisty-player alg=\"R U R'\"></twisty-player>\n *\n * You can also construct it directly in JavaScript:\n *\n *     import { TwistyPlayer } from \"cubing/twisty\";\n *     const twistyPlayer = new TwistyPlayer({alg: \"R U R'\"});\n *     // Once the page has loaded, you can do this:\n *     document.body.appendChild(twistyPlayer);\n *\n * See {@link https://js.cubing.net/cubing/} for more examples.\n */\nexport class TwistyPlayer\n  extends TwistyPlayerSettable\n  implements TwistyAnimationControllerDelegate\n{\n  controller: TwistyPlayerController = new TwistyPlayerController(\n    this.experimentalModel,\n    this,\n  );\n\n  buttons: TwistyButtons;\n\n  experimentalCanvasClickCallback: (...args: any) => void = () => {};\n  // #onCanvasClick() {\n\n  // }\n\n  constructor(config: TwistyPlayerConfig = {}) {\n    super();\n\n    // TODO: double-check that these are all getting set sync without causing extra work.\n    for (const [propName, value] of Object.entries(config)) {\n      if (!configKeys[propName as TwistyPlayerAttribute]) {\n        console.warn(`Invalid config passed to TwistyPlayer: ${propName}`);\n        break;\n      }\n      (this as any)[propName] = value;\n    }\n  }\n\n  #controlsManager: ClassListManager<ControlPanelThemeWithAuto> =\n    new ClassListManager<ControlPanelThemeWithAuto>(\n      this,\n      \"controls-\",\n      ([\"auto\"] as ControlPanelThemeWithAuto[]).concat(\n        Object.keys(controlsLocations) as ControlPanelThemeWithAuto[],\n      ),\n    );\n\n  #visualizationWrapperElem = document.createElement(\"div\"); // TODO: Better pattern.\n  #errorElem = document.createElement(\"div\"); // TODO: Better pattern.\n  #alreadyConnected = false; // TODO: support resetting\n  async connectedCallback(): Promise<void> {\n    if (this.#alreadyConnected) {\n      return;\n    }\n    this.#alreadyConnected = true;\n    this.addCSS(twistyPlayerCSS);\n\n    this.addElement(this.#visualizationWrapperElem).classList.add(\n      \"visualization-wrapper\",\n    );\n    this.addElement(this.#errorElem).classList.add(\"error-elem\");\n    this.#errorElem.textContent = \"Error\";\n    this.experimentalModel.userVisibleErrorTracker.addFreshListener(\n      (userVisibleError) => {\n        const errorString: string | null = userVisibleError.errors[0] ?? null;\n        this.contentWrapper.classList.toggle(\"error\", !!errorString);\n        if (errorString) {\n          this.#errorElem.textContent = errorString;\n        }\n      },\n    );\n\n    const scrubber = new TwistyScrubber(this.experimentalModel);\n    this.contentWrapper.appendChild(scrubber);\n\n    this.buttons = new TwistyButtons(\n      this.experimentalModel,\n      this.controller,\n      this,\n    );\n    this.contentWrapper.appendChild(this.buttons);\n\n    this.experimentalModel.background.addFreshListener(\n      (backgroundTheme: BackgroundThemeWithAuto) => {\n        this.contentWrapper.classList.toggle(\n          \"checkered\",\n          backgroundTheme !== \"none\",\n        );\n      },\n    );\n\n    this.experimentalModel.controlPanel.addFreshListener(\n      (controlPanel: ControlPanelThemeWithAuto) => {\n        this.#controlsManager.setValue(controlPanel);\n      },\n    );\n\n    this.experimentalModel.visualizationStrategy.addFreshListener(\n      this.#setVisualizationWrapper.bind(this),\n    );\n\n    this.experimentalModel.puzzleID.addFreshListener(this.flash.bind(this));\n  }\n\n  flash() {\n    this.#visualizationWrapper?.animate([{ opacity: 0.25 }, { opacity: 1 }], {\n      duration: 250,\n    });\n  }\n\n  #visualizationWrapper: Twisty2DSceneWrapper | Twisty3DSceneWrapper | null =\n    null;\n\n  #visualizationStrategy: VisualizationStrategy | null = null;\n  #setVisualizationWrapper(strategy: VisualizationStrategy): void {\n    if (strategy !== this.#visualizationStrategy) {\n      this.#visualizationWrapper?.remove();\n      this.#visualizationWrapper?.disconnect();\n      let newWrapper: Twisty2DSceneWrapper | Twisty3DSceneWrapper;\n      switch (strategy) {\n        case \"2D\":\n        case \"experimental-2D-LL\":\n          newWrapper = new Twisty2DSceneWrapper(\n            this.experimentalModel,\n            strategy,\n          );\n          break;\n        case \"Cube3D\":\n        case \"PG3D\":\n          // TODO: Properly wire this up so we can set PG3D for the cube.\n          newWrapper = new Twisty3DSceneWrapper(this.experimentalModel);\n          break;\n        default:\n          throw new Error(\"Invalid visualization\");\n      }\n      this.#visualizationWrapperElem.appendChild(newWrapper);\n      this.#visualizationWrapper = newWrapper;\n      this.#visualizationStrategy = strategy;\n    }\n  }\n\n  async experimentalCurrentCanvases(): Promise<HTMLCanvasElement[]> {\n    this.connectedCallback();\n    const wrapper = this.#visualizationWrapper;\n    const canvases: HTMLCanvasElement[] = [];\n    if (wrapper instanceof Twisty3DSceneWrapper) {\n      const vantages = wrapper.experimentalVantages();\n      for (const vantage of vantages) {\n        canvases.push((await vantage.canvasInfo()).canvas);\n      }\n    }\n    return canvases;\n  }\n\n  async experimentalPG3D(): Promise<PG3D | null> {\n    this.connectedCallback();\n    const wrapper = this.#visualizationWrapper;\n    if (wrapper instanceof Twisty3DSceneWrapper) {\n      wrapper;\n    }\n    return null;\n  }\n\n  jumpToStart(options?: { flash: boolean }): void {\n    this.controller.jumpToStart(options);\n  }\n\n  jumpToEnd(options?: { flash: boolean }): void {\n    this.controller.jumpToEnd(options);\n  }\n\n  play(): void {\n    this.controller.togglePlay(true);\n  }\n\n  pause(): void {\n    this.controller.togglePlay(false);\n  }\n\n  // Inspiration:\n  // - https://developer.mozilla.org/en-US/docs/Web/API/Element/toggleAttribute (`force` argument)\n  // - https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/toggle (`force` argument)\n  // We still provide `play()` and `pause()` individually for convenience, though.\n  togglePlay(play?: boolean): void {\n    this.controller.togglePlay(play);\n  }\n\n  // TODO: Animate the new move.\n  experimentalAddMove(\n    flexibleMove: Move | string,\n    options: { coalesce?: boolean } = {},\n  ): void {\n    this.experimentalModel.experimentalAddMove(flexibleMove, options);\n  }\n\n  static get observedAttributes(): string[] {\n    return Object.keys(twistyPlayerAttributeMap);\n  }\n\n  attributeChangedCallback(\n    attributeName: string,\n    _oldValue: string,\n    newValue: string,\n  ): void {\n    const setterName =\n      twistyPlayerAttributeMap[attributeName as TwistyPlayerAttribute];\n    if (!setterName) {\n      return;\n    }\n\n    (this as any)[setterName] = newValue;\n  }\n\n  // TODO: Make this more ergonomic and flexible.\n  // TODO: dimensions.\n  async experimentalScreenshot(options?: {\n    width: number;\n    height: number;\n  }): Promise<string> {\n    return (await screenshot(this.experimentalModel, options)).dataURL;\n  }\n\n  // TODO: Make this more ergonomic and flexible.\n  // TODO: dimensions.\n  async experimentalDownloadScreenshot(filename?: string): Promise<void> {\n    if (\n      [\"2D\", \"experimental-2D-LL\"].includes(\n        await this.experimentalModel.visualizationStrategy.get(),\n      )\n    ) {\n      // TODO: This has lots of async issues. It should also go into the screenshot impl file.\n      const wrapper2D = this.#visualizationWrapper as Twisty2DSceneWrapper;\n      const twisty2DPuzzle = await wrapper2D\n        .currentTwisty2DPuzzleWrapper()!\n        .twisty2DPuzzle();\n      const str = new XMLSerializer().serializeToString(\n        twisty2DPuzzle.svg.element,\n      );\n      const url = URL.createObjectURL(new Blob([str]));\n      downloadURL(\n        url,\n        filename ?? (await getDefaultFilename(this.experimentalModel)),\n        \"svg\",\n      );\n    } else {\n      await (await screenshot(this.experimentalModel)).download(filename);\n    }\n  }\n}\n\ncustomElementsShim.define(\"twisty-player\", TwistyPlayer);\n","import { AlgProp } from \"./props/puzzle/state/AlgProp\";\nimport { BackgroundProp } from \"./props/viewer/BackgroundProp\";\nimport { BackViewProp } from \"./props/viewer/BackViewProp\";\nimport { ControlPanelProp } from \"./props/viewer/ControlPanelProp\";\nimport { HintFaceletProp } from \"./props/puzzle/display/HintFaceletProp\";\nimport { IndexerConstructorRequestProp } from \"./props/puzzle/state/IndexerConstructorRequestProp\";\nimport { LatitudeLimitProp } from \"./props/viewer/LatitudeLimit\";\nimport { OrbitCoordinatesRequestProp } from \"./props/viewer/OrbitCoordinatesRequestProp\";\nimport { PlayingInfoProp } from \"./props/timeline/PlayingInfoProp\";\nimport { PGPuzzleDescriptionStringProp } from \"./props/puzzle/structure/PuzzleDescriptionProp\";\nimport { PuzzleIDRequestProp } from \"./props/puzzle/structure/PuzzleIDRequestProp\";\nimport { PuzzleLoaderProp } from \"./props/puzzle/structure/PuzzleLoaderProp\";\nimport { SetupAnchorProp } from \"./props/puzzle/state/SetupAnchorProp\";\nimport { StickeringProp } from \"./props/puzzle/display/StickeringProp\";\nimport { TempoScaleProp } from \"./props/timeline/TempoScaleProp\";\nimport { TimestampRequestProp } from \"./props/timeline/TimestampRequestProp\";\nimport { URLProp } from \"./props/general/URLProp\";\nimport { ViewerLinkProp } from \"./props/viewer/ViewerLinkProp\";\nimport { VisualizationFormatProp } from \"./props/viewer/VisualizationProp\";\nimport { OrbitCoordinatesProp } from \"./props/viewer/OrbitCoordinatesProp\";\nimport { PuzzleIDProp } from \"./props/puzzle/structure/PuzzleIDProp\";\nimport { SpriteProp } from \"./props/puzzle/display/SpriteProp\";\nimport { VisualizationStrategyProp } from \"./props/viewer/VisualizationStrategyProp\";\nimport { IndexerConstructorProp } from \"./props/puzzle/state/IndexerConstructorProp\";\nimport { PuzzleAlgProp } from \"./props/puzzle/state/PuzzleAlgProp\";\nimport { AlgTransformationProp } from \"./props/puzzle/state/AlgTransformationProp\";\nimport { IndexerProp } from \"./props/puzzle/state/IndexerProp\";\nimport { AnchorTransformationProp } from \"./props/puzzle/state/AnchorTransformationProp\";\nimport { TimeRangeProp } from \"./props/viewer/TimeRangeProp\";\nimport { DetailedTimelineInfoProp } from \"./props/timeline/DetailedTimelineInfoProp\";\nimport { CoarseTimelineInfoProp } from \"./props/timeline/CoarseTimelineInfoProp\";\nimport { CurrentMoveInfoProp } from \"./props/puzzle/state/CurrentMoveInfoProp\";\nimport { ButtonAppearanceProp } from \"./props/viewer/ButtonAppearanceProp\";\nimport { CurrentLeavesSimplifiedProp } from \"./props/puzzle/state/CurrentLeavesSimplified\";\nimport { CurrentStateProp as CurrentStateProp } from \"./props/puzzle/state/CurrentStateProp\";\nimport { LegacyPositionProp } from \"./props/puzzle/state/LegacyPositionProp\";\nimport { KPuzzleProp } from \"./props/puzzle/structure/KPuzzleProp\";\nimport { UserVisibleErrorTracker } from \"./UserVisibleErrorTracker\";\nimport { CatchUpMoveProp } from \"./props/puzzle/state/CatchUpMoveProp\";\nimport { experimentalAppendMove, Move } from \"../../alg\";\nimport { NaiveMoveCountProp } from \"./props/puzzle/state/NaiveMoveCountProp\";\nimport { MovePressInputProp } from \"./props/puzzle/state/MovePressInputProp\";\nimport { FoundationDisplayProp } from \"./props/puzzle/display/FoundationDisplayProp\";\nimport { NO_VALUE } from \"./props/TwistyProp\";\nimport { SetupTransformationProp } from \"./props/puzzle/state/SetupTransformationProp\";\nimport { ArbitraryStringProp } from \"./props/general/ArbitraryStringProp\";\n\nexport class TwistyPlayerModel {\n  // TODO: incorporate error handling into the entire prop graph.\n  // TODO: Make this something that can't get confused with normal props?\n  userVisibleErrorTracker = new UserVisibleErrorTracker();\n\n  // TODO: Redistribute and group props with controllers.\n\n  // Depth 0\n  alg = new AlgProp();\n  background = new BackgroundProp();\n  backView = new BackViewProp();\n  controlPanel = new ControlPanelProp();\n  catchUpMove = new CatchUpMoveProp();\n  foundationDisplay = new FoundationDisplayProp();\n  foundationStickerSpriteURL = new URLProp();\n  hintFacelet = new HintFaceletProp();\n  hintStickerSpriteURL = new URLProp();\n  indexerConstructorRequest = new IndexerConstructorRequestProp();\n  latitudeLimit = new LatitudeLimitProp();\n  movePressInput = new MovePressInputProp();\n  orbitCoordinatesRequest: OrbitCoordinatesRequestProp =\n    new OrbitCoordinatesRequestProp();\n  playingInfo = new PlayingInfoProp();\n  puzzleDescriptionRequest = new PGPuzzleDescriptionStringProp();\n  puzzleIDRequest = new PuzzleIDRequestProp();\n  setupAnchor = new SetupAnchorProp();\n  setupAlg = new AlgProp();\n  setupTransformation = new SetupTransformationProp();\n  stickering = new StickeringProp();\n  tempoScale = new TempoScaleProp();\n  timestampRequest = new TimestampRequestProp();\n  viewerLink = new ViewerLinkProp();\n  visualizationFormat = new VisualizationFormatProp();\n  // Metadata\n  title = new ArbitraryStringProp();\n  videoURL = new URLProp();\n  competitionID = new ArbitraryStringProp();\n\n  // Depth 1\n  foundationStickerSprite = new SpriteProp({\n    spriteURL: this.foundationStickerSpriteURL,\n  });\n\n  hintStickerSprite = new SpriteProp({\n    spriteURL: this.hintStickerSpriteURL,\n  });\n\n  puzzleLoader = new PuzzleLoaderProp(\n    {\n      puzzleIDRequest: this.puzzleIDRequest,\n      puzzleDescriptionRequest: this.puzzleDescriptionRequest,\n    },\n    this.userVisibleErrorTracker,\n  );\n\n  // Depth 2\n  kpuzzle = new KPuzzleProp({ puzzleLoader: this.puzzleLoader });\n\n  puzzleID = new PuzzleIDProp({ puzzleLoader: this.puzzleLoader });\n\n  // Depth 3\n\n  puzzleAlg = new PuzzleAlgProp({\n    algWithIssues: this.alg,\n    kpuzzle: this.kpuzzle,\n  });\n\n  puzzleSetupAlg = new PuzzleAlgProp({\n    algWithIssues: this.setupAlg,\n    kpuzzle: this.kpuzzle,\n  });\n\n  visualizationStrategy = new VisualizationStrategyProp({\n    visualizationRequest: this.visualizationFormat,\n    puzzleID: this.puzzleID,\n  });\n\n  // Depth 4\n  indexerConstructor = new IndexerConstructorProp({\n    alg: this.alg,\n    puzzle: this.puzzleID,\n    visualizationStrategy: this.visualizationStrategy,\n    indexerConstructorRequest: this.indexerConstructorRequest,\n  });\n\n  moveCount = new NaiveMoveCountProp({ alg: this.puzzleAlg });\n\n  orbitCoordinates = new OrbitCoordinatesProp({\n    orbitCoordinatesRequest: this.orbitCoordinatesRequest,\n    latitudeLimit: this.latitudeLimit,\n    puzzleID: this.puzzleID,\n    strategy: this.visualizationStrategy,\n  });\n\n  setupAlgTransformation = new AlgTransformationProp({\n    setupAlg: this.puzzleSetupAlg,\n    kpuzzle: this.kpuzzle,\n  });\n\n  // Depth 5\n  indexer = new IndexerProp({\n    indexerConstructor: this.indexerConstructor,\n    algWithIssues: this.puzzleAlg,\n    kpuzzle: this.kpuzzle,\n  });\n\n  // Depth 6\n  anchorTransformation = new AnchorTransformationProp({\n    setupTransformation: this.setupTransformation,\n    setupAnchor: this.setupAnchor,\n    setupAlgTransformation: this.setupAlgTransformation,\n    indexer: this.indexer,\n  });\n\n  timeRange = new TimeRangeProp({\n    indexer: this.indexer,\n  });\n\n  // Depth 7\n  detailedTimelineInfo: DetailedTimelineInfoProp = new DetailedTimelineInfoProp(\n    {\n      timestampRequest: this.timestampRequest,\n      timeRange: this.timeRange,\n      setupAnchor: this.setupAnchor,\n    },\n  );\n\n  // Depth 8\n  coarseTimelineInfo = new CoarseTimelineInfoProp({\n    detailedTimelineInfo: this.detailedTimelineInfo,\n    playingInfo: this.playingInfo,\n  });\n\n  currentMoveInfo = new CurrentMoveInfoProp({\n    indexer: this.indexer,\n    detailedTimelineInfo: this.detailedTimelineInfo,\n    catchUpMove: this.catchUpMove,\n  });\n\n  // Depth 9\n  // TODO: Inline Twisty3D management.\n  buttonAppearance = new ButtonAppearanceProp({\n    coarseTimelineInfo: this.coarseTimelineInfo,\n    viewerLink: this.viewerLink,\n  });\n\n  currentLeavesSimplified = new CurrentLeavesSimplifiedProp({\n    currentMoveInfo: this.currentMoveInfo,\n  });\n\n  // Depth 10\n  currentState = new CurrentStateProp({\n    anchoredStart: this.anchorTransformation,\n    currentLeavesSimplified: this.currentLeavesSimplified,\n    indexer: this.indexer,\n  });\n\n  // Depth 11\n  legacyPosition = new LegacyPositionProp({\n    currentMoveInfo: this.currentMoveInfo,\n    state: this.currentState,\n  });\n\n  public async twizzleLink(): Promise<string> {\n    const [\n      viewerLink,\n      puzzleID,\n      puzzleDescription,\n      alg,\n      setup,\n      anchor,\n      experimentalStickering,\n    ] = await Promise.all([\n      this.viewerLink.get(),\n      this.puzzleID.get(),\n      this.puzzleDescriptionRequest.get(),\n      this.alg.get(),\n      this.setupAlg.get(),\n      this.setupAnchor.get(),\n      this.stickering.get(),\n    ]);\n\n    const isExplorer = viewerLink === \"experimental-twizzle-explorer\";\n\n    console.log({ isExplorer, viewerLink });\n\n    const url = new URL(\n      `https://alpha.twizzle.net/${isExplorer ? \"explore\" : \"edit\"}/`,\n    );\n\n    if (!alg.alg.experimentalIsEmpty()) {\n      url.searchParams.set(\"alg\", alg.alg.toString());\n    }\n    if (!setup.alg.experimentalIsEmpty()) {\n      url.searchParams.set(\"setup-alg\", setup.alg.toString());\n    }\n    if (anchor !== \"start\") {\n      url.searchParams.set(\"setup-anchor\", anchor);\n    }\n    if (experimentalStickering !== \"full\") {\n      url.searchParams.set(\"experimental-stickering\", experimentalStickering);\n    }\n    if (isExplorer && puzzleDescription !== NO_VALUE) {\n      url.searchParams.set(\"puzzle-description\", puzzleDescription);\n    } else if (puzzleID !== \"3x3x3\") {\n      url.searchParams.set(\"puzzle\", puzzleID);\n    }\n    return url.toString();\n  }\n\n  // TODO: Animate the new move.\n  experimentalAddMove(\n    flexibleMove: Move | string,\n    options: { coalesce?: boolean; mod?: number } = {},\n  ): void {\n    const move =\n      typeof flexibleMove === \"string\" ? new Move(flexibleMove) : flexibleMove;\n    (async () => {\n      const alg = (await this.alg.get()).alg;\n      const newAlg = experimentalAppendMove(alg, move, {\n        coalesce: options?.coalesce,\n        mod: options?.mod,\n      });\n      this.alg.set(newAlg);\n      this.timestampRequest.set(\"end\");\n      this.catchUpMove.set({\n        move: move,\n        amount: 0,\n      });\n    })();\n  }\n\n  // TODO: Remove after https://github.com/Odder/pyraminx.tips/pull/1 lands\n  /** @deprecated */\n  get playingInfoProp(): PlayingInfoProp {\n    console.warn(\n      \"Using deprecated prop: `playingInfoProp`. Please switch to: `playingInfo`\",\n    );\n    return this.playingInfo;\n  }\n}\n","import { CSSSource } from \"./ManagedCustomElement\";\n\nexport const twistyAlgViewerCSS = new CSSSource(`\n:host {\n  display: inline-grid;\n}\n\na:not(:hover) {\n  color: inherit;\n  text-decoration: none;\n}\n\ntwisty-alg-leaf-elem.twisty-alg-comment {\n  color: rgba(0, 0, 0, 0.4);\n}\n\n.wrapper.current-move {\n  background: rgba(66, 133, 244, 0.3);\n  margin-left: -0.1em;\n  margin-right: -0.1em;\n  padding-left: 0.1em;\n  padding-right: 0.1em;\n  border-radius: 0.1em;\n}\n`);\n","import {\n  Alg,\n  Commutator,\n  Conjugate,\n  experimentalDirect,\n  ExperimentalIterationDirection,\n  Grouping,\n  LineComment,\n  Move,\n  Newline,\n  Pause,\n  TraversalDownUp,\n  Unit,\n} from \"../../alg\";\nimport type { Parsed } from \"../../alg/parse\";\nimport type { AlgWithIssues } from \"../model/props/puzzle/state/AlgProp\";\nimport type { DetailedTimelineInfo } from \"../model/props/timeline/DetailedTimelineInfoProp\";\nimport type { MillisecondTimestamp } from \"../controllers/AnimationTypes\";\nimport type { CurrentMoveInfo } from \"../controllers/indexer/AlgIndexer\";\nimport { ManagedCustomElement } from \"./ManagedCustomElement\";\nimport {\n  customElementsShim,\n  HTMLElementShim,\n} from \"./node-custom-element-shims\";\nimport { twistyAlgViewerCSS } from \"./TwistyAlgViewer.css\";\nimport { TwistyPlayer } from \"./TwistyPlayer\";\n\nconst DEFAULT_OFFSET_MS = 250; // TODO: make this a fraction?\n\nclass DataDown {\n  earliestMoveIndex: number;\n  twistyAlgViewer: TwistyAlgViewer;\n  direction: ExperimentalIterationDirection;\n}\n\nclass DataUp {\n  moveCount: number;\n  element: TwistyAlgWrapperElem | TwistyAlgLeafElem;\n}\n\nclass TwistyAlgLeafElem extends ManagedCustomElement {\n  constructor(\n    className: string,\n    text: string,\n    dataDown: DataDown,\n    public algOrUnit: Alg | Unit,\n    offsetIntoMove: boolean,\n    clickable: boolean,\n  ) {\n    super({ mode: \"open\" });\n    this.classList.add(className);\n\n    this.addCSS(twistyAlgViewerCSS);\n    if (clickable) {\n      const anchor = this.contentWrapper.appendChild(\n        document.createElement(\"a\"),\n      );\n      anchor.href = \"#\";\n      anchor.textContent = text;\n\n      anchor.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        dataDown.twistyAlgViewer.jumpToIndex(\n          dataDown.earliestMoveIndex,\n          offsetIntoMove,\n        );\n      });\n    } else {\n      this.contentWrapper.appendChild(\n        document.createElement(\"span\"),\n      ).textContent = text;\n    }\n  }\n\n  pathToIndex(_index: number): (TwistyAlgWrapperElem | TwistyAlgLeafElem)[] {\n    return [];\n  }\n\n  setCurrentMove(current: boolean) {\n    this.contentWrapper.classList.toggle(\"current-move\", current);\n  }\n}\n\ncustomElementsShim.define(\"twisty-alg-leaf-elem\", TwistyAlgLeafElem);\n\nclass TwistyAlgWrapperElem extends HTMLElementShim {\n  private queue: (Element | Text)[] = [];\n\n  constructor(className: string, public algOrUnit: Alg | Unit) {\n    super();\n    this.classList.add(className);\n  }\n\n  addString(str: string) {\n    this.queue.push(document.createTextNode(str));\n  }\n\n  addElem(dataUp: DataUp): number {\n    this.queue.push(dataUp.element);\n    return dataUp.moveCount;\n  }\n\n  flushQueue(\n    direction: ExperimentalIterationDirection = ExperimentalIterationDirection.Forwards,\n  ): void {\n    for (const node of maybeReverseList(this.queue, direction)) {\n      this.append(node);\n    }\n    this.queue = [];\n  }\n\n  pathToIndex(_index: number): (TwistyAlgWrapperElem | TwistyAlgLeafElem)[] {\n    return [];\n  }\n}\n\ncustomElementsShim.define(\"twisty-alg-wrapper-elem\", TwistyAlgWrapperElem);\n\nfunction oppositeDirection(\n  direction: ExperimentalIterationDirection,\n): ExperimentalIterationDirection {\n  return direction === ExperimentalIterationDirection.Forwards\n    ? ExperimentalIterationDirection.Backwards\n    : ExperimentalIterationDirection.Forwards;\n}\n\nfunction updateDirectionByAmount(\n  currentDirection: ExperimentalIterationDirection,\n  amount: number,\n): ExperimentalIterationDirection {\n  return amount < 0 ? oppositeDirection(currentDirection) : currentDirection;\n}\n\nfunction maybeReverseList<T>(\n  l: T[],\n  direction: ExperimentalIterationDirection,\n): T[] {\n  if (direction === ExperimentalIterationDirection.Forwards) {\n    return l;\n  }\n  // console.log(\"rev\", Array.from(l).reverse());\n  // return Array.from(l).reverse();\n  const copy = Array.from(l);\n  copy.reverse();\n  return copy;\n}\n\nclass AlgToDOMTree extends TraversalDownUp<DataDown, DataUp, DataUp> {\n  public traverseAlg(alg: Alg, dataDown: DataDown): DataUp {\n    let moveCount = 0;\n    const element = new TwistyAlgWrapperElem(\"twisty-alg-alg\", alg); // TODO: pick a better class name.\n    let first = true;\n    for (const unit of experimentalDirect(alg.units(), dataDown.direction)) {\n      if (!first) {\n        element.addString(\" \");\n      }\n      first = false;\n      moveCount += element.addElem(\n        this.traverseUnit(unit, {\n          earliestMoveIndex: dataDown.earliestMoveIndex + moveCount,\n          twistyAlgViewer: dataDown.twistyAlgViewer,\n          direction: dataDown.direction,\n        }),\n      );\n    }\n    element.flushQueue(dataDown.direction);\n    return {\n      moveCount: moveCount,\n      element,\n    };\n  }\n\n  public traverseGrouping(grouping: Grouping, dataDown: DataDown): DataUp {\n    const square1Tuple = grouping.experimentalAsSquare1Tuple();\n    // if (square1Tuplle) {\n\n    // }\n\n    const direction = updateDirectionByAmount(\n      dataDown.direction,\n      grouping.amount,\n    );\n    let moveCount = 0;\n    const element = new TwistyAlgWrapperElem(\"twisty-alg-grouping\", grouping);\n    element.addString(\"(\");\n\n    if (square1Tuple) {\n      moveCount += element.addElem({\n        moveCount: 1,\n        element: new TwistyAlgLeafElem(\n          \"twisty-alg-move\", // TODO: Mark the tuple with a special class?\n          square1Tuple[0].amount.toString(),\n          dataDown,\n          square1Tuple[0],\n          true,\n          true,\n        ),\n      });\n      element.addString(\", \");\n      moveCount += element.addElem({\n        moveCount: 1,\n        element: new TwistyAlgLeafElem(\n          \"twisty-alg-move\", // TODO: Mark the tuple with a special class?\n          square1Tuple[1].amount.toString(),\n          dataDown,\n          square1Tuple[1],\n          true,\n          true,\n        ),\n      });\n    } else {\n      moveCount += element.addElem(\n        this.traverseAlg(grouping.alg, {\n          earliestMoveIndex: dataDown.earliestMoveIndex + moveCount,\n          twistyAlgViewer: dataDown.twistyAlgViewer,\n          direction,\n        }),\n      );\n    }\n\n    element.addString(\")\" + grouping.experimentalRepetitionSuffix);\n    element.flushQueue();\n    return {\n      moveCount: moveCount * Math.abs(grouping.amount),\n      element,\n    };\n  }\n\n  public traverseMove(move: Move, dataDown: DataDown): DataUp {\n    const element = new TwistyAlgLeafElem(\n      \"twisty-alg-move\",\n      move.toString(),\n      dataDown,\n      move,\n      true,\n      true,\n    );\n    dataDown.twistyAlgViewer.highlighter.addMove(\n      (move as Parsed<Move>).startCharIndex,\n      element,\n    );\n    return {\n      moveCount: 1,\n      element,\n    };\n  }\n\n  public traverseCommutator(\n    commutator: Commutator,\n    dataDown: DataDown,\n  ): DataUp {\n    let moveCount = 0;\n    const element = new TwistyAlgWrapperElem(\n      \"twisty-alg-commutator\",\n      commutator,\n    );\n    element.addString(\"[\");\n    element.flushQueue();\n    const [first, second]: Alg[] = maybeReverseList(\n      [commutator.A, commutator.B],\n      dataDown.direction,\n    );\n    moveCount += element.addElem(\n      this.traverseAlg(first, {\n        earliestMoveIndex: dataDown.earliestMoveIndex + moveCount,\n        twistyAlgViewer: dataDown.twistyAlgViewer,\n        direction: dataDown.direction,\n      }),\n    );\n    element.addString(\", \");\n    moveCount += element.addElem(\n      this.traverseAlg(second, {\n        earliestMoveIndex: dataDown.earliestMoveIndex + moveCount,\n        twistyAlgViewer: dataDown.twistyAlgViewer,\n        direction: dataDown.direction,\n      }),\n    );\n    element.flushQueue(dataDown.direction);\n    element.addString(\"]\");\n    element.flushQueue();\n    return {\n      moveCount: moveCount * 2,\n      element,\n    };\n  }\n\n  public traverseConjugate(conjugate: Conjugate, dataDown: DataDown): DataUp {\n    let moveCount = 0;\n    const element = new TwistyAlgWrapperElem(\"twisty-alg-conjugate\", conjugate);\n    element.addString(\"[\");\n    const aLen = element.addElem(\n      this.traverseAlg(conjugate.A, {\n        earliestMoveIndex: dataDown.earliestMoveIndex + moveCount,\n        twistyAlgViewer: dataDown.twistyAlgViewer,\n        direction: dataDown.direction,\n      }),\n    );\n    moveCount += aLen;\n    element.addString(\": \");\n    moveCount += element.addElem(\n      this.traverseAlg(conjugate.B, {\n        earliestMoveIndex: dataDown.earliestMoveIndex + moveCount,\n        twistyAlgViewer: dataDown.twistyAlgViewer,\n        direction: dataDown.direction,\n      }),\n    );\n    element.addString(\"]\");\n    element.flushQueue();\n    return {\n      moveCount: moveCount + aLen,\n      element,\n    };\n  }\n\n  public traversePause(pause: Pause, dataDown: DataDown): DataUp {\n    return {\n      moveCount: 1,\n      element: new TwistyAlgLeafElem(\n        \"twisty-alg-pause\",\n        \".\",\n        dataDown,\n        pause,\n        true,\n        true,\n      ),\n    };\n  }\n\n  public traverseNewline(newline: Newline, _dataDown: DataDown): DataUp {\n    const element = new TwistyAlgWrapperElem(\"twisty-alg-newline\", newline);\n    element.append(document.createElement(\"br\"));\n    return {\n      moveCount: 0,\n      element,\n    };\n  }\n\n  public traverseLineComment(\n    lineComment: LineComment,\n    dataDown: DataDown,\n  ): DataUp {\n    return {\n      moveCount: 0,\n      element: new TwistyAlgLeafElem(\n        \"twisty-alg-line-comment\",\n        `//${lineComment.text}`,\n        dataDown,\n        lineComment,\n        false,\n        false,\n      ),\n    };\n  }\n}\n\nconst algToDOMTreeInstance = new AlgToDOMTree();\nconst algToDOMTree = algToDOMTreeInstance.traverseAlg.bind(\n  algToDOMTreeInstance,\n) as (alg: Alg, dataDown: DataDown) => DataUp;\n\nclass MoveHighlighter {\n  moveCharIndexMap: Map<number, TwistyAlgLeafElem> = new Map();\n  currentElem: TwistyAlgLeafElem | null = null;\n\n  addMove(charIndex: number, elem: TwistyAlgLeafElem): void {\n    this.moveCharIndexMap.set(charIndex, elem);\n  }\n\n  set(move: Parsed<Move> | null): void {\n    const newElem = move\n      ? this.moveCharIndexMap.get(move.startCharIndex) ?? null\n      : null;\n    if (this.currentElem === newElem) {\n      return;\n    }\n    this.currentElem?.classList.remove(\"twisty-alg-current-move\");\n    this.currentElem?.setCurrentMove(false);\n    newElem?.classList.add(\"twisty-alg-current-move\");\n    newElem?.setCurrentMove(true);\n    this.currentElem = newElem;\n  }\n}\n\nexport class TwistyAlgViewer extends HTMLElementShim {\n  highlighter: MoveHighlighter = new MoveHighlighter();\n  #domTree: TwistyAlgWrapperElem | TwistyAlgLeafElem;\n  twistyPlayer: TwistyPlayer | null = null;\n  lastClickTimestamp: number | null = null;\n  constructor(options?: { twistyPlayer?: TwistyPlayer }) {\n    super();\n    if (options?.twistyPlayer) {\n      this.setTwistyPlayer(options?.twistyPlayer);\n    }\n  }\n\n  protected connectedCallback(): void {\n    // nothing to do?\n  }\n\n  private setAlg(alg: Alg): void {\n    this.#domTree = algToDOMTree(alg, {\n      earliestMoveIndex: 0,\n      twistyAlgViewer: this,\n      direction: ExperimentalIterationDirection.Forwards,\n    }).element;\n    this.textContent = \"\";\n    this.appendChild(this.#domTree);\n  }\n\n  async setTwistyPlayer(twistyPlayer: TwistyPlayer): Promise<void> {\n    if (this.twistyPlayer) {\n      console.warn(\"twisty-player reassignment is not supported\");\n      return;\n    }\n    this.twistyPlayer = twistyPlayer;\n\n    this.twistyPlayer.experimentalModel.alg.addFreshListener(\n      (algWithIssues: AlgWithIssues) => {\n        this.setAlg(algWithIssues.alg);\n      },\n    );\n\n    const sourceAlg = (await this.twistyPlayer.experimentalModel.alg.get()).alg;\n    // TODO: Use proper architecture instead of a heuristic to ensure we have a parsed alg annotated with char indices.\n    const parsedAlg =\n      \"startCharIndex\" in (sourceAlg as Partial<Parsed<Alg>>)\n        ? sourceAlg\n        : Alg.fromString(sourceAlg.toString());\n    this.setAlg(parsedAlg);\n\n    twistyPlayer.experimentalModel.currentMoveInfo.addFreshListener(\n      (currentMoveInfo: CurrentMoveInfo) => {\n        let moveInfo = currentMoveInfo.currentMoves[0];\n        moveInfo ??= currentMoveInfo.movesStarting[0];\n        moveInfo ??= currentMoveInfo.movesFinishing[0];\n        if (!moveInfo) {\n          this.highlighter.set(null);\n        } else {\n          const mainCurrentMove = moveInfo.move; // TODO\n          this.highlighter.set(mainCurrentMove as Parsed<Move>);\n        }\n      },\n    );\n\n    twistyPlayer.experimentalModel.detailedTimelineInfo.addFreshListener(\n      (detailedTimelineInfo: DetailedTimelineInfo) => {\n        if (detailedTimelineInfo.timestamp !== this.lastClickTimestamp) {\n          this.lastClickTimestamp = null;\n        }\n      },\n    );\n  }\n\n  async jumpToIndex(index: number, offsetIntoMove: boolean): Promise<void> {\n    // TODO: Fix async issues.\n    const twistyPlayer = this.twistyPlayer;\n    if (twistyPlayer) {\n      twistyPlayer.pause();\n      const timestampPromise = (async (): Promise<MillisecondTimestamp> => {\n        const indexer = await twistyPlayer.experimentalModel.indexer.get();\n        const offset = offsetIntoMove ? DEFAULT_OFFSET_MS : 0;\n        return (indexer.indexToMoveStartTimestamp(index) ?? -offset) + offset;\n      })();\n      twistyPlayer.experimentalModel.timestampRequest.set(\n        await timestampPromise, // TODO\n      );\n      if (this.lastClickTimestamp === (await timestampPromise)) {\n        twistyPlayer.play();\n        this.lastClickTimestamp = null;\n      } else {\n        this.lastClickTimestamp = await timestampPromise;\n      }\n    }\n  }\n\n  protected async attributeChangedCallback(\n    attributeName: string,\n    _oldValue: string,\n    newValue: string,\n  ): Promise<void> {\n    if (attributeName === \"for\") {\n      const elem = document.getElementById(newValue);\n      if (!elem) {\n        console.warn(\"for= elem does not exist\");\n        return;\n      }\n      await customElements.whenDefined(\"twisty-player\");\n      if (!(elem instanceof TwistyPlayer)) {\n        console.warn(\"for= elem is not a twisty-player\");\n        return;\n      }\n      this.setTwistyPlayer(elem);\n    }\n  }\n\n  static get observedAttributes(): string[] {\n    return [\"for\"];\n  }\n}\n\ncustomElementsShim.define(\"twisty-alg-viewer\", TwistyAlgViewer);\n","import {\n  Alg,\n  Commutator,\n  Conjugate,\n  Grouping,\n  LineComment,\n  Move,\n  Newline,\n  Pause,\n  TraversalDownUp,\n} from \"../../../alg\";\nimport type { Parsed } from \"../../../alg/parse\";\nimport type { AnimatedLeafUnit } from \"../../controllers/indexer/simultaneous-moves/simul-moves\";\n\nexport type AnimatedLeafUnitInfo = {\n  leaf: Parsed<AnimatedLeafUnit>;\n  idx: number;\n};\nexport type OrderedLeafTokens = AnimatedLeafUnitInfo[];\n\ninterface DataUp {\n  tokens: OrderedLeafTokens;\n  numLeavesInside: number;\n}\n\ninterface DataDown {\n  numMovesSofar: number;\n}\n\nclass LeafTokens extends TraversalDownUp<DataDown, DataUp> {\n  public traverseAlg(alg: Alg, dataDown: DataDown): DataUp {\n    const unitArrays: OrderedLeafTokens[] = [];\n    let numMovesInside = 0;\n    for (const unit of alg.units()) {\n      const dataUp = this.traverseUnit(unit, {\n        numMovesSofar: dataDown.numMovesSofar + numMovesInside,\n      });\n      unitArrays.push(dataUp.tokens);\n      numMovesInside += dataUp.numLeavesInside;\n    }\n    return {\n      tokens: Array.prototype.concat(...unitArrays),\n      numLeavesInside: numMovesInside,\n    };\n  }\n\n  public traverseGrouping(grouping: Grouping, dataDown: DataDown): DataUp {\n    const dataUp = this.traverseAlg(grouping.alg, dataDown);\n    return {\n      tokens: dataUp.tokens,\n      numLeavesInside: dataUp.numLeavesInside * grouping.amount,\n    };\n  }\n\n  public traverseMove(move: Move, dataDown: DataDown): DataUp {\n    return {\n      tokens: [{ leaf: move as Parsed<Move>, idx: dataDown.numMovesSofar }],\n      numLeavesInside: 1,\n    }; // TODO: What if not parsed?\n  }\n\n  public traverseCommutator(\n    commutator: Commutator,\n    dataDown: DataDown,\n  ): DataUp {\n    const dataUpA = this.traverseAlg(commutator.A, dataDown);\n    const dataUpB = this.traverseAlg(commutator.B, {\n      numMovesSofar: dataDown.numMovesSofar + dataUpA.numLeavesInside,\n    });\n    return {\n      tokens: dataUpA.tokens.concat(dataUpB.tokens),\n      numLeavesInside: dataUpA.numLeavesInside * 2 + dataUpB.numLeavesInside,\n    };\n  }\n\n  public traverseConjugate(conjugate: Conjugate, dataDown: DataDown): DataUp {\n    const dataUpA = this.traverseAlg(conjugate.A, dataDown);\n    const dataUpB = this.traverseAlg(conjugate.B, {\n      numMovesSofar: dataDown.numMovesSofar + dataUpA.numLeavesInside,\n    });\n    return {\n      tokens: dataUpA.tokens.concat(dataUpB.tokens),\n      numLeavesInside:\n        dataUpA.numLeavesInside * 2 + dataUpB.numLeavesInside * 2,\n    };\n  }\n\n  public traversePause(pause: Pause, dataDown: DataDown): DataUp {\n    return {\n      tokens: [{ leaf: pause as Parsed<Pause>, idx: dataDown.numMovesSofar }],\n      numLeavesInside: 1,\n    }; // TODO: What if not parsed?\n  }\n\n  public traverseNewline(_newline: Newline, _dataDown: DataDown): DataUp {\n    return {\n      tokens: [],\n      numLeavesInside: 0,\n    };\n  }\n\n  public traverseLineComment(\n    _comment: LineComment,\n    _dataDown: DataDown,\n  ): DataUp {\n    return {\n      tokens: [],\n      numLeavesInside: 0,\n    };\n  }\n}\n\nconst leafTokensInstance = new LeafTokens();\nexport const leafTokens = leafTokensInstance.traverseAlg.bind(\n  leafTokensInstance,\n) as (alg: Parsed<Alg>, dataDown: DataDown) => DataUp;\n","/**\n * Warning: the current implementation of <twisty-alg-editor> is *not good*,\n * but it is *good enough*. The important parts is that:\n *\n * - The editor can be used in apps without much effort.\n * - The editor handles alg validation and move highlighting *okay* when not\n *   connected to a `<twisty-player>`.\n * - The editor stays in sync if it's connected to a `<twisty-player>`.\n *\n * The current implementation still has some race conditions and edge cases. A\n * proper rewrite with a better model would be very welcome.\n */\n\nimport type { ExperimentalParsed } from \"../../../alg\";\nimport { Alg, Move, Pause } from \"../../../alg\";\nimport type { Parsed } from \"../../../alg/parse\";\nimport type {\n  AlgProp,\n  AlgWithIssues,\n} from \"../../model/props/puzzle/state/AlgProp\";\nimport type { CurrentLeavesSimplified } from \"../../model/props/puzzle/state/CurrentLeavesSimplified\";\nimport { ClassListManager } from \"../ClassListManager\";\nimport { ManagedCustomElement } from \"../ManagedCustomElement\";\nimport { customElementsShim } from \"../node-custom-element-shims\";\nimport { TwistyPlayer } from \"../TwistyPlayer\";\nimport { HighlightInfo, TwistyAlgEditorModel } from \"./model\";\nimport { twistyAlgEditorCSS } from \"./TwistyAlgEditor.css\";\n\nconst ATTRIBUTE_FOR_TWISTY_PLAYER = \"for-twisty-player\";\nconst ATTRIBUTE_PLACEHOLDER = \"placeholder\";\nconst ATTRIBUTE_TWISTY_PLAYER_PROP = \"twisty-player-prop\";\n\ntype TwistyPlayerAlgProp = \"alg\" | \"setupAlg\";\n\nexport class TwistyAlgEditor extends ManagedCustomElement {\n  model = new TwistyAlgEditorModel();\n\n  // #alg: Alg = new Alg();\n  #textarea: HTMLTextAreaElement = document.createElement(\"textarea\");\n  #carbonCopy: HTMLDivElement = document.createElement(\"div\");\n  #carbonCopyPrefix: HTMLSpanElement = document.createElement(\"span\");\n  #carbonCopyHighlight: HTMLSpanElement = document.createElement(\"span\");\n  #carbonCopySuffix: HTMLSpanElement = document.createElement(\"span\");\n\n  // #textareaClassListManager: ClassListManager<\"none\" | \"warning\" | \"error\"> =\n  //   new ClassListManager(this, \"issue-\", [\"none\", \"warning\", \"error\"]);\n\n  #textareaClassListValidForPuzzleManager: ClassListManager<\n    \"none\" | \"warning\" | \"error\"\n  > = new ClassListManager(this, \"valid-for-puzzle-\", [\n    \"none\",\n    \"warning\",\n    \"error\",\n  ]);\n\n  #twistyPlayer: TwistyPlayer | null = null;\n  #twistyPlayerProp: TwistyPlayerAlgProp;\n  get #algProp(): AlgProp | null {\n    if (this.#twistyPlayer === null) {\n      return null;\n    } else {\n      return this.#twistyPlayer.experimentalModel[this.#twistyPlayerProp];\n    }\n  }\n\n  // Temporary Workaround for Twizzle Explorer\n  debugNeverRequestTimestamp: boolean = false;\n\n  constructor(options?: {\n    twistyPlayer?: TwistyPlayer;\n    twistyPlayerProp?: TwistyPlayerAlgProp;\n  }) {\n    super();\n    this.#carbonCopy.classList.add(\"carbon-copy\");\n    this.addElement(this.#carbonCopy);\n    this.#textarea.rows = 1;\n    this.addElement(this.#textarea);\n    this.#carbonCopyPrefix.classList.add(\"prefix\");\n    this.#carbonCopy.appendChild(this.#carbonCopyPrefix);\n    this.#carbonCopyHighlight.classList.add(\"highlight\");\n    this.#carbonCopy.appendChild(this.#carbonCopyHighlight);\n    this.#carbonCopySuffix.classList.add(\"suffix\");\n    this.#carbonCopy.appendChild(this.#carbonCopySuffix);\n\n    this.#textarea.placeholder = \"Alg\";\n    // Prevent iOS from defaulting to smart quotes.\n    this.#textarea.setAttribute(\"spellcheck\", \"false\");\n\n    this.addCSS(twistyAlgEditorCSS);\n\n    // TODO: What set of events should we register? `change`? `keydown`?\n    this.#textarea.addEventListener(\"input\", () => {\n      this.#onInputHasFired = true;\n      this.onInput();\n    });\n    this.#textarea.addEventListener(\"blur\", () => this.onBlur());\n    document.addEventListener(\"selectionchange\", () =>\n      this.onSelectionChange(),\n    );\n\n    if (options?.twistyPlayer) {\n      this.twistyPlayer = options.twistyPlayer;\n    }\n    this.#twistyPlayerProp = options?.twistyPlayerProp ?? \"alg\";\n\n    if (options?.twistyPlayerProp === \"alg\") {\n      this.model.leafToHighlight.addFreshListener(\n        (highlightInfo: HighlightInfo | null) => {\n          if (highlightInfo) {\n            this.highlightLeaf(highlightInfo.leafInfo.leaf);\n          }\n        },\n      );\n    }\n  }\n\n  // TODO\n  set algString(s: string) {\n    this.#textarea.value = s;\n    this.onInput();\n  }\n\n  // TODO: remove?\n  get algString(): string {\n    return this.#textarea.value;\n  }\n\n  // To we need a getter?\n  set placeholder(placeholderText: string) {\n    this.#textarea.placeholder = placeholderText;\n  }\n\n  #onInputHasFired = false;\n  onInput(): void {\n    this.#carbonCopyHighlight.hidden = true;\n    this.highlightLeaf(null);\n\n    // TODO: This is a hack so that the you don't get a warning when the cursor\n    // is after the space while typing `R U`. It would be nice to have something\n    // cursor-aware that can also ignore whitespace warnings (or other syntax\n    // errors due to normal input) adjacent to the cursor when it's in the\n    // middle, but this is suffuciently useful for now.\n    const endTrimmed = this.#textarea.value.trimEnd();\n    this.model.valueProp.set(endTrimmed);\n    this.#algProp?.set(endTrimmed);\n  }\n\n  async onSelectionChange(): Promise<void> {\n    if (\n      document.activeElement !== this ||\n      this.shadow.activeElement !== this.#textarea\n    ) {\n      return;\n    }\n    if (this.#twistyPlayerProp !== \"alg\") {\n      return;\n    }\n\n    const { selectionStart, selectionEnd } = this.#textarea;\n    this.model.selectionProp.set({\n      selectionStart,\n      selectionEnd,\n    });\n  }\n\n  async onBlur(): Promise<void> {\n    // TODO: Figure out how not to make the cursor jump.\n    // const parsed = Alg.fromString(this.algString);\n    // this.algString = parsed.toString();\n    // const [currentLeavesSimplified, indexer] = await Promise.all([\n    //   this.#twistyPlayer!.model.currentLeavesSimplifiedProp.get(),\n    //   this.#twistyPlayer!.model.indexerProp.get(),\n    // ]);\n    // const leaf = indexer.getAnimLeaf(currentLeavesSimplified.stateIndex);\n    // this.highlightLeaf(leaf as Parsed<Move | Pause> | null);\n  }\n\n  setAlgIssueClassForPuzzle(issues: \"none\" | \"warning\" | \"error\") {\n    this.#textareaClassListValidForPuzzleManager.setValue(issues);\n  }\n\n  // `white-space: pre;` mostly matches the formatting of the `<textarea>`, *except* when we end with a newline.\n  // So we add an space to ensure that there is a character on the final line (that is very unlikely to trigger extra line wrapping).\n  #padSuffix(s: string): string {\n    return s.endsWith(\"\\n\") ? s + \" \" : s;\n  }\n\n  #highlightedLeaf: ExperimentalParsed<Move | Pause> | null = null;\n  // TODO: support a primary highlighted move and secondary ones.\n  highlightLeaf(leaf: ExperimentalParsed<Move | Pause> | null): void {\n    if (this.#twistyPlayerProp !== \"alg\") {\n      return;\n    }\n    if (leaf === null) {\n      this.#carbonCopyPrefix.textContent = \"\";\n      this.#carbonCopyHighlight.textContent = \"\";\n      this.#carbonCopySuffix.textContent = this.#padSuffix(\n        this.#textarea.value,\n      );\n      return;\n    }\n    if (leaf === this.#highlightedLeaf) {\n      return;\n    }\n    this.#highlightedLeaf = leaf;\n    this.#carbonCopyPrefix.textContent = this.#textarea.value.slice(\n      0,\n      leaf.startCharIndex,\n    );\n    this.#carbonCopyHighlight.textContent = this.#textarea.value.slice(\n      leaf.startCharIndex,\n      leaf.endCharIndex,\n    );\n    this.#carbonCopySuffix.textContent = this.#padSuffix(\n      this.#textarea.value.slice(leaf.endCharIndex),\n    );\n    this.#carbonCopyHighlight.hidden = false;\n  }\n\n  get twistyPlayer(): TwistyPlayer | null {\n    return this.#twistyPlayer;\n  }\n\n  // TODO: spread out this impl over private methods instead of self-listeners.\n  set twistyPlayer(twistyPlayer: TwistyPlayer | null) {\n    if (this.#twistyPlayer) {\n      // TODO: support reassigment/clearing\n      console.warn(\"twisty-player reassignment/clearing is not supported\");\n      return;\n    }\n    this.#twistyPlayer = twistyPlayer;\n    if (!twistyPlayer) {\n      return;\n    }\n    (async () => {\n      this.algString = this.#algProp\n        ? (await this.#algProp.get()).alg.toString()\n        : \"\";\n    })();\n\n    if (this.#twistyPlayerProp === \"alg\") {\n      // this.model.leafToHighlight.addFreshListener(\n      //   this.highlightLeaf.bind(this),\n      // );\n\n      // TODO: listen to puzzle prop?\n      this.#twistyPlayer?.experimentalModel.puzzleAlg.addFreshListener(\n        (algWithIssues: AlgWithIssues) => {\n          // console.log(JSON.stringify(algWithIssues));\n          if (algWithIssues.issues.errors.length === 0) {\n            this.setAlgIssueClassForPuzzle(\n              // TODO: Allow trailing spaces.\n              algWithIssues.issues.warnings.length === 0 ? \"none\" : \"warning\",\n            );\n            const newAlg = algWithIssues.alg;\n            const oldAlg = Alg.fromString(this.algString);\n            if (!newAlg.isIdentical(oldAlg)) {\n              this.algString = newAlg.toString();\n              this.onInput();\n            } else {\n              // this.model.algInputProp.set(oldAlg);\n            }\n          } else {\n            this.setAlgIssueClassForPuzzle(\"error\");\n          }\n        },\n      );\n\n      this.model.leafToHighlight.addFreshListener(\n        async (highlightInfo: HighlightInfo | null) => {\n          if (highlightInfo === null) {\n            return;\n          }\n          // TODO: This indexer can be out of date!\n          const [indexer, timestampRequest] = await Promise.all([\n            await twistyPlayer.experimentalModel.indexer.get(),\n            await twistyPlayer.experimentalModel.timestampRequest.get(),\n          ]);\n          if (\n            timestampRequest === \"opposite-anchor\" &&\n            !this.#onInputHasFired\n          ) {\n            return;\n          }\n          const moveStartTimestamp = indexer.indexToMoveStartTimestamp(\n            highlightInfo.leafInfo.idx,\n          );\n          const duration = indexer.moveDuration(highlightInfo.leafInfo.idx);\n\n          let newTimestamp: number;\n          switch (highlightInfo.where) {\n            case \"before\":\n              newTimestamp = moveStartTimestamp;\n              break;\n            case \"start\":\n            case \"inside\":\n              newTimestamp = moveStartTimestamp + duration / 4;\n              break;\n            case \"end\":\n            case \"after\":\n              newTimestamp = moveStartTimestamp + duration;\n              break;\n            default:\n              console.log(\"invalid where\");\n              throw new Error(\"Invalid where!\");\n          }\n          if (!this.debugNeverRequestTimestamp) {\n            twistyPlayer.experimentalModel.timestampRequest.set(newTimestamp);\n          }\n        },\n      );\n\n      twistyPlayer.experimentalModel.currentLeavesSimplified.addFreshListener(\n        async (currentLeavesSimplified: CurrentLeavesSimplified) => {\n          const indexer = await twistyPlayer.experimentalModel.indexer.get();\n          const leaf = indexer.getAnimLeaf(currentLeavesSimplified.stateIndex);\n          this.highlightLeaf(leaf as Parsed<Move | Pause> | null);\n        },\n      );\n    }\n  }\n\n  protected attributeChangedCallback(\n    attributeName: string,\n    _oldValue: string,\n    newValue: string,\n  ): void {\n    switch (attributeName) {\n      case ATTRIBUTE_FOR_TWISTY_PLAYER: {\n        const elem = document.getElementById(newValue);\n        if (!elem) {\n          console.warn(`${ATTRIBUTE_FOR_TWISTY_PLAYER}= elem does not exist`);\n          return;\n        }\n        if (!(elem instanceof TwistyPlayer)) {\n          // TODO: avoid assuming single instance of lib?\n          console.warn(`${ATTRIBUTE_FOR_TWISTY_PLAYER}=is not a twisty-player`);\n          return;\n        }\n        this.twistyPlayer = elem;\n        return;\n      }\n      case ATTRIBUTE_PLACEHOLDER:\n        this.placeholder = newValue;\n        return;\n      case ATTRIBUTE_TWISTY_PLAYER_PROP:\n        if (this.#twistyPlayer) {\n          console.log(\"cannot set prop\");\n          throw new Error(\"cannot set prop after twisty player\");\n        }\n        this.#twistyPlayerProp = newValue as TwistyPlayerAlgProp;\n        return;\n    }\n  }\n\n  static get observedAttributes(): string[] {\n    return [\n      ATTRIBUTE_FOR_TWISTY_PLAYER,\n      ATTRIBUTE_PLACEHOLDER,\n      ATTRIBUTE_TWISTY_PLAYER_PROP,\n    ];\n  }\n}\n\ncustomElementsShim.define(\"twisty-alg-editor\", TwistyAlgEditor);\n","// TODO: Move this?\n\nimport type { Alg } from \"../../../alg\";\nimport type { Parsed } from \"../../../alg/parse\";\nimport {\n  AlgWithIssues,\n  algWithIssuesFromString,\n} from \"../../model/props/puzzle/state/AlgProp\";\nimport {\n  SimpleTwistyPropSource,\n  TwistyPropDerived,\n  TwistyPropSource,\n} from \"../../model/props/TwistyProp\";\nimport {\n  AnimatedLeafUnitInfo,\n  leafTokens,\n  OrderedLeafTokens,\n} from \"./LeafTokens\";\n\nexport class TwistyAlgEditorValueProp extends SimpleTwistyPropSource<string> {\n  getDefaultValue(): string {\n    return \"\";\n  }\n}\n\ninterface AlgEditorAlgWithIssuesPropInput {\n  value: string;\n}\nclass AlgEditorAlgWithIssuesProp extends TwistyPropDerived<\n  AlgEditorAlgWithIssuesPropInput,\n  AlgWithIssues\n> {\n  derive(input: AlgEditorAlgWithIssuesPropInput): AlgWithIssues {\n    return algWithIssuesFromString(input.value);\n  }\n\n  // TODO: canReuse needs to take the source string into account.\n}\n\ninterface SelectionInfoPropInput {\n  selectionStart: number;\n  selectionEnd: number;\n}\ninterface SelectionInfo extends SelectionInfoPropInput {\n  endChangedMostRecently: boolean;\n}\nexport class TwistyAlgEditorSelectionProp extends TwistyPropSource<\n  SelectionInfo,\n  SelectionInfoPropInput\n> {\n  getDefaultValue() {\n    return {\n      selectionStart: 0,\n      selectionEnd: 0,\n      endChangedMostRecently: false,\n    };\n  }\n\n  async derive(\n    input: SelectionInfoPropInput,\n    oldValue: Promise<SelectionInfo>,\n  ): Promise<SelectionInfo> {\n    const { selectionStart, selectionEnd } = input;\n    const lastResult = await oldValue;\n    const endChangedMostRecently =\n      input.selectionStart === lastResult.selectionStart &&\n      input.selectionEnd !== (await oldValue).selectionEnd;\n    return {\n      selectionStart,\n      selectionEnd,\n      endChangedMostRecently,\n    };\n  }\n}\n\ninterface TargetCharPropInputs {\n  selectionInfo: SelectionInfo;\n}\n\nexport class TargetCharProp extends TwistyPropDerived<\n  TargetCharPropInputs,\n  number\n> {\n  derive(inputs: TargetCharPropInputs) {\n    return inputs.selectionInfo.endChangedMostRecently\n      ? inputs.selectionInfo.selectionEnd\n      : inputs.selectionInfo.selectionStart;\n  }\n}\n\ninterface LeafTokensPropInputs {\n  algWithIssues: AlgWithIssues;\n}\nclass LeafTokensProp extends TwistyPropDerived<\n  LeafTokensPropInputs,\n  OrderedLeafTokens\n> {\n  derive(inputs: LeafTokensPropInputs): OrderedLeafTokens {\n    return leafTokens(inputs.algWithIssues.alg as Parsed<Alg>, {\n      numMovesSofar: 0,\n    }).tokens;\n  }\n}\n\ninterface LeafToHighlightPropInputs {\n  targetChar: number;\n  leafTokens: OrderedLeafTokens;\n}\ntype HighlightWhere = \"before\" | \"start\" | \"inside\" | \"end\" | \"after\";\nexport interface HighlightInfo {\n  leafInfo: AnimatedLeafUnitInfo;\n  where: HighlightWhere;\n}\nclass LeafToHighlightProp extends TwistyPropDerived<\n  LeafToHighlightPropInputs,\n  HighlightInfo | null\n> {\n  derive(inputs: LeafToHighlightPropInputs): HighlightInfo | null {\n    function withWhere(\n      leafInfo: AnimatedLeafUnitInfo | null,\n    ): HighlightInfo | null {\n      if (leafInfo === null) {\n        return null;\n      }\n      let where: HighlightWhere;\n      if (inputs.targetChar < leafInfo.leaf.startCharIndex) {\n        where = \"before\";\n      } else if (inputs.targetChar === leafInfo.leaf.startCharIndex) {\n        where = \"start\";\n      } else if (inputs.targetChar < leafInfo.leaf.endCharIndex) {\n        where = \"inside\";\n      } else if (inputs.targetChar === leafInfo.leaf.endCharIndex) {\n        where = \"end\";\n      } else {\n        where = \"after\";\n      }\n      return {\n        leafInfo,\n        where,\n      };\n    }\n\n    let lastLeafInfo: AnimatedLeafUnitInfo | null = null;\n    // TODO: binary search\n    for (const leafInfo of inputs.leafTokens) {\n      if (\n        inputs.targetChar < leafInfo.leaf.startCharIndex &&\n        lastLeafInfo !== null\n      ) {\n        return withWhere(lastLeafInfo);\n      }\n      if (inputs.targetChar <= leafInfo.leaf.endCharIndex) {\n        return withWhere(leafInfo);\n      }\n      lastLeafInfo = leafInfo;\n    }\n\n    return withWhere(lastLeafInfo);\n  }\n}\n\nexport class TwistyAlgEditorModel {\n  valueProp = new TwistyAlgEditorValueProp();\n  selectionProp = new TwistyAlgEditorSelectionProp();\n  targetCharProp = new TargetCharProp({ selectionInfo: this.selectionProp });\n\n  algEditorAlgWithIssues = new AlgEditorAlgWithIssuesProp({\n    value: this.valueProp,\n  });\n\n  leafTokensProp = new LeafTokensProp({\n    algWithIssues: this.algEditorAlgWithIssues,\n  });\n\n  leafToHighlight = new LeafToHighlightProp({\n    leafTokens: this.leafTokensProp,\n    targetChar: this.targetCharProp,\n  });\n}\n","import { CSSSource } from \"../ManagedCustomElement\";\n\nexport const twistyAlgEditorCSS = new CSSSource(`\n:host {\n  width: 384px;\n  display: grid;\n}\n\n.wrapper {\n  /*overflow: hidden;\n  resize: horizontal;*/\n\n  background: var(--background, none);\n  display: grid;\n}\n\ntextarea, .carbon-copy {\n  grid-area: 1 / 1 / 2 / 2;\n\n  width: 100%;\n  font-family: sans-serif;\n  line-height: 1.2em;\n\n  font-size: var(--font-size, inherit);\n  font-family: var(--font-family, sans-serif);\n\n  box-sizing: border-box;\n\n  padding: var(--padding, 0.5em);\n  /* Prevent horizontal growth. */\n  overflow-x: hidden;\n}\n\ntextarea {\n  resize: none;\n  background: none;\n  z-index: 2;\n  overflow: hidden;\n  border: 1px solid var(--border-color, rgba(0, 0, 0, 0.25));\n}\n\n.carbon-copy {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  color: transparent;\n  user-select: none;\n  pointer-events: none;\n\n  z-index: 1;\n}\n\n.carbon-copy .highlight {\n  background: var(--highlight-color, rgba(255, 128, 0, 0.5));\n  padding: 0.1em 0.2em;\n  margin: -0.1em -0.2em;\n  border-radius: 0.2em;\n}\n\n.wrapper.issue-warning textarea,\n.wrapper.valid-for-puzzle-warning textarea {\n  outline: none;\n  border: 1px solid rgba(200, 200, 0, 0.5);\n  background: rgba(255, 255, 0, 0.1);\n}\n\n.wrapper.issue-error textarea,\n.wrapper.valid-for-puzzle-error textarea {\n  outline: none;\n  border: 1px solid red;\n  background: rgba(255, 0, 0, 0.1);\n}\n`);\n","import { CSSSource } from \"../ManagedCustomElement\";\n\nexport const twizzleLinkCSS = new CSSSource(`\n.wrapper {\n  background: rgb(255, 245, 235);\n  display: grid;\n  grid-template-columns: 1fr;\n  border: 1px solid rgba(0, 0, 0, 0.25);\n}\n\n.setup-alg, twisty-alg-viewer {\n  padding: 0.5em 1em;\n}\n\n.heading {\n  background: rgba(255, 230, 210, 1);\n  font-weight: bold;\n  padding: 0.25em 0.5em;\n}\n\n.heading.title {\n  background: rgb(255, 245, 235);\n  font-size: 150%;\n  white-space: pre;\n}\n\ntwisty-player {\n  width: 100%;\n  resize: vertical;\n  overflow-y: hidden;\n}\n\ntwisty-player + .heading {\n  padding-top: 0.5em;\n}\n`);\n","import { EXPERIMENTAL_PROP_NO_VALUE } from \"../../../../cubing/twisty\";\nimport type {\n  AlgProp,\n  AlgWithIssues,\n} from \"../../../../cubing/twisty/model/props/puzzle/state/AlgProp\";\nimport type { TwistyPlayerModel } from \"../../../../cubing/twisty/model/TwistyPlayerModel\";\nimport type { TwistyPropSource } from \"../../../../cubing/twisty/model/props/TwistyProp\";\nimport {\n  TwistyPlayerAttribute,\n  twistyPlayerAttributeMap,\n  TwistyPlayerConfig,\n} from \"../../../../cubing/twisty/views/TwistyPlayer\";\n\nfunction updateURL(url: URL): void {\n  window.history.replaceState(\"\", \"\", url.toString());\n}\n\n// TODO: Find a way to connect this to the `TwistyPlayer` constructor?\n\nexport type URLParamUpdaterOptions = {\n  prefix?: string;\n};\n\nexport class URLParamUpdater {\n  #prefix: string;\n  constructor(model: TwistyPlayerModel, options?: URLParamUpdaterOptions) {\n    this.#prefix = options?.prefix ?? \"\";\n\n    this.listenToAlgProp(model.alg, \"alg\");\n    this.listenToAlgProp(model.setupAlg, \"setup-alg\");\n    this.listenToStringSourceProp(model.stickering, \"stickering\");\n    this.listenToStringSourceProp(model.setupAnchor, \"setup-anchor\");\n    this.listenToStringOrNoValueProp(\n      model.puzzleIDRequest,\n      \"puzzle\",\n      EXPERIMENTAL_PROP_NO_VALUE,\n    );\n    this.listenToStringOrNoValueProp(\n      model.puzzleDescriptionRequest,\n      \"puzzle-description\",\n      EXPERIMENTAL_PROP_NO_VALUE,\n    );\n  }\n\n  // TODO: Cache parsed URL?\n  setURLParam(\n    unprefixedKey: string,\n    value: string,\n    defaultString: string,\n  ): void {\n    const prefixedKey = this.#prefix + unprefixedKey;\n    const url = new URL(location.href);\n    if (value === defaultString) {\n      url.searchParams.delete(prefixedKey);\n    } else {\n      url.searchParams.set(prefixedKey, value);\n    }\n    updateURL(url);\n  }\n\n  async listenToStringSourceProp(\n    prop: TwistyPropSource<string>,\n    key: string,\n    defaultString?: string,\n  ): Promise<void> {\n    const actualDefaultString = defaultString ?? (await prop.getDefaultValue());\n    prop.addFreshListener((s: string) => {\n      this.setURLParam(key, s, actualDefaultString);\n    });\n  }\n\n  async listenToStringOrNoValueProp(\n    prop: TwistyPropSource<string | typeof EXPERIMENTAL_PROP_NO_VALUE>,\n    key: string,\n    defaultString: string | typeof EXPERIMENTAL_PROP_NO_VALUE,\n  ): Promise<void> {\n    prop.addFreshListener((s: string | typeof EXPERIMENTAL_PROP_NO_VALUE) => {\n      if (s === EXPERIMENTAL_PROP_NO_VALUE) {\n        s = defaultString;\n      }\n      if (s === EXPERIMENTAL_PROP_NO_VALUE) {\n        this.setURLParam(key, \"\", \"\");\n      } else {\n        this.setURLParam(key, s, \"\"); // TODO\n      }\n    });\n  }\n\n  listenToAlgProp(prop: AlgProp, key: string): void {\n    prop.addFreshListener((algWithIssues: AlgWithIssues) => {\n      this.setURLParam(key, algWithIssues.alg.toString(), \"\");\n    });\n  }\n}\n\nexport function getConfigFromURL(\n  prefix = \"\",\n  url: string = location.href,\n): TwistyPlayerConfig {\n  // TODO: Why does `Object.entries(paramMapping)` crash if this is defined elswhere?\n  const paramMapping: Record<string, TwistyPlayerAttribute> = {\n    \"alg\": \"alg\",\n    \"setup-alg\": \"experimental-setup-alg\",\n    \"setup-anchor\": \"experimental-setup-anchor\",\n    \"puzzle\": \"puzzle\",\n    \"stickering\": \"experimental-stickering\",\n    \"puzzle-description\": \"experimental-puzzle-description\",\n    \"title\": \"experimental-title\",\n    \"video-url\": \"experimental-video-url\",\n    \"competition\": \"experimental-competition-id\",\n  };\n\n  const params = new URL(url).searchParams;\n  const config: TwistyPlayerConfig = {};\n  for (const [ourParam, twistyPlayerParam] of Object.entries(paramMapping)) {\n    const paramValue = params.get(prefix + ourParam);\n    if (paramValue !== null) {\n      // TODO: type\n      const configKey = twistyPlayerAttributeMap[twistyPlayerParam];\n      (config as any)[configKey] = paramValue;\n    }\n  }\n  return config;\n}\n\nexport function remapLegacyURLParams(\n  mapping: Record<string, string | null>,\n): void {\n  const url = new URL(location.href);\n  for (const [oldKey, newKey] of Object.entries(mapping)) {\n    // `null` indicates there is no new key, i.e. just drop the old key\n    if (newKey !== null) {\n      // The new key takes precedents, so we only remap the old key if the new key\n      // is not already set.\n      if (!url.searchParams.has(newKey)) {\n        const value = url.searchParams.get(oldKey);\n        if (value !== null) {\n          url.searchParams.set(newKey, value);\n        }\n      }\n    }\n    url.searchParams.delete(oldKey);\n  }\n  updateURL(url);\n}\n","import { TwistyPlayer } from \"../..\";\nimport { Alg } from \"../../../alg\";\nimport { puzzles } from \"../../../puzzles\";\nimport { ManagedCustomElement } from \"../ManagedCustomElement\";\nimport { customElementsShim } from \"../node-custom-element-shims\";\nimport { TwistyAlgViewer } from \"../TwistyAlgViewer\";\nimport { twizzleLinkCSS } from \"./TwizzleLink.css\";\nimport { getConfigFromURL } from \"./url-params\";\n\nexport class TwizzleLink extends ManagedCustomElement {\n  twistyPlayer: TwistyPlayer | null = null;\n  a: HTMLAnchorElement | null = null;\n  constructor() {\n    super({ mode: \"open\" });\n  }\n\n  fallback() {\n    this.contentWrapper.textContent = \"\";\n    if (this.a) {\n      const span = this.contentWrapper.appendChild(\n        document.createElement(\"span\"),\n      );\n      span.textContent = \"❗️\";\n      span.title = \"Could not show a player for link\";\n      this.addElement(this.a);\n    }\n    if (this.#cssElem) {\n      this.#cssElem.remove();\n    }\n  }\n\n  #cssElem: HTMLStyleElement | undefined;\n  async connectedCallback() {\n    this.#cssElem = this.addCSS(twizzleLinkCSS);\n    this.a = this.querySelector(\"a\");\n    if (!this.a) {\n      return;\n    }\n\n    const config = getConfigFromURL(\"\", this.a.href);\n\n    const href = this.a?.href;\n    const { hostname, pathname } = new URL(href);\n\n    if (hostname !== \"alpha.twizzle.net\") {\n      this.fallback();\n      return;\n    }\n    if ([\"/edit/\", \"/explore/\"].includes(pathname)) {\n      const isExplorer = pathname === \"/explore/\";\n\n      if (config.puzzle && !(config.puzzle in puzzles)) {\n        const puzzleDescription = (\n          await import(\"../../../puzzle-geometry\")\n        ).getPuzzleDescriptionString(config.puzzle);\n        delete config.puzzle;\n        config.experimentalPuzzleDescription = puzzleDescription;\n      }\n\n      this.twistyPlayer = this.addElement(\n        new TwistyPlayer({\n          ...config,\n          viewerLink: isExplorer ? \"experimental-twizzle-explorer\" : \"auto\",\n        }),\n      );\n\n      if (config.experimentalTitle) {\n        this.addHeading(config.experimentalTitle).classList.add(\"title\");\n        // const setupAlgDiv = this.addElement(document.createElement(\"div\"));\n        // setupAlgDiv.classList.add(\"setup-alg\");\n        // setupAlgDiv.textContent = puzzles[config.puzzle ?? \"3x3x3\"].fullName;\n      }\n\n      if (config.experimentalSetupAlg) {\n        this.addHeading(\"Setup\");\n\n        const setupAlgDiv = this.addElement(document.createElement(\"div\"));\n        setupAlgDiv.classList.add(\"setup-alg\");\n        setupAlgDiv.textContent = new Alg(\n          config.experimentalSetupAlg,\n        ).toString();\n      }\n      this.addHeading(\"Moves\");\n      const twistyAlgViewer = this.addElement(\n        new TwistyAlgViewer({ twistyPlayer: this.twistyPlayer }),\n      );\n      twistyAlgViewer.part.add(\"twisty-alg-viewer\");\n    } else {\n      this.fallback();\n    }\n  }\n\n  addHeading(text: string): HTMLElement {\n    const headingDiv = this.addElement(document.createElement(\"div\"));\n    headingDiv.classList.add(\"heading\");\n    headingDiv.textContent = text;\n    return headingDiv;\n  }\n}\n\ncustomElementsShim.define(\"twizzle-link\", TwizzleLink);\n","{\n  \"UF\": [\n    {\n      \"comm\": \"[R2 U' : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L2' U : [S' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[U' M U' : [M' , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' : [R' E R , U2]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U : [L' E' L , U2']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U' : [R E' R' , U2]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R' U' : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[R' F' : [R U R' , E]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[L U : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U M U : [M' , U2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[U : [L' E L , U2']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' : [R E R' , U2]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U : [L E' L' , U2']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[L' U' : [L2 , S']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' R' B R : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R U : [R2' , S]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U2 , M']\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M , U2]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R2 U' : [R2' , S]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[M2' U : [M , U2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[S' , L F' L']\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' , R' E R]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U : [L' E' L , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U' , R E' R']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[E' : [U' , R' E R]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[r : [U' R' U , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U' , R E2 R']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U : [L' E L , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' , R E R']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U : [L E' L' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[r' : [U' R U , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' , R' E2 R]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"(U M U M')2\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[u' : [R E' R' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[L F : [L' S' L , F2']]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R' U R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[r M' : [U' R' U , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"U' L' U' L U L U L U' L'\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[L2' U : [L2 , S']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[M2' U' : [M , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' : [R' E R , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U , L' E' L]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U' : [R E' R' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[U , L' E2' L]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[l' : [U L U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U' : [R E2 R' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[S , R' F R]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[U , L' E L]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' : [R E R' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U , L E' L']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[L : [M , U L' U']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' : [R E2 R' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"(U' M U' M')2\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U , L E2' L']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R' F' : [R S R' , F2]]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"U R U R' U' R' U' R' U R\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[l' M' : [U L U' , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[L U' L : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U' M U : [M' , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[L F' L' , S']\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[S : [U' , R' E R]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[l' U L' : [S' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[S : [U' , R E' R']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[M' : [U' , R S' R']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[l' : [M' , U' L U]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[L' U2 : [L S L' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[M U : [M' , U2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[L' F' : [E , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R' F R : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R M U : [M' , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[L' : [U' L U , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' R F : [R2' , E']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[M' : (U M' U M)2]\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[M' : [U' , L' E L]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[L' F' : [L2 , E']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[L2 : [L' F' L , S]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[L' M : [U' L U , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[L F' L' , S]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U : [R' E R , U2]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R' E R , U']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U2 : [R' E R , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[S : [R' E R , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[L , U S' U']\",\n      \"type\": \"S-Insert\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[M' U L : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[E , R U' R']\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[M2' : [U' L' U , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[M L' U : [M' , U2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[r U R' : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[M' U R' : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U E R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U' L' U , M']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[E' , L U L']\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' r' : [R U R' , E]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R2' : [E , R U' R']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U R' F2 : [R S R' , F]]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' E' R : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M : [U' L' U , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U E L : [E' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U' : [L' E' L , U2']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[U2' : [L' E' L , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L' E' L , U]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[l' U L : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U S' U' , L]\",\n      \"type\": \"S-Insert\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U S U' , L']\",\n      \"type\": \"S-Insert\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[L' E' : [L U L' , E']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[U : [L F L' , S]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[L f' L' : [S , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[L F' L : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[L F' : [E , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R' F R' : [S' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[M' U' L' : [E' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[L' : [U' L' U , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[S' U' R' : [E' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U l : [L' U' L , E]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[L E : [L' U L , E]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[L F' : [L2' , E']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[L' F' L , S]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U : [S' , L B' L']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U : [R E' R' , U2]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R E' R' , U']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U2 : [R E' R' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[S : [R E' R' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[M' U L' : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[L' , U S' U']\",\n      \"type\": \"S-Insert\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R2 : [E' , R' U' R]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[M' : [M' , U' L U]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[E , L' U L]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R F : [R2' , E']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[u' L : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R' F : [R2 , E']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[l' U' L' : [E' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U' L U , M']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' M : [U , L S L']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[E' , R' U' R]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[l' U : [S' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[u' R' : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M : [U' L U , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[u L' : [E , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R' U : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[E' : [R' E R , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L' E2' L , U]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[M' : [R S' R' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R U' R' , E]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[L' E2' : [L U L' , E]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R2 : [R' U' R , E']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[M' , U' R U]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[R' U' R : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R U : [R' S' R , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[R U' R' , E']\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R' f R' : [S' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[M , U' R U]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[R' U' R' : [E' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U2 : [M , U R U']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[D' U L : [E' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"U R' U' R' U R U R U R' U2\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M2' , U' R U]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U L : [E' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"J\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R' F' : [E , R U R']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R : [U' R' U , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L' : [U L U' , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[l' : [U' L U , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[M' : [U' L' U , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U : [S , L F L']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[M' : [U' L U , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[U' R U , M']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[U L' U' , M']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[r : [U R' U' , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[M' : [U R' U' , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' : [S' , R' F' R]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[M' : [U R U' , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U' : [S , R' F' R]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U L U' , M']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"U M' U' M U2 M U M' U\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U' R' U , M']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U R' F' R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[D : [R F R' , S']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U' L F L : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[L U' : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R E2 R' , U']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U2 : [R E2 R' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[L' U' : [L S L' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[L f' L : [S , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[L' U L , E]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R' U' R' : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[M' , U L' U']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[M' : [L' S L , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[L' : [U , L' E L]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R E2 : [R' U' R , E']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[L' U L , E']\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[M , U L' U']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' L : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' R' B : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R U' R' : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U' D R' : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' R' : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M2' , U L' U']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"U' L U L U' L' U' L' U' L U2'\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U M U' : [M , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R' F R , S]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[M U' : [M' , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[M L' U' : [M' , U2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[L F' L' : [S' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R F : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R U2' : [R' S' R , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[r : [M' , U R' U']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[M' : [U , L' S L]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[S' : [U , L' E L]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[r U' R : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[S' : [U , L E' L']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R : [U R' U' , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[M' : [U , R E' R']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[M' : (U' M' U' M)2]\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U L' F' : [L2 , E]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R F : [R2' , E]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R' F R , S']\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R M : [U R' U' , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R2' : [R F R' , S']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"M\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U' : [L' E L , U2']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[U2' : [L' E L , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L' E L , U]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[L' F' : [E , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[r U R : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[L F' : [L2' , E]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[u R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[E' , R U' R']\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[M2' : [U R' U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[L2' : [E , L U' L']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[S' : [L' E L , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[R , U' S U]\",\n      \"type\": \"S-Insert\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[M' U' R : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U R' U' , M']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[E , L U L']\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U M : [U' , l' E l]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[r U' : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[u' R : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M : [U R' U' , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[u L : [E' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U : [R E R' , U2]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R E R' , U']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U2 : [R E R' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[R' F R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[M' U R : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[L F' L : [S , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R' F : [E' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R' f R : [S' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[U' : [R' F' R , S']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[R E : [R' U' R , E]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[r U' R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[U' S U , R]\",\n      \"type\": \"S-Insert\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' S U , R']\",\n      \"type\": \"S-Insert\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R : [U R U' , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[R' E' : [R U' R' , E']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' r' : [R U R' , E']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[S U L : [E , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R' F : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' : [S , R' B R]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R F R' , S']\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U' : [L E' L' , U2']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[U2' : [L E' L' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L E' L' , U]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[R M U' : [M' , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' E' L : [S' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[M' U' L : [E' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[l' U' L : [E' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[M2' : [U R U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[E' , L' U L]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[S' : [L E' L' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[M' U' R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R' , U' S U]\",\n      \"type\": \"S-Insert\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U R U' , M']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[L2 : [E' , L' U L]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U l : [L' U' L , E']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[E , R' U' R]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U' L F2' : [L' S' L , F']]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' E' R' : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M : [U R U' , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U E L' : [E , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R' : [U' R U , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L : [U L' U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[l' : [U' L U , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[M' , U' L' U]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[l' : [U' L' U , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[M' , U' L U]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[U' R U , M]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[U' : [R' F' R , S]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U L' U' , M]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[r : [U R' U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[M' , U R' U']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[r : [U R U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[M' , U R U']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U L U' , M]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' : [R B R' , S]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U' R' U , M]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U : [S , R' F' R]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R' : [U' R' U , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U : [S , R B R']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[L : [U L U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[L' U : [L2 , S']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R' E2 R , U']\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U2 : [R' E2 R , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[U' R F : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[L U L' , E']\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[S' U' R : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R' U' R : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[M' , U L U']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U' L' : [S' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[M' : [R E' R' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[L U L' , E]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R' E2 : [R U' R' , E]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[L2 : [L' U L , E']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[M , U L U']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U2' : [M , U' L U]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R U' R : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[D U' R : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' R : [E' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M2 , U L U']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"U' L' U' L' U L U L U L'\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U R' B R : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"(M U' M' U')2\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"(M U M' U)2\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[M2' : (U' M U' M')2]\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' r' : [E , R U R']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U l : [E , L' U' L]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U' M : [L S L' , U]]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[U2' : [U R U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"U M U M' U2 M' U' M U\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U' R' B : [R2 , E]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[M2' : (U M U M')2]\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[U M : [R' S' R , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' r' : [E' , R U R']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U l : [E' , L' U' L]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U' : [S , R B R']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U2 : [U' L U , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U2' : [U R' U' , M]]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[D' : [R F R' , S']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U L B' L' : [S , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U' R' B R : [S' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R U' : [R2' , S]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[E : [R E' R' , U']]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L E2' L' , U]\",\n      \"type\": \"U-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[l' : [E , L U' L']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R2' : [R U' R' , E]]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[L E2' : [L' U L , E']]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R' U' R , E']\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[U R : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[M' , U' R' U]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[R U' R : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R u' R' : [E' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[S U L' : [E , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R' U' R , E]\",\n      \"type\": \"E-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[M , U' R' U]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[R U' R' : [E' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U2 : [M , U R' U']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U R' U : [M' , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"U R U R U' R' U' R' U' R\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[M2' , U' R' U]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U L' : [E , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[M' , U2]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[L F' : [L' S' L , F2']]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[R' F : [R S R' , F2]]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[L' F' : [E' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U R' F' : [R S R' , F']]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[L F' : [E' , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[l' U : [L2 , S']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[U R U' : [M' , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[U' D R : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R F : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[r U' : [R2' , S]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R' F : [E , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U' L F : [L' S' L , F]]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U : [R' F' R , S]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' L U : [M' , U2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D' : [S' , R F R']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U R' U' : [M' , U2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R' F : [R S' R' , F2]]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"u2 M' u2 M'\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[L F' : [L' S L , F2']]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R U R' : [S , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"R' U' R U R U R U R U' R' U'\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[L2 : [S , L' F' L]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' E' R' : [E' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[S , L' F' L]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[u' R : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"U2 R U' R' U' R' U' R U R U'\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[U R' F' R : [S , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U' R : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[S' , R' F R]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[u' R' : [E' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' E' R : [E , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[r' : [U' R' U , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' R' : [E' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U L B' L : [S , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"R' U R U R U R' U' R' U'\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R' F' : [R S' R' , F2]]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D' R' F : [R S' R' , F2]]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U' : [S' , R2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U2 , M]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R : [U' R' U , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[l' M' : [U L U' , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[l' : [U' L U , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[M' : [U' L' U , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U : [L B' L' , S']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[M' : [U' L U , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[U' R U , M2']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[D : [S' , R F R']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U L' U' , M2']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[r : [U R' U' , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[M' : [U R' U' , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' : [R' B R , S]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[M' : [U R U' , M2']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U : [R B R' , S]]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U L U' , M2']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' R' U , M2']\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"M' U2 M' U2 M2'\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D' R' F' : [R S' R' , F2]]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[D L F : [L' S L , F2']]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U' : [S' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"L U L' U' L' U' L' U L U\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[L' U' L : [S' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[S , L F' L']\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U E L' : [E' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[u L : [E , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[U L' : [E' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"J\"\n    },\n    {\n      \"comm\": \"[U' L F L' : [S' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"U2' L' U L U L U L' U' L' U\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R2' : [S' , R F R']]\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"M\"\n    },\n    {\n      \"comm\": \"[u L' : [E' , L2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[S' , R F R']\",\n      \"type\": \"S-Swap\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U E L : [E , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[l : [U L U' , M']]\",\n      \"type\": \"M-Swap\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"L U' L' U' L' U' L U L U\",\n      \"type\": \"Alg\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' R' B R' : [S' , R2]]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U L : [E , L2']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[L F : [L' S L , F2']]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' : [R2' , S']]\",\n      \"type\": \"4-Mover\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[D L F' : [L' S L , F2']]\",\n      \"type\": \"F-Swap\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"W\"\n    }\n  ],\n  \"UFR\": [\n    {\n      \"comm\": \"[R' B' R : [R D R' , U']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[R' D R U2 : [R' D' R , U]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[F : [U2 , F' R F R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[R' D R , U2]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U' : [R D' R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[r D' U : [R D R' , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[D U' : [R D R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D : [R' D' R , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R' U D R2 : [U' , R' D' R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' : [R D R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R' D' R , U2]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R' U D : [R D R' , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[D' U' : [R D R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D U' : [R D' R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R F' R' U' : [R D R' , U2]]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R' D R U' R D' R' , U2]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R D' R' : [R' D R , U2]]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R' U' D' R : [R U' R' , D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"A\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R' B' R : [U' , R D R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R F' R' : [R' D R, U]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[R : [U , R D R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R2 : [D' , R U' R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[R' D R , U]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U' , R D' R']\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R2 U' : [D' , R U R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[D' : [R' D R , U]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D : [R' D' R , U]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U' , R D R']\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R' D' R , U]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R2 U : [R' U' R , D]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D' : [U' , R D R']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D : [U' , R D' R']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R F' : [R' U' R , D]]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R' D R U' R D' R' , U]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U' , R D' R' U R' D R]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R' B : [D' , R U R']]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"B\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R' D R U' : [R' D' R , U']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R F' R' : [U , R' D R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' R2 : [D , R' U2 R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R' D R , U']\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U' : [R D' R' , U']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[D' : [R' D R , U']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D : [R' D' R , U']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U' R' : [U2 , R' D' R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' : [R D R' , U']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R' D' R , U']\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R' D' : [U' , R' D R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' R' : [U' , R' D' R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D : [R' D R , U']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D' : [R' D' R , U']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R' U' R : [F2' , R' U R U']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R' D R U' R D' R' , U']\",\n      \"type\": \"Special\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R D' R' : [R' D R , U']]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R' D' R : [R U' R' , D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"D\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R2 : [D , R' U R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' R : [U2 , R D R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[U' R' F : [D , R U R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U R' : [U' , R' D R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R D' : [R D R' , U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[l' U : [R D' R' , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[U D' R' : [U' , R' D R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[R U : [R' D R , U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R' D R2 D' R2' : [U , R2 D R2' D' R2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' R : [R U' R' , D']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U R' U2 : [R D R' , U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R' , F' L F]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U D R' : [U' , R' D R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R U : [R' D' R , U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[D' R : [R D' R' , U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U R' D' : [U' , R' D' R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[D R : [R D' R', U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R : [R D' R' , U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"E\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[F : [R' D' R , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R' : [U' , R' D' R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' R' U , L]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R' U' : [D , R U R']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U' R U' : [D' , R' U R]]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R : [F , R' U R U']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D R' U' : [D' , R U R']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R U' D' R' : [D , R' U R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[D' R : [F , R' U R U']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R' U' : [D' , R U R']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R' F : [R U R' , D]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[l U' l' , F]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[l U2 l' , F]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D' R' U' : [D' , R U R']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U' R' U : [R U' R' , D]]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' D' R' U : [R U' R' , D]]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R U' R' : [D , R' U R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U' D R' U : [R U' R' , D]]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"F\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U2 , R' D R]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[U , R' D R]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' , R' D R]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[U R' : [R' D R , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R' U' : [R U R' , D]]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[D R' : [F' , R D' R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[D R' : [F2 , R D' R' D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[U : [D , R U' R']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U R U : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U D : [R U' R' , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U R' D : [R U' R' , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R' U : [R U' R' , D]]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[R B' R' : [R' D R , U]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U D : [R U' R' , D]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R' D R : [D' , R U R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U D R D' : [U' , R' D R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U R : [D , R U' R']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[D U R U' : [F2' , U R' U' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"G\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U : [R D' R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R D' R' , U']\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U2 : [R D' R' , U]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[R D' : [U , R D R']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' R U' : [R' U R , D']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[R' D : [F' , D' R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R U' D : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[l' U : [D , R U' R']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D2 : [R U R' , D']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U R : [R D' R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R D' : [R' U' R , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[D2 , R U R']\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U' L U , R]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U D R' F' : [D , R U' R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D2 : [R U R' , D]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[D R U' R' : [R' D R , U2]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R U' D R' : [R' D R , U2]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R D' R' : [R' D R , U]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"H\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R' D R U' R : [F , R' U R U']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R2 U' : [R U R' , D']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[l' U' : [R D' R' , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R' D : [F2 , D' R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R U D : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[D' R' D : [F2 , D' R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[R U : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R' F' R D U : [U2 , R' D' R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R D' U : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[D R U : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R U D' : [R' D' R , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[R U R' U D : [R D R' , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D R' D : [F2 , D' R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R U : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[D' R : [R D' R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R U' R' D' : [R' D R , U2]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[D R : [R D' R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R : [R D' R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"I\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U D : [R D R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[D' : [U , R' D R]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[D' : [U' , R' D R]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[D' U R' : [R' D R , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U R U' : [F , U R' U' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U : [R U' R' , D]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[l' U : [R U' R' , D]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R' : [F2 , R D' R' D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[R' : [F' , R D' R' D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U' R' U : [R D R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U : [R U' R' , D']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[D' R' U : [R U' R' , D]]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' R' U2 : [R D R' , U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U : [R U' R' , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R U R' U' : [D' , R U R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U R U' : [F2' , U R' U' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U R' D' : [U' , R' D R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R' D' R : [R U R' , D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"K\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[D' U : [R D' R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[D : [U , R' D' R]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[D : [U' , R' D' R]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[R U2 : [R' D R , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[D R' U' : [R U R' , D']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[D : [R U R' , D]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R U' : [R' D R , U U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[D' R' D : [F' , D' R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U R U D : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R D2 : [R' U' R , D']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[D , R U R']\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R' F : [R U' R' , D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[D R' : [D , R' U R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D' R D' : [R' U' R , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D : [R U R' , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R U' R' : [R' D R , U2]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[D R : [R D' R' , U']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[D R D : [U , R' D' R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"L\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R' U D R : [D' , R U' R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[U' R2' : [D' , R U2 R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[R : [U , R2 D R2 D' R2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R U' D' R' : [R' U R , D]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U R U' : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U R : [U2 , R D' R']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R' F' R D U : [R' D' R , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[U' R' U' : [R D R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U R U' D : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U R U' : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U' R' D U' : [R D' R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U R2 U' : [D' , R U R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' R' U' : [R D' R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R' F' R D' U : [R' D R , U2]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U' R' : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D' U' R' : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U R U' D' : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[D U' R' : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"N\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U : [R D R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R D R' , U']\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U2 : [R D R' , U]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[U' R' F R : [R D R' , U']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[D' R : [R' U R U' , F]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U D' : [R U' R' , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R D : [R' U' R , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R D' U' : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[U : [D' , R U' R']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[R D : [R' U' R , D]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U R U : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R D' : [R' D R , U]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U' R U : [R' U' R , D]]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[R B' : [R' U' R , D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' : [R' U' R , D']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U' R' : [R' D R , U]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D' U R U' : [F2 , U R' U' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U D' R D' : [U' , R' D R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"O\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U2 , R' D' R]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[U , R' D' R]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' , R' D' R]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[U R' U' : [R D R' , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R' U' : [R U R' , D']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U R' D' : [R U' R' , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R U R' , D2]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[D R U' : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[R U R' , D]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U' R' D U : [R D' R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R D' : [U , R' D R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R' U : [R U' R' , D']]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[R' : [D , R' U R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U R' D' : [R U' R' , D']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R U R' , D']\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R D : [U , R' D' R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D' R U' R' : [R' D R , U2]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R : [R D' R' , U']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"P\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R' U' D : [R D R' , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R' D' : [R' D R , U']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[F' L F , R']\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R' F : [D , R U R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[R' U : [D , R U' R']]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R , U' L U]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R D' U' : [R' D' R , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[D' R' U : [D , R U' R']]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[R' F : [D , R U' R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U' R U : [D , R' U' R]]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R' U : [D' , R U' R']]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R , U' L' U]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D R' U : [D , R U' R']]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[R U' : [R' U R , D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[D' R U' : [R' U R , D']]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U R' U' : [R U R' , D']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[D R U' : [R' U R , D']]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R U' : [R' U R , D']]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"Q\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R2 U : [D , R' U' R]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' R2' : [D' , R U' R']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[F , l U' l']\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[R B' R' : [U , R' D R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[U D R' F' : [R U' R' , D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R U R' D' : [R' D R , U2]]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[U' R' U' : [R D R' , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D R' : [R' U R , D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U R2 U' : [R U R' , D']]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[R B' : [D , R' U' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R2' : [U , R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[U' L' U , R]\",\n      \"type\": \"U-Any / U-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' R' U' : [R D' R' , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D' R2' : [U , R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U' R' : [R' D R , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D' U' R' : [R' D R , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U R : [D' , R U' R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R2 U : [D' , R' U' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"R\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U D' : [R D R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[D' : [R D R' , U']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[D : [U' , R' D R]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[D U R' : [R' D R , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[F , l U2 l']\",\n      \"type\": \"Special\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U D2 : [R U' R' , D']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[D R' D : [F2 , D' R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[U : [D2 , R U' R']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D' R D : [R' U' R , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U' R' U : [R D' R' , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' : [D' , R' U' R]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U R' D' : [D' , R U' R']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[D R' U : [R U' R' , D]]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' R' U2 : [R D' R' , U]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D2' R' : [F' , R D' R' D]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U' D' R' D' : [U' , R D R']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' D' R' : [R' D R , U]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[U R : [D2 , R U' R']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"S\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[U D : [R D' R' , U2]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[D : [R D' R' , U']]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[D' : [U' , R' D' R]]\",\n      \"type\": \"U-Top / D-Side\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[R U2 : [R' D' R , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[D' R' U' : [R U R' , D']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[R' D R2 : [U , R' D' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[D' : [R U R' , D']]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R U' : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[R U R' U' : [R U R' , D']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D' : [R U R' , D2]]\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[R' F' R D' U' : [R' D R , U2]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[D' , R U R']\",\n      \"type\": \"D-Side / D-Side\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R U' : [D , R' U R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[D' R' : [D , R' U R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[D R' D : [F' , D' R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D' R : [R D' R' , U']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D' R D : [U , R' D' R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R U' D : [R' U R , D2]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"T\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R F' R' U : [R D R' , U2]]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R F' : [D , R' U' R]]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' : [F2' , U R' U' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[D' R : [U , R D' R']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' R' U : [D , R U' R']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[D R U' R' : [U2 , R' D R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R D U' : [R' D' R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[R : [F2 , R' U R U']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[U' R' : [U2 , R' D R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U' R' : [U , R' D R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R D : [R' D' R , U]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[D' R U' : [D' , R' U R]]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U' R' : [U' , R' D R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' D' R' D' : [R D R' , U']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D' R : [U' , R D' R']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \" \",\n      \"type\": \" \",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[U' R' U R : [D , R U' R']]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R U' D2 : [R' U R , D]]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"U\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[U2 , R' D R U' R D' R']\",\n      \"type\": \"Special\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[U , R' D R U' R D' R']\",\n      \"type\": \"Special\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[U' , R' D R U' R D' R']\",\n      \"type\": \"Special\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[U R' D' : [R' D' R , U']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' D' R' U : [D , R U' R']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U D R D' : [R' D R , U']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R U' D R' : [U2 , R' D R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[R U' R' U D : [R D R' , U2]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[R U' R' : [U2 , R' D R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U' D' R' : [U2 , R' D R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[D' R : [F2 , R' U R U']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[U R' U' : [D' , R U R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[D' U' R' : [U' , R' D R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U' D' R' : [U , R' D R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[D' R D : [R' D' R , U]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[U' R' U R : [R U' R' , D]]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D R U' R' : [R' U R , D']]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"W\"\n    },\n    {\n      \"comm\": \"[R U' R' U : [R D' R' , U2]]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"V\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R D' R' : [U2 , R' D R]]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R D' R' U R' D R , U']\",\n      \"type\": \"Special\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[R D' R' : [U' , R' D R]]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[D R : [U , R D' R']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[R U' R2' : [U , R D R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[U R2 : [U' , R' D R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R D' R' : [U , R' D R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"H\"\n    },\n    {\n      \"comm\": \"[D R : [U2 , R D' R']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[U R D' : [R' D R , U']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D' R2 : [R' U' R , D']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[U R U D' : [R' D R , U2]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[D' R U' R' : [U2 , R' D R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[D R U' : [D' , R' U R]]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[U R2 : [U' , R' D' R]]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[U R2 : [U' , R' D2 R]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"S\"\n    },\n    {\n      \"comm\": \"[U' R2' : [D , R2 U R2' U' R2]]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[D R U' R' : [D' , R' U R]]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R U' R' : [R' U R , D']]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"W\",\n      \"piece_2\": \"X\"\n    },\n    {\n      \"comm\": \"[R' U' D' R : [D , R U' R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"A\"\n    },\n    {\n      \"comm\": \"[R' B : [R U R' , D']]\",\n      \"type\": \"U-Top / D-Bottom\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"B\"\n    },\n    {\n      \"comm\": \"[R' D' R : [D , R U' R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"D\"\n    },\n    {\n      \"comm\": \"[R : [U , R D' R']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"E\"\n    },\n    {\n      \"comm\": \"[U' D R' U : [D , R U' R']]\",\n      \"type\": \"LUF / D-Any\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"F\"\n    },\n    {\n      \"comm\": \"[D R : [F2 , R' U R U']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"G\"\n    },\n    {\n      \"comm\": \"[R2 U : [R' U R , D']]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"I\"\n    },\n    {\n      \"comm\": \"[R' D' R : [D ,R U R']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"K\"\n    },\n    {\n      \"comm\": \"[D R D : [R' D' R , U]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"L\"\n    },\n    {\n      \"comm\": \"[D U' R' : [U2 , R' D R]]\",\n      \"type\": \"U-Side / D-Any\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"N\"\n    },\n    {\n      \"comm\": \"[U D' R D' : [R' D R , U']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"O\"\n    },\n    {\n      \"comm\": \"[R2 : [R' U' R , D']]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"P\"\n    },\n    {\n      \"comm\": \"[R U' : [D' , R' U R]]\",\n      \"type\": \"BUR / D-Any\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"Q\"\n    },\n    {\n      \"comm\": \"[R2 U : [R' U' R , D']]\",\n      \"type\": \"Special\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"R\"\n    },\n    {\n      \"comm\": \"[R U' D' : [R' U R , D2]]\",\n      \"type\": \"D-Side / D-Bottom\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"T\"\n    },\n    {\n      \"comm\": \"[R U' D' : [R' U R , D']]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"U\"\n    },\n    {\n      \"comm\": \"[R U' R' U' : [R D' R' , U2]]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"V\"\n    },\n    {\n      \"comm\": \"[R U' R' : [D' , R' U R]]\",\n      \"type\": \"D-Bottom / D-Bottom\",\n      \"piece_1\": \"X\",\n      \"piece_2\": \"W\"\n    }\n  ],\n  \"PARITY\": [\n    {\n      \"piece\": \"A (UBL)\",\n      \"comm\": \"R' U2' R' F' R2 U' R' F' U' F R U R' F U2' R\"\n    },\n    {\n      \"piece\": \"B (UBR)\",\n      \"comm\": \"R U R' F' R U R' U' R' F R2 U' R' U'\"\n    },\n    {\n      \"piece\": \"D (UFL)\",\n      \"comm\": \"U L' U' L F L' U' L U L F' L2 U L\"\n    },\n    {\n      \"piece\": \"E (LUB)\",\n      \"comm\": \"[U R' U' : [UBR (B) Parity]]\"\n    },\n    {\n      \"piece\": \"F (LUF)\",\n      \"comm\": \"U2' R' U R U2' R' L' U R U' L\"\n    },\n    {\n      \"piece\": \"G (LDF)\",\n      \"comm\": \"[D U R U' : [UBR (B) Parity]]\"\n    },\n    {\n      \"piece\": \"H (LDB)\",\n      \"comm\": \"[R D' R' : [UBR (B) Parity]]\"\n    },\n    {\n      \"piece\": \"I (FUL)\",\n      \"comm\": \"[L : [DFL (U) Parity]]\"\n    },\n    {\n      \"piece\": \"K (FDR)\",\n      \"comm\": \"[U R U' : [UBR (B) Parity]]\"\n    },\n    {\n      \"piece\": \"L (FDL)\",\n      \"comm\": \"[D : [RDF (P) Parity]]\"\n    },\n    {\n      \"piece\": \"N (RUB)\",\n      \"comm\": \"U x' R' F R F' U L' U L U2' R U' R' U\"\n    },\n    {\n      \"piece\": \"O (RDB)\",\n      \"comm\": \"[D' U R U' : [UBR (B) Parity]]\"\n    },\n    {\n      \"piece\": \"P (RDF)\",\n      \"comm\": \"U2 R' F R2 U' R' U' R U R' F' R U R' U\"\n    },\n    {\n      \"piece\": \"Q (BUR)\",\n      \"comm\": \"U R U' R' U2 L R U' R' U L' U\"\n    },\n    {\n      \"piece\": \"R (BUL)\",\n      \"comm\": \"[L : [UFL (D) Parity]]\"\n    },\n    {\n      \"piece\": \"S (BDL)\",\n      \"comm\": \"[U' L U : [UBR (B) Parity]]\"\n    },\n    {\n      \"piece\": \"T (BDR)\",\n      \"comm\": \"[D' : [RDF (P) Parity]]\"\n    },\n    {\n      \"piece\": \"U (DFL)\",\n      \"comm\": \"U' x U2' R2' F R F' R U2' r' U r x' U\"\n    },\n    {\n      \"piece\": \"V (DFR)\",\n      \"comm\": \"[D U R2 U' : [UBR (B) Parity]]\"\n    },\n    {\n      \"piece\": \"W (DBR)\",\n      \"comm\": \"[U R2 U' : [UBR (B) Parity]]\"\n    },\n    {\n      \"piece\": \"X (DBL)\",\n      \"comm\": \"[D' U R2 U' : [UBR (B) Parity]]\"\n    }\n  ],\n  \"2FLIPS\": [\n    {\n      \"comm\": \"U' S R' F' R S' R' F R U' M' U2 M\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"UB\"\n    },\n    {\n      \"comm\": \"R' F R U' M' U2 M U' S R' F' R S'\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"UR\"\n    },\n    {\n      \"comm\": \"L F' L' U M' U2' M U S' L F L' S\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"UL\"\n    },\n    {\n      \"comm\": \"[R' E R : U'] [R E2 R' : U]\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"LF\"\n    },\n    {\n      \"comm\": \"[R E' R' : U'] [R' E2 R : U]\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"LB\"\n    },\n    {\n      \"comm\": \"[L E' L' : U] [L' E2' L : U']\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"RF\"\n    },\n    {\n      \"comm\": \"[L' E L : U] [L E2' L' : U']\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"RB\"\n    },\n    {\n      \"comm\": \"U [R E R' : U2] [S , R2'] U\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"DR\"\n    },\n    {\n      \"comm\": \"U' [L' E' L : U2'] [S' , L2] U'\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"U2 M' U2 M U' S R' F' R S' R' F R U\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"U2 M U' S R' F' R S' R' F R U' M'\",\n      \"piece_1\": \"UF\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[M : R' F R U' M' U2 M U' S R' F' R S']\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"UR\"\n    },\n    {\n      \"comm\": \"[M : L F' L' U M' U2' M U S' L F L' S]\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"UL\"\n    },\n    {\n      \"comm\": \"[R' E R : U] [R E2 R' : U']\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"LF\"\n    },\n    {\n      \"comm\": \"[R E' R' : U] [R' E2 R : U']\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"LB\"\n    },\n    {\n      \"comm\": \"[L E' L' : U'] [L' E2' L : U]\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"RF\"\n    },\n    {\n      \"comm\": \"[L' E L : U'] [L E2' L' : U]\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"RB\"\n    },\n    {\n      \"comm\": \"U' [R E R' : U2] [S , R2'] U'\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"DR\"\n    },\n    {\n      \"comm\": \"U [L' E' L : U2'] [S' , L2] U\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"M' U2 M U' S R' F' R S' R' F R U'\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"M U' S R' F' R S' R' F R U' M' U2\",\n      \"piece_1\": \"UB\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"S R' F' R S' R' F R U' M' U2 M U'\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"UL\"\n    },\n    {\n      \"comm\": \"U [R' E R : U'] [R E2 R' : U] U'\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"LF\"\n    },\n    {\n      \"comm\": \"U [R E' R' : U'] [R' E2 R : U] U'\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"LB\"\n    },\n    {\n      \"comm\": \"[L E' L' : U2'] [L' E2' L : U2']\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"RF\"\n    },\n    {\n      \"comm\": \"[L' E L : U2'] [L E2' L' : U2']\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"RB\"\n    },\n    {\n      \"comm\": \"[U2 , R E R'] [S , R2']\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"DR\"\n    },\n    {\n      \"comm\": \"[L' E' L : U2'] [S' , L2] U2'\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"U' M' U2 M U' S R' F' R S' R' F R\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"U' M U' S R' F' R S' R' F R U' M' U'\",\n      \"piece_1\": \"UR\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[R' E R : U2] [R E2 R' : U2]\",\n      \"piece_1\": \"UL\",\n      \"piece_2\": \"LF\"\n    },\n    {\n      \"comm\": \"[R E' R' : U2] [R' E2 R : U2]\",\n      \"piece_1\": \"UL\",\n      \"piece_2\": \"LB\"\n    },\n    {\n      \"comm\": \"U' [L E' L' : U] [L' E2' L : U'] U\",\n      \"piece_1\": \"UL\",\n      \"piece_2\": \"RF\"\n    },\n    {\n      \"comm\": \"U' [L' E L : U] [L E2' L' : U'] U\",\n      \"piece_1\": \"UL\",\n      \"piece_2\": \"RB\"\n    },\n    {\n      \"comm\": \"[R E R' : U2] [S , R2'] U2\",\n      \"piece_1\": \"UL\",\n      \"piece_2\": \"DR\"\n    },\n    {\n      \"comm\": \"[U2 , L' E' L] [S' , L2]\",\n      \"piece_1\": \"UL\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"U M' U2 M U' S R' F' R S' R' F R U2\",\n      \"piece_1\": \"UL\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"U M U' S R' F' R S' R' F R U' M' U\",\n      \"piece_1\": \"UL\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[L2' , E'] [L' S L , F2']\",\n      \"piece_1\": \"LF\",\n      \"piece_2\": \"LB\"\n    },\n    {\n      \"comm\": \"R S R' [E , R2] F2 R S' R' F2\",\n      \"piece_1\": \"LF\",\n      \"piece_2\": \"RF\"\n    },\n    {\n      \"comm\": \"[E , R2] [F2 , R S' R']\",\n      \"piece_1\": \"LF\",\n      \"piece_2\": \"RB\"\n    },\n    {\n      \"comm\": \"[R' : [E , R2]] [R' F2 R , S']\",\n      \"piece_1\": \"LF\",\n      \"piece_2\": \"DR\"\n    },\n    {\n      \"comm\": \"[S' : [R' : [E , R2]] [R' F2 R , S']]\",\n      \"piece_1\": \"LF\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"[M' : [R' E R : U'] [R E2 R' : U]]\",\n      \"piece_1\": \"LF\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"[M : [R' E R : U] [R E2 R' : U']]\",\n      \"piece_1\": \"LF\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[E' , L2'] [F2' , L' S L]\",\n      \"piece_1\": \"LB\",\n      \"piece_2\": \"RF\"\n    },\n    {\n      \"comm\": \"R2' E' [R S' R' , F2] R2 E'\",\n      \"piece_1\": \"LB\",\n      \"piece_2\": \"RB\"\n    },\n    {\n      \"comm\": \"[R: [E', R2']] [R B2' R', S']\",\n      \"piece_1\": \"LB\",\n      \"piece_2\": \"DR\"\n    },\n    {\n      \"comm\": \"[S' : [R: [E', R2']] [R B2' R', S']]\",\n      \"piece_1\": \"LB\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"[M' : [R E' R' : U'] [R' E2 R : U]]\",\n      \"piece_1\": \"LB\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"[M : [R E' R' : U] [R' E2 R : U']]\",\n      \"piece_1\": \"LB\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[R2, E] [R S' R', F2]\",\n      \"piece_1\": \"RF\",\n      \"piece_2\": \"RB\"\n    },\n    {\n      \"comm\": \"[S : [L : [E' , L2']] [L F2' L' , S]]\",\n      \"piece_1\": \"RF\",\n      \"piece_2\": \"DR\"\n    },\n    {\n      \"comm\": \"[L : [E' , L2']] [L F2' L' , S]\",\n      \"piece_1\": \"RF\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"[M' : [L E' L' : U] [L' E2' L : U']]\",\n      \"piece_1\": \"RF\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"[M : [L E' L' : U'] [L' E2' L : U]]\",\n      \"piece_1\": \"RF\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[S : [L': [E, L2]] [L' B2 L, S]]\",\n      \"piece_1\": \"RB\",\n      \"piece_2\": \"DR\"\n    },\n    {\n      \"comm\": \"[L': [E, L2]] [L' B2 L, S]\",\n      \"piece_1\": \"RB\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"[M' : [L' E L : U] [L E2' L' : U']]\",\n      \"piece_1\": \"RB\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"[M : [L' E L : U'] [L E2' L' : U]]\",\n      \"piece_1\": \"RB\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[U' : [R2' , S']] [R F R' , S']\",\n      \"piece_1\": \"DR\",\n      \"piece_2\": \"DL\"\n    },\n    {\n      \"comm\": \"[R' F' R , S'] [R F' R' , S]\",\n      \"piece_1\": \"DR\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"S2' L' B' L S2' L2' S L B L' S' L2\",\n      \"piece_1\": \"DR\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[L F L', S] [L' F L , S']\",\n      \"piece_1\": \"DL\",\n      \"piece_2\": \"DF\"\n    },\n    {\n      \"comm\": \"S2 R B R' S2 R2 S' R' B' R S R2'\",\n      \"piece_1\": \"DL\",\n      \"piece_2\": \"DB\"\n    },\n    {\n      \"comm\": \"[M2' : U' S R' F' R S' R' F R U' M' U2 M]\",\n      \"piece_1\": \"DF\",\n      \"piece_2\": \"DB\"\n    }\n  ],\n  \"2TWISTS\": [\n    {\n      \"comm\": \"[U , R' D R D' R' D R]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"RUB\"\n    },\n    {\n      \"comm\": \"[R' D R D' R' D R , U]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"BUR\"\n    },\n    {\n      \"comm\": \"[U2 , R' D R D' R' D R]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"BUL\"\n    },\n    {\n      \"comm\": \"[R' D R D' R' D R , U2]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"LUB\"\n    },\n    {\n      \"comm\": \"[U' , R' D R D' R' D R]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"LUF\"\n    },\n    {\n      \"comm\": \"[R' D R D' R' D R , U']\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"FUL\"\n    },\n    {\n      \"comm\": \"Letters [PB] [BK]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"FDR\"\n    },\n    {\n      \"comm\": \"Letters [KB] [BP]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"RDF\"\n    },\n    {\n      \"comm\": \"Letters [TB] [BO]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"Letters [OB] [BT]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"Letters [HB] [BS]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"Letters [SB] [BH]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"Letters [LB] [BG]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"Letters [GB] [BL]\",\n      \"piece_1\": \"RUF/FUR\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"[U2 : [R' D R D' R' D R , U']]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"BUL\"\n    },\n    {\n      \"comm\": \"[U : [R' D R D' R' D R , U]]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"LUB\"\n    },\n    {\n      \"comm\": \"[U' : [R' D R D' R' D R , U2]]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"LUF\"\n    },\n    {\n      \"comm\": \"[U : [R' D R D' R' D R , U2]]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"FUL\"\n    },\n    {\n      \"comm\": \"[R' D' R : U] [D' R' D R : U']\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"FDR\"\n    },\n    {\n      \"comm\": \"[D' R' D R : U] [R' D' R : U']\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"RDF\"\n    },\n    {\n      \"comm\": \"[U' : [D R D' R' : U] [R D R' : U']]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"[U' : [R D R' : U] [D R D' R' : U']]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"[U' : [R D' R' : U] [D' R D R' : U']]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"[U' : [D' R D R' : U] [R D' R' : U']]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"[D R' D' R : U] [R' D R : U']\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"[R' D R : U] [D R' D' R : U']\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"[U' : [R' D R D' R' D R , U']]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"LUF\"\n    },\n    {\n      \"comm\": \"[U2 : [R' D R D' R' D R , U]]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"FUL\"\n    },\n    {\n      \"comm\": \"[R' D' R : U2] [D' R' D R : U2]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"FDR\"\n    },\n    {\n      \"comm\": \"[D' R' D R : U2] [R' D' R : U2]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"RDF\"\n    },\n    {\n      \"comm\": \"[D R D' R' : U] [R D R' : U']\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"[R D R' : U] [D R D' R' : U']\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"[R D' R' : U] [D' R D R' : U']\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"[D' R D R' : U] [R D' R' : U']\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"[D R' D' R : U2] [R' D R : U2]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"[R' D R : U2] [D R' D' R : U2]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"[R' D' R : U'] [D' R' D R : U]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"FDR\"\n    },\n    {\n      \"comm\": \"[D' R' D R : U'] [R' D' R : U]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"RDF\"\n    },\n    {\n      \"comm\": \"[D R D' R' : U2] [R D R' : U2]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"[R D R' : U2] [D R D' R' : U2]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"[R D' R' : U2] [D' R D R' : U2]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"[D' R D R' : U2] [R D' R' : U2]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"[D R' D' R : U'] [R' D R : U]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"[R' D R : U'] [D R' D' R : U]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"[D' , R U' R' U R U' R']\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"[R U' R' U R U' R' , D']\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"[D2 , R U' R' U R U' R']\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"[R U' R' U R U' R' , D2]\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"[D , R U' R' U R U' R']\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"[R U' R' U R U' R' , D]\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"[D2 : [R U' R' U R U' R' , D]]\",\n      \"piece_1\": \"RDB/BDR\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"[D' : [R U' R' U R U' R' , D']]\",\n      \"piece_1\": \"RDB/BDR\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"[D : [R U' R' U R U' R' , D2]]\",\n      \"piece_1\": \"RDB/BDR\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"[D' : [R U' R' U R U' R' , D2]]\",\n      \"piece_1\": \"RDB/BDR\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"[D : [R U' R' U R U' R' , D]]\",\n      \"piece_1\": \"LDB/BDL\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"[D2 : [R U' R' U R U' R' , D']]\",\n      \"piece_1\": \"LDB/BDL\",\n      \"piece_2\": \"FDL\"\n    }\n  ],\n  \"3TWISTS\": [\n    {\n      \"comm\": \"(R U R' U R U2' R') U (R U R' U R' U' R2 U' R' U R' U R) U'\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"BUL\"\n    },\n    {\n      \"comm\": \"U + [FUL/BUR]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"LUB\"\n    },\n    {\n      \"comm\": \"U' + [BUL/RUB]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"LUF\"\n    },\n    {\n      \"comm\": \"(R' U' R U' R' U2 R) U' (R2' U R U R' U' R3 U' R' U R') U'\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"FUL\"\n    },\n    {\n      \"comm\": \"Letters [BP] [KQ]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"FDR\"\n    },\n    {\n      \"comm\": \"Letters [BK] [PN]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"RDF\"\n    },\n    {\n      \"comm\": \"Letters [BT] [OQ]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"Letters [BO] [TN]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"Letters [BH] [SQ]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"Letters [BS] [HN]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"Letters [BL] [GQ]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"Letters [BG] [LN]\",\n      \"piece_1\": \"RUB/BUR\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"U2 + [BUL/RUB]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"LUF\"\n    },\n    {\n      \"comm\": \"U' + [FUL/BUR]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"FUL\"\n    },\n    {\n      \"comm\": \"Letters [AP] [KE]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"FDR\"\n    },\n    {\n      \"comm\": \"Letters [AK] [PR]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"RDF\"\n    },\n    {\n      \"comm\": \"Letters [AT] [OE]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"Letters [AO] [TR]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"Letters [AH] [SE]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"Letters [AS] [HR]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"Letters [AL] [GE]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"Letters [AG] [LR]\",\n      \"piece_1\": \"LUB/BUL\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"Letters [DP] [KI]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"FDR\"\n    },\n    {\n      \"comm\": \"Letters [DK] [PF]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"RDF\"\n    },\n    {\n      \"comm\": \"Letters [DT] [OI]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"Letters [DO] [TF]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"Letters [DH] [SI]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"Letters [DS] [HF]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"Letters [DL] [GI]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"Letters [DG] [LF]\",\n      \"piece_1\": \"LUF/FUL\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"Letters [KO] [WP]\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"RDB\"\n    },\n    {\n      \"comm\": \"Letters [PT] [WK]\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"BDR\"\n    },\n    {\n      \"comm\": \"Letters [KS] [XP]\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"Letters [PH] [XK]\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"Letters [KG] [UP]\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"Letters [PL] [UK]\",\n      \"piece_1\": \"RDF/FDR\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"Letters [OS] [XT]\",\n      \"piece_1\": \"RDB/BDR\",\n      \"piece_2\": \"BDL\"\n    },\n    {\n      \"comm\": \"Letters [TH] [XO]\",\n      \"piece_1\": \"RDB/BDR\",\n      \"piece_2\": \"LDB\"\n    },\n    {\n      \"comm\": \"Letters [OG] [UT]\",\n      \"piece_1\": \"RDB/BDR\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"Letters [TL] [UO]\",\n      \"piece_1\": \"RDB/BDR\",\n      \"piece_2\": \"FDL\"\n    },\n    {\n      \"comm\": \"Letters [GS] [XL]\",\n      \"piece_1\": \"LDB/BDL\",\n      \"piece_2\": \"LDF\"\n    },\n    {\n      \"comm\": \"Letters [LH] [XG]\",\n      \"piece_1\": \"LDB/BDL\",\n      \"piece_2\": \"FDL\"\n    }\n  ]\n}","import { Elm } from \"./Main.elm\";\nimport { Alg } from \"cubing/alg\";\nimport { puzzles } from \"cubing/puzzles\";\nimport { experimentalSolve3x3x3IgnoringCenters } from \"cubing/search\";\nimport { TwistyPlayer } from \"cubing/twisty\";\nconst data = require(\"../3-Style/3STYLE.json\")\n\nvar app = Elm.Main.init({\n    node: document.getElementById(\"root\"),\n    flags: { \"data\": data, \"settings\": JSON.parse(localStorage.getItem('settings')) }\n});\n\nfunction createTwistyPlayer() {\n    var player = document.getElementById('twisty-player');\n    if (typeof (player) != 'undefined' && player != null) {\n        return;\n    }\n    player = new TwistyPlayer({\n        puzzle: \"3x3x3\",\n        hintFacelets: \"none\",\n        backView: \"none\",\n        background: \"none\",\n        controlPanel: \"none\",\n        foundationDisplay: \"opaque\",\n    });\n    player.id = \"twisty-player\";\n    player.classList.add(\"h-full\");\n    player.classList.add(\"w-full\");\n    document.getElementById(\"twisty-player-container\").appendChild(player);\n}\n\ndocument.addEventListener('DOMContentLoaded', (event) => {\n    createTwistyPlayer();\n});\n\napp.ports.newCommMessage.subscribe(async function(message) {\n    try {\n        var alg = new Alg(message);\n        await puzzles[\"3x3x3\"].kpuzzle().then(async (kpuzzle) => {\n            await experimentalSolve3x3x3IgnoringCenters(\n                kpuzzle.algToTransformation(alg.expand()).toKState(),\n            ).then(async (solution) => {\n                app.ports.newCommReceiver.send(solution.simplify().toString());\n                createTwistyPlayer();\n                document.getElementById(\"twisty-player\").alg = alg.invert();\n            })\n        })\n    } catch {\n        console.log(\"Error parsing '\" + message + \"' to alg.\")\n        document.getElementById(\"twisty-player\").alg = \"\";\n        app.ports.newCommReceiver.send(message);\n    }\n});\n\napp.ports.newSettingsMessage.subscribe(function(message) {\n    localStorage.setItem('settings', JSON.stringify(message));\n});\n\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$c919ebb1009cc999$export$d7dd397fae3d388","expose","$a37db86ddd0f95e6$export$8a540259358b117f","nep","listeners","WeakMap","postMessage","bind","addEventListener","_","eh","l","data","handleEvent","on","set","removeEventListener","get","off","delete","nodeWorker","$5d43be64171ec656$var$cryptoPromise","$5d43be64171ec656$var$MAX_JS_PRECISE_INT","$5d43be64171ec656$export$ae01e9048b60c0a9","getRandomValues","globalThis","crypto","import","replace","webcrypto","$5d43be64171ec656$var$getRandomValuesFactory","randomUIntBelow","max","Math","floor","$5d43be64171ec656$var$validateMax","val","arr","Uint32Array","upper","lower","$5d43be64171ec656$var$random53BitValue","$5d43be64171ec656$export$98586edbcb99b815","$5d43be64171ec656$var$randomUIntBelowPromise","$5d43be64171ec656$export$5812f237741b8d96","list","j","$0e112480d1414235$export$be5234c0b764b6e0","Symbol","$0e112480d1414235$export$ab8f1c00731ee83e","Map","$0e112480d1414235$var$isObject","serialize","obj","port1","port2","MessageChannel","port","value","$0e112480d1414235$var$throwMarker","serialized","isError","message","name","stack","assign","obj1","ep","self","callback","ev","type","path","argumentList","map","$0e112480d1414235$var$fromWireValue","slice","reduce","prop","rawValue","returnValue1","apply","parent","$0e112480d1414235$export$9b7f6e342a8cbd38","transfers","$0e112480d1414235$var$transferCache","$0e112480d1414235$export$c9b234447cf4ef7c","undefined","value1","Promise","resolve","catch","then","returnValue","wireValue","transferables","$0e112480d1414235$var$toWireValue","$0e112480d1414235$var$closeEndPoint","start","endpoint","constructor","close","target","isReleased","Proxy","isProxyReleased","$0e112480d1414235$var$requestResponseMessage","p","toString","r","_target","$0e112480d1414235$var$throwIfProxyReleased","_thisArg","rawArgumentList","last","$0e112480d1414235$export$39fb953702b7fcd7","$0e112480d1414235$var$createProxy","$0e112480d1414235$var$processArguments","construct","$0e112480d1414235$export$923f96dd5afa9ce6","processed","v","Array","prototype","concat","handler","canHandle","serializedValue","deserialize","msg","module","exports","parcelRequire","$b6da79917169cfa7$var$isInsideWorker","$b6da79917169cfa7$export$4a0e78d9b11ae97c","inside","$b6da79917169cfa7$export$131540c083e88da","$b6da79917169cfa7$export$7e83b7d07af7e9e2","alg","suffixSpec","algBuilder","$98KNc","AlgBuilder","experimentalPushAlg","suffix","choice","$80rC8","randomChoiceFactory","push","Move","fromString","toAlg","$b6da79917169cfa7$var$reidEdgeOrder","split","$b6da79917169cfa7$var$reidCornerOrder","$b6da79917169cfa7$var$centerOrder","$b6da79917169cfa7$var$map","$b6da79917169cfa7$var$rotateLeft","s","$b6da79917169cfa7$var$toMin2PhaseState","state","reid","output","stateData","pieces","i1","orientation","i2","$b6da79917169cfa7$var$toReid333Struct","orbit","perm","ori","join","$b6da79917169cfa7$var$isEquivalentTranformationIgnoringCENTERS","t1","t2","t1NoCenterOri","$dKxIg","KState","kpuzzle","EDGES","CORNERS","CENTERS","fill","experimentalToTransformation","t2NoCenterOri","isIdentical","$b6da79917169cfa7$var$sgs3x3x3","$b6da79917169cfa7$export$dcdf05932adb0752","$71WRK","puzzles","startState","piece","applyAlg","Alg","face","amount","moveToTransformation","toKState","$b6da79917169cfa7$var$passesFilter","$b6da79917169cfa7$var$cachedImport","$b6da79917169cfa7$var$dynamicMin2phaseGWT","$b6da79917169cfa7$export$2f75684bd34a511","solveState","$b6da79917169cfa7$export$5e8649e6d718e8b9","$b6da79917169cfa7$export$62ea2c97ff55c327","initialize","$b6da79917169cfa7$var$randomSuffixes","$b6da79917169cfa7$export$309e41f55d201b91","$b6da79917169cfa7$var$extraBit","$b6da79917169cfa7$export$5dbda9cc3470e03d","unorientedScramble","$947d6caa6417a9fd$var$CountMoves","TraversalUp","metric","super","this","traverseAlg","unit","units","traverseUnit","traverseGrouping","grouping","abs","traverseMove","move","traverseCommutator","commutator","A","B","traverseConjugate","conjugate","traversePause","_pause","traverseNewline","_newLine","traverseLineComment","_comment","$947d6caa6417a9fd$var$isCharUppercase","c","$947d6caa6417a9fd$var$countMovesInstance","fam","family","$947d6caa6417a9fd$export$3bb9ec80d65f79cf","$947d6caa6417a9fd$var$countQuantumMovesInstance","$947d6caa6417a9fd$var$countAnimatedLeavesInstance","total","part","_move","_newline","$947d6caa6417a9fd$export$d5ea806fd922b359","all","register","JSON","parse","n1","r1","n","t","a","f","F2","F3","e","F4","u","F5","F6","A2","A3","A4","A5","A6","A7","$","b","e1","u1","a1","f1","o1","c1","v1","l1","s1","ceil","b1","d1","log","h1","$1","indexOf","g1","m1","p1","z","Xn","isFinite","w1","y1","x1","String","_1","d","A1","g","j1","k1","N1","T1","E","L","R","F","yr","Yn","Jn","Hn","hasOwnProperty","er","h","Zn","Gn","isArray","FileList","wr","O","S","C","M","P","q","I","Q","D","K","V","U","shift","W","r2","Y","G","J","n2","r4","f2","H","X","k","Z","nn","rn","tn","en","n3","r5","e2","u2","n4","r6","o","m","un","an","fn","n5","r7","t3","setTimeout","clearTimeout","subscribe","unsubscribe","splice","cn","vn","ln","document","sn","appendChild","bn","dn","pn","hn","$n","gn","mn","wn","yn","createTextNode","elm_event_node_ref","xn","createElementNS","createElement","_n","kn","An","jn","style","setAttribute","removeAttribute","setAttributeNS","removeAttributeNS","elmFs","Nn","passive","_r","window","defineProperty","n6","r8","al","stopPropagation","ai","preventDefault","Tn","En","Ln","n7","r9","t4","e3","u3","Rn","Fn","zn","Bn","N","w","y","x","Sn","Cn","T","On","Mn","Pn","childNodes","qn","In","n8","r10","parentNode","replaceChild","replaceData","t5","e4","removeChild","u5","a2","insertBefore","n9","r11","t6","e5","createDocumentFragment","u6","Qn","nodeType","textContent","attributes","tagName","toLowerCase","Dn","n10","r12","t7","e6","n11","r13","t8","e7","u7","flags","r14","t9","e8","aj","u8","bb","title","body","Vn","n12","t10","aT","a9","ports","a0","ba","a8","requestAnimationFrame","Un","Cr","location","href","Kn","Wn","nr","rr","tr","ur","ar","ir","fr","or","cr","vr","lr","sr","br","dr","hr","$r","gr","mr","pr","xr","Ar","jr","au","az","aB","aE","aF","kr","Nr","Tr","Er","Lr","Rr","Br","n13","r15","t11","e9","u9","a3","charCodeAt","Fr","zr","Or","Sr","Mr","Pr","qr","Ir","Qr","r16","Dr","Vr","r17","Ur","r18","t12","Kr","Wr","n14","r19","Task","Yr","Gr","Jr","Hr","Xr","Zr","nt","rt","tt","et","ut","at","it","ft","ot","ct","vt","a6","lt","st","af","bt","dt","ht","$t","gt","mt","pt","wt","yt","ac","xt","_t","n15","r20","u10","send","At","jt","kt","Nt","Tt","Et","Lt","Rt","Date","now","Bt","Ft","zt","Ot","St","r21","Random","Ct","Mt","Pt","qt","It","Qt","Dt","Vt","Ut","n16","r22","u11","Kt","n17","r23","Wt","Yt","Gt","Jt","Ht","Xt","Zt","ne","re","te","ee","ue","ae","ie","fe","oe","ce","ve","le","se","be","de","he","$e","n18","ge","n19","me","pe","we","ye","xe","_e","Ae","je","ke","Ne","Te","Ee","Le","Re","Be","n20","Fe","ze","Oe","Se","Ce","Me","Main","init","a4","n21","t13","n22","navigator","userAgent","ctrlKey","metaKey","shiftKey","button","hasAttribute","Elm","$a0b4f895e1596b3b$exports","$72812c925bf6745d$var$pins","$72812c925bf6745d$var$backMoves","randomUIntBelowFactory","$72812c925bf6745d$var$useNodeWorkarounds","Worker","WorkerNavigator","$72812c925bf6745d$var$constructWorker","source","options","worker","NodeWorker","unref","$e2g4C","node_adapter_default","$72812c925bf6745d$var$nodeWorker","eval","blob","Blob","URL","createObjectURL","$hgslF","exposeAPI","$72812c925bf6745d$var$instantiateModuleWorker","async","reject","timeoutID","workerEntryFileURL","WORKER_ENTRY_FILE_URL","$72812c925bf6745d$var$getWorkerEntryFileURL","url","importSrc","onError","startsWith","onFirstMessage","messageData","$dLq9J","wrap","once","$72812c925bf6745d$var$cachedWorkerInstance","$72812c925bf6745d$var$getCachedWorkerInstance","console","warn","workerSource","$72812c925bf6745d$var$instantiateWorker","$ac538ee633df9412$var$Direction","Direction2","$ac538ee633df9412$var$BoundaryType","BoundaryType2","$ac538ee633df9412$var$RenderScheduler","animFrameID","animFrame","animFrameWrapper","requestAnimFrame","cancelAnimFrame","cancelAnimationFrame","timestamp","$ac538ee633df9412$var$arrayEquals","$ac538ee633df9412$var$arrayEqualsCompare","compare","$ac538ee633df9412$var$mod","offset","$ac538ee633df9412$var$modIntoRange","rangeMin","rangeMax","$ac538ee633df9412$var$_effectiveTimestampMilliseconds","$ac538ee633df9412$var$effectiveTimestampMilliseconds_fn","$ac538ee633df9412$var$_animFrameEffectiveTimestampStaleDropper","WeakSet","model","detailedTimelineInfo","$ac538ee633df9412$var$HTMLElementShim","$ac538ee633df9412$var$controlsLocations","none","$ac538ee633df9412$var$ControlPanelProp","$6N6jP","SimpleTwistyPropSource","getDefaultValue","HTMLElement","$ac538ee633df9412$var$customElementsShim","customElements","define","$ac538ee633df9412$var$_cssSourceMap","$ac538ee633df9412$var$CSSSource","sourceText","getAsString","$ac538ee633df9412$var$ManagedCustomElement","$cks0r","__privateAdd","shadow","attachShadow","mode","contentWrapper","classList","add","addCSS","cssSource","existing","__privateGet","cssElem","removeCSS","addElement","element","prependElement","prepend","removeElement","$ac538ee633df9412$var$twistyViewerWrapperCSS","$ac538ee633df9412$var$twisty2DSVGCSS","$ac538ee633df9412$var$svgCounter","$ac538ee633df9412$var$_cachedPosition","$ac538ee633df9412$var$_freshListenerManager","$ac538ee633df9412$var$_freshListenerManager2","$ac538ee633df9412$var$_cachedTwisty2DPuzzle","$ac538ee633df9412$var$colorMaps","dim","white","orange","limegreen","red","yellow","oriented","ignored","invisible","$ac538ee633df9412$var$Twisty2DPuzzle","svgSource","puzzleLoader","scheduler","render","FreshListenerManager","resetSVG","addListener","puzzleID","disconnect","legacyPosition","onPositionChange","experimentalStickering","experimentalSetStickering","position","movesInProgress","partialMove","direction","Backwards","invert","newState","applyMove","svg","draw","fraction","__privateSet","scheduleRender","stickering","appearance","experimentalAppearance","originalColors","gradients","svgID","innerHTML","svgElem","querySelector","namespaceURI","maxWidth","maxHeight","gradientDefs","firstChild","orbitName","definition","orbits","orbitDefinition","idx","numPieces","numOrientations","elementID","elem","elementByID","originalColor","orbitAppearance","pieceAppearance","faceletAppearance","facelets","colorMap","newGradient","drawState","nextState","transformation","nextTransformation","curTransformationOrbit","transformationData","nextTransformationOrbit","fromCur","permutation","singleColor","fromNext","easedBackwardsPercent","children","grad","stopDefs","color","stopDef","stop","$ac538ee633df9412$var$_freshListenerManager3","$ac538ee633df9412$var$_cachedScene","$ac538ee633df9412$var$_currentTwisty2DPuzzleWrapper","$ac538ee633df9412$var$_currentClassName","$ac538ee633df9412$var$Twisty2DSceneWrapper","effectiveVisualization","onPuzzleLoader","THREEJS","Scene","currentTwisty2DPuzzleWrapper","twisty2DPuzzleWrapper","old","twisty2DPuzzlePromise","twisty2DPuzzle","schedulable","svgPromise","llSVG","setCurrentTwisty2DPuzzleWrapper","$ac538ee633df9412$var$_freshListenerManager4","$ac538ee633df9412$var$_cachedTwisty3DPuzzle","$ac538ee633df9412$var$ClassListManager","prefix","validSuffixes","clearValue","remove","setValue","includes","newClassName","changed","$ac538ee633df9412$var$Twisty3DPuzzleWrapper","visualizationStrategy","twisty3DPuzzle","puzzleLoader2","hintFacelet","hintFaceletStyle","experimentalUpdateOptions","hintFacelets","foundationDisplay","showFoundation","setStickering","twisty3D","experimentalSetAppearance","cubeAppearance","appearancePromise","addMultiListener","foundationStickerSprite","hintStickerSprite","inputs","experimentalUpdateTexture","proxyPromise","proxy3D","foundationSprite","hintSprite","cube3DShim","pg3d","pg3dShim","raycasterPromise","transformations","puzzle","info","targets","experimentalGetControlTargets","raycaster","intersects","intersectObjects","closestMove","getClosestMoveToAxis","point","experimentalAddMove","coalesce","mod","order","$ac538ee633df9412$var$performance2","performance","$ac538ee633df9412$var$PR","round","devicePixelRatio","$ac538ee633df9412$var$WIDTH","$ac538ee633df9412$var$HEIGHT","$ac538ee633df9412$var$TEXT_X","$ac538ee633df9412$var$TEXT_Y","$ac538ee633df9412$var$GRAPH_X","$ac538ee633df9412$var$GRAPH_Y","$ac538ee633df9412$var$GRAPH_WIDTH","$ac538ee633df9412$var$GRAPH_HEIGHT","$ac538ee633df9412$var$StatsPanel","fg","bg","min","Infinity","dom","context","getContext","width","height","cssText","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","update","maxValue","drawImage","$ac538ee633df9412$var$pixelRatio","$ac538ee633df9412$var$_dragInfoMap","$ac538ee633df9412$var$_lazyListenersRegistered","$ac538ee633df9412$var$_registerLazyListeners","$ac538ee633df9412$var$registerLazyListeners_fn","$ac538ee633df9412$var$_clear","$ac538ee633df9412$var$clear_fn","$ac538ee633df9412$var$_trackDrag","$ac538ee633df9412$var$trackDrag_fn","$ac538ee633df9412$var$twisty3DVantageCSS","$ac538ee633df9412$var$DragTracker","EventTarget","onPointerDown","__privateMethod","call","newDragInfo","attachedInfo","hasMoved","lastClientX","clientX","lastClientY","clientY","lastTimeStamp","timeStamp","pointerId","setPointerCapture","onPointerMove","movementInfo","dispatchEvent","CustomEvent","detail","onPointerUp","trackDragResult","event","releasePointerCapture","altKey","normalizedX","offsetX","offsetWidth","normalizedY","offsetY","offsetHeight","rightClick","ctrlOrMetaKey","movementX","movementY","elapsedMs","$ac538ee633df9412$var$renderers","$ac538ee633df9412$var$newRenderer","renderer","rendererConstructor","WebGLRenderer","antialias","alpha","setPixelRatio","$ac538ee633df9412$var$momentumScale","progress","exp","$ac538ee633df9412$var$SHOW_STATS","$ac538ee633df9412$var$setCameraFromOrbitCoordinates","camera","orbitCoordinates","backView","spherical","Spherical","distance","latitude","DEGREES_PER_RADIAN","longitude","makeSafe","setFromSpherical","lookAt","$ac538ee633df9412$var$shareAllNewRenderers","$ac538ee633df9412$var$_setupBasicPresses","$ac538ee633df9412$var$setupBasicPresses_fn","$ac538ee633df9412$var$_onResizeStaleDropper","$ac538ee633df9412$var$_width","$ac538ee633df9412$var$_height","$ac538ee633df9412$var$_onResize","$ac538ee633df9412$var$onResize_fn","$ac538ee633df9412$var$_cachedRenderer","$ac538ee633df9412$var$_cachedCanvas","$ac538ee633df9412$var$_cachedDragTracker","$ac538ee633df9412$var$_dragTracker","$ac538ee633df9412$var$dragTracker_fn","$ac538ee633df9412$var$_cachedCamera","$ac538ee633df9412$var$_cachedOrbitControls","$ac538ee633df9412$var$_disconnectionFunctions","$ac538ee633df9412$var$_scheduler","$ac538ee633df9412$var$dedicatedRenderersSoFar","$ac538ee633df9412$var$_backViewClassListManager","$ac538ee633df9412$var$_freshListenerManager5","$ac538ee633df9412$var$_backViewVantage","$ac538ee633df9412$var$_cachedScene2","$ac538ee633df9412$var$_vantages","$ac538ee633df9412$var$_currentTwisty3DPuzzleWrapper","$ac538ee633df9412$var$_twisty3DStaleDropper","$ac538ee633df9412$var$Twisty3DVantage","scene","stats","rendererIsShared","loadingElement","StaleDropper","beginTime","prevTime","frames","fpsPanel","addPanel","msPanel","memPanel","memory","REVISION","showPanel","panel","display","begin","end","time","usedJSHeapSize","jsHeapSizeLimit","canvasInfo","canvas","ResizeObserver","observe","orbitControls","clearRect","clear","COLOR_BUFFER_BIT","domElement","PerspectiveCamera","copy","Vector3","multiplyScalar","mirror","dragTracker","experimentalInertia","onMovementBound","onMovement","experimentalHasBeenMoved","onMove","onUp","temperMovement","sign","_a","temperedX","temperedY","lastTemperedX","lastTemperedY","scale","minDim","orbitCoordinatesRequest","prevCoords","startTimestamp","momentumX","momentumY","lastTimestamp","progressBefore","progressAfter","$ac538ee633df9412$var$INERTIA_TIMEOUT_MS","delta","listener","addFreshListener","removeFreshListener","setSize","$ac538ee633df9412$var$renderPooled","movePressInput","pressInfo","cameraPromise","queue","clientWidth","clientHeight","yoff","excess","aspect","setViewOffset","updateProjectionMatrix","clearCanvas","$ac538ee633df9412$var$Twisty3DSceneWrapper","Set","vantage","addVantage","onPuzzle","onBackView","setBackView","shouldHaveBackView","hasBackView","removeVantage","twisty3DPuzzleWrapper","three","Raycaster","mouse","Vector2","setFromCamera","raycastMove","depth","onPress","experimentalVantages","values","setCurrentTwisty3DPuzzleWrapper","$ac538ee633df9412$var$buttonGridCSS","$ac538ee633df9412$var$buttonCSS","$ac538ee633df9412$var$globalSafeDocument","$ac538ee633df9412$var$fullscreenEnabled","fullscreenEnabled","webkitFullscreenEnabled","$ac538ee633df9412$var$documentFullscreenElement","fullscreenElement","webkitFullscreenElement","$ac538ee633df9412$var$_onCommand","$ac538ee633df9412$var$onCommand_fn","$ac538ee633df9412$var$_iconManager","$ac538ee633df9412$var$buttonIcons","$ac538ee633df9412$var$ButtonAppearanceProp","TwistyPropDerived","derive","fullscreen","enabled","icon","coarseTimelineInfo","atStart","atEnd","playing","hidden","viewerLink","$ac538ee633df9412$var$buttonCommands","$ac538ee633df9412$var$TwistyButtons","controller","buttons","connectedCallback","command","$ac538ee633df9412$var$TwistyButton","buttonAppearance","exitFullscreen","webkitExitFullscreen","setIcon","requestFullscreen","webkitRequestFullscreen","onFullscreen","buttonAppearances","disabled","onFullscreenButton","jumpToStart","flash","animationController","play","untilBoundary","togglePlay","Forwards","jumpToEnd","visitTwizzleLink","arguments","iconName","$ac538ee633df9412$var$twistyScrubberCSS","which","$ac538ee633df9412$var$onMouseUpdate","pageY","$ac538ee633df9412$var$clickNum","$ac538ee633df9412$var$_inputElem","$ac538ee633df9412$var$scaling","$ac538ee633df9412$var$TwistyScrubber","inputElem","timeRange","onDetailedTimelineInfo","onInput","slowDown","parseInt","playingInfo","timestampRequest","$ac538ee633df9412$var$cachedCamera","$ac538ee633df9412$var$screenshot","aspectRatio","twisty3DWrapper","dataURL","toDataURL","defaultFilename","$ac538ee633df9412$var$getDefaultFilename","download","filename","$ac538ee633df9412$var$downloadURL","algWithIssues","experimentalNumUnits","extension","click","$ac538ee633df9412$var$twistyPlayerCSS","$ac538ee633df9412$var$AlgIssues","issues","warnings","freeze","errors","error","$ac538ee633df9412$var$algWithIssuesFromString","$ac538ee633df9412$var$AlgProp","TwistyPropSource","canReuseValue","v2","newAlg","$ac538ee633df9412$var$BackgroundProp","$ac538ee633df9412$var$BackViewProp","$ac538ee633df9412$var$IndexerConstructorRequestProp","$ac538ee633df9412$var$LatitudeLimitProp","$ac538ee633df9412$var$orbitCoordinatesEqual","c2","$ac538ee633df9412$var$OrbitCoordinatesRequestProp","newCoordinates","oldValuePromise","oldValue","newValue","$ac538ee633df9412$var$PlayingInfoProp","EntireTimeline","loop","newInfo","$ac538ee633df9412$var$PGPuzzleDescriptionStringProp","NO_VALUE","$ac538ee633df9412$var$PuzzleIDRequestProp","$ac538ee633df9412$var$PuzzleLoaderProp","puzzleIDRequest","userVisibleErrorTracker","puzzleDescriptionRequest","customPGPuzzleLoader","cube3x3x3","$ac538ee633df9412$var$SetupAnchorProp","$ac538ee633df9412$var$TempoScaleProp","$ac538ee633df9412$var$smartTimestamps","anchor","$ac538ee633df9412$var$TimestampRequestProp","validInput","$ac538ee633df9412$var$URLProp","input","$ac538ee633df9412$var$ViewerLinkProp","$ac538ee633df9412$var$VisualizationFormatProp","$ac538ee633df9412$var$OrbitCoordinatesProp","$ac538ee633df9412$var$defaultCameraOrbitCoordinates","strategy","req","latitudeLimit","$ac538ee633df9412$var$centeredCameraOrbitCoordinates","$ac538ee633df9412$var$cubeCube3DCameraOrbitCoordinates","$ac538ee633df9412$var$cubePG3DCameraOrbitCoordinates","$ac538ee633df9412$var$megaminxCameraOrbitCoordinates","atan","$ac538ee633df9412$var$pyraminxCameraOrbitCoordinates","$ac538ee633df9412$var$PuzzleIDProp","$ac538ee633df9412$var$cachedLoader","$ac538ee633df9412$var$SpriteProp","spriteURL","textureURL","_reject","onLoadingError","TextureLoader","$ac538ee633df9412$var$loader","load","$ac538ee633df9412$var$VisualizationStrategyProp","visualizationRequest","$ac538ee633df9412$var$defaultDurationForAmount","$ac538ee633df9412$var$AlgDuration","durationForAmount","$ac538ee633df9412$var$axisLookup","$ac538ee633df9412$var$localSimulMovesInstance","nestedUnit","traverseGroupingOnce","experimentalIsEmpty","is","moves","from","maxSimulDur","move1","move2","localMovesWithRange","blockMove","animLeafUnit","msUntilNext","duration","segmentOnce","segmentsOnce","segment","pause","$ac538ee633df9412$var$localSimulMoves","$ac538ee633df9412$var$demos","animLeaf","$ac538ee633df9412$var$SimultaneousMoveIndexer","animLeaves","localSimulMove","leafWithRange","$ac538ee633df9412$var$simulMoves","getAnimLeaf","index","getAnimLeafWithRange","indexToMoveStartTimestamp","timestampToIndex","timestampToPosition","currentMoveInfo","identityTransformation","stateIndex","as","currentMoves","windowEarliestTimestamp","movesStarting","movesFinishing","movesFinished","latestStart","earliestEnd","leafWithRange1","moveFinished","currentMove","endTimestamp","stateAtIndex","transformationAtIndex","algDuration","numAnimatedLeaves","moveDuration","$ac538ee633df9412$var$AlgPartDecoration","moveCount","forward","backward","$ac538ee633df9412$var$DecoratorConstructor","durationFn","cache","identity","dummyLeaf","child","apd","applyTransformation","dec","mult","key","decA","decB","AB","ApBp","ABApBp","ABAp","absn","selfMultiply","$ac538ee633df9412$var$WalkerDown","back","$ac538ee633df9412$var$AlgWalker","TraversalDownUp","algOrUnit","dur","goali","goaldur","root","moveByIndex","loc","dosearch","moveByDuration","wd","firstcheck","directedGenerator","IterationDirection","domult","_wd","_lineComment","keepgoing","base","full","mul","$ac538ee633df9412$var$_requestedTimestampToMilliseconds","$ac538ee633df9412$var$requestedTimestampToMilliseconds_fn","$ac538ee633df9412$var$chunkAlgsInstance","algLength","chunkMaxLength","mainAlgBuilder","chunkAlgBuilder","Grouping","reset","$ac538ee633df9412$var$chunkifyAlg","sqrt","Conjugate","newline","comment","$ac538ee633df9412$var$chunkAlgs","$ac538ee633df9412$export$ff289a905dec21cb","deccon","chunkedAlg","decoration","walker","indexToMovesInProgress","$ac538ee633df9412$var$IndexerConstructorProp","indexerConstructorRequest","$cKpk8","countMoves","experimentalExpand","cumulativeTime","countAnimatedLeaves","$ac538ee633df9412$var$PuzzleAlgProp","algToTransformation","$ac538ee633df9412$var$AlgTransformationProp","setupAlg","$ac538ee633df9412$var$IndexerProp","indexerConstructor","$ac538ee633df9412$var$AnchorTransformationProp","setupTransformation","setupAnchor","setupAlgTransformation","inverseAlgTransformation","indexer","$ac538ee633df9412$var$TimeRangeProp","$ac538ee633df9412$var$DetailedTimelineInfoProp","canReuse","$ac538ee633df9412$var$CoarseTimelineInfoProp","$ac538ee633df9412$var$CurrentMoveInfoProp","addCatchUpMove","catchUpMove","$ac538ee633df9412$var$CurrentLeavesSimplifiedProp","m2","$ac538ee633df9412$var$CurrentStateProp","currentLeavesSimplified","anchoredStart","finishingMove","finishedMove","$ac538ee633df9412$var$LegacyPositionProp","$ac538ee633df9412$var$KPuzzleProp","$ac538ee633df9412$var$EMPTY_ERRORS","$ac538ee633df9412$var$UserVisibleErrorTracker","_v1","_v2","$ac538ee633df9412$var$CatchUpMoveProp","$ac538ee633df9412$var$NaiveMoveCountProp","$ac538ee633df9412$var$MovePressInputProp","$ac538ee633df9412$var$FoundationDisplayProp","$ac538ee633df9412$var$SetupTransformationProp","$ac538ee633df9412$var$ArbitraryStringProp","$ac538ee633df9412$var$err","propName","$ac538ee633df9412$var$_controlsManager","$ac538ee633df9412$var$_visualizationWrapperElem","$ac538ee633df9412$var$_errorElem","$ac538ee633df9412$var$_alreadyConnected","$ac538ee633df9412$var$_visualizationWrapper","$ac538ee633df9412$var$_visualizationStrategy","$ac538ee633df9412$var$_setVisualizationWrapper","$ac538ee633df9412$var$setVisualizationWrapper_fn","$ac538ee633df9412$var$TwistyPlayerSettable","experimentalModel","background","controlPanel","foundationStickerSpriteURL","HintFaceletProp","hintStickerSpriteURL","StickeringProp","tempoScale","visualizationFormat","videoURL","competitionID","puzzleAlg","puzzleSetupAlg","anchorTransformation","currentState","puzzleDescription","setup","isExplorer","searchParams","flexibleMove","experimentalAppendMove","playingInfoProp","experimentalGet","$ac538ee633df9412$var$ExperimentalGetters","experimentalSetupAlg","newSetup","experimentalSetupAnchor","experimentalPuzzleDescription","backgroundTheme","newControlPanel","visualization","experimentalTitle","experimentalVideoURL","experimentalCompetitionID","viewerLinkPage","experimentalMovePressInput","cameraLatitude","cameraLongitude","cameraDistance","cameraLatitudeLimit","newTempoScale","experimentalSprite","experimentalHintSprite","$ac538ee633df9412$var$twistyPlayerAttributeMap","$ac538ee633df9412$var$configKeys","fromEntries","$ac538ee633df9412$export$d03687cb83cd55dc","config","delegate","lastDatestamp","lastTimestampPromise","onPlayingProp","catchUpHelper","catchingUp","pendingFrame","catchUpMs","previousCatchUpMove","onCatchUpMoveProp","playPause","autoSkipToOtherEndIfStartingAtBoundary","frameDatestamp","freshenerResult","newTimestamp","newSmartTimestampRequest","twizzleLink","experimentalCanvasClickCallback","entries","userVisibleError","errorString","toggle","scrubber","animate","opacity","wrapper","canvases","vantages","observedAttributes","attributeChangedCallback","attributeName","_oldValue","setterName","wrapper2D","str","XMLSerializer","serializeToString","newWrapper","$ac538ee633df9412$var$twistyAlgViewerCSS","$ac538ee633df9412$var$TwistyAlgLeafElem","className","text","dataDown","offsetIntoMove","clickable","twistyAlgViewer","jumpToIndex","earliestMoveIndex","pathToIndex","_index","setCurrentMove","current","$ac538ee633df9412$var$TwistyAlgWrapperElem","addString","addElem","dataUp","flushQueue","node","$ac538ee633df9412$var$maybeReverseList","append","$ac538ee633df9412$var$updateDirectionByAmount","currentDirection","reverse","$ac538ee633df9412$var$_domTree","$ac538ee633df9412$var$algToDOMTreeInstance","first","direct","square1Tuple","experimentalAsSquare1Tuple","experimentalRepetitionSuffix","highlighter","addMove","startCharIndex","second","aLen","_dataDown","lineComment","$ac538ee633df9412$var$algToDOMTree","$ac538ee633df9412$export$e0a62567c31d067","moveCharIndexMap","currentElem","charIndex","newElem","twistyPlayer","lastClickTimestamp","setTwistyPlayer","setAlg","sourceAlg","parsedAlg","moveInfo","mainCurrentMove","timestampPromise","getElementById","whenDefined","$ac538ee633df9412$var$_textarea","$ac538ee633df9412$var$_carbonCopy","$ac538ee633df9412$var$_carbonCopyPrefix","$ac538ee633df9412$var$_carbonCopyHighlight","$ac538ee633df9412$var$_carbonCopySuffix","$ac538ee633df9412$var$_textareaClassListValidForPuzzleManager","$ac538ee633df9412$var$_twistyPlayer","$ac538ee633df9412$var$_twistyPlayerProp","$ac538ee633df9412$var$_algProp","$ac538ee633df9412$var$algProp_get","$ac538ee633df9412$var$_onInputHasFired","$ac538ee633df9412$var$_padSuffix","$ac538ee633df9412$var$padSuffix_fn","$ac538ee633df9412$var$_highlightedLeaf","$ac538ee633df9412$var$leafTokensInstance","unitArrays","numMovesInside","numMovesSofar","tokens","numLeavesInside","leaf","dataUpA","dataUpB","$ac538ee633df9412$var$leafTokens","$ac538ee633df9412$var$TwistyAlgEditorValueProp","$ac538ee633df9412$var$AlgEditorAlgWithIssuesProp","$ac538ee633df9412$var$TwistyAlgEditorSelectionProp","selectionStart","selectionEnd","endChangedMostRecently","lastResult","$ac538ee633df9412$var$TargetCharProp","selectionInfo","$ac538ee633df9412$var$LeafTokensProp","$ac538ee633df9412$var$LeafToHighlightProp","withWhere","leafInfo","where","targetChar","endCharIndex","lastLeafInfo","leafInfo1","leafTokens","$ac538ee633df9412$var$twistyAlgEditorCSS","endsWith","valueProp","selectionProp","targetCharProp","algEditorAlgWithIssues","leafTokensProp","leafToHighlight","debugNeverRequestTimestamp","rows","placeholder","onBlur","onSelectionChange","twistyPlayerProp","highlightInfo","highlightLeaf","algString","placeholderText","endTrimmed","trimEnd","activeElement","setAlgIssueClassForPuzzle","oldAlg","moveStartTimestamp","$ac538ee633df9412$var$twizzleLinkCSS","$ac538ee633df9412$var$_cssElem","fallback","span","paramMapping","competition","params","ourParam","twistyPlayerParam","paramValue","$ac538ee633df9412$var$getConfigFromURL","hostname","pathname","getPuzzleDescriptionString","addHeading","setupAlgDiv","headingDiv","$53b463381fc9d287$exports","$35da740d59af89ba$var$app","settings","localStorage","getItem","$35da740d59af89ba$var$createTwistyPlayer","player","newCommMessage","cwi","solve333ToString","$72812c925bf6745d$export$901e6c7ea2803dd0","expand","solution","newCommReceiver","simplify","newSettingsMessage","setItem","stringify"],"version":3,"file":"index.0ddf083a.js.map"}